[replace_code]
<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ulus SimÃ¼latÃ¶rÃ¼</title>
    <style>
        :root {
            --bg-color: #ecf0f1;
            --container-bg: #fff;
            --text-color: #2c3e50;
            --primary-color: #3498db;
            --secondary-color: #1abc9c;
            --danger-color: #e74c3c;
            --warning-color: #f39c12;
            --success-color: #2ecc71;
            --panel-bg: #f5f7fa;
            --border-color: #dfe4ea;
            --accent-color: #5D5CDE;
            --header-color: #1abc9c;
            --input-bg: #ecf0f1;
            --tab-active-color: #5D5CDE;
        }

        .dark {
            --bg-color: #181818;
            --container-bg: #2c3e50;
            --text-color: #ecf0f1;
            --primary-color: #5D5CDE;
            --secondary-color: #1abc9c;
            --danger-color: #e74c3c;
            --warning-color: #f39c12;
            --success-color: #2ecc71;
            --panel-bg: #34495e;
            --border-color: #4e6a83;
            --header-color: #1abc9c;
            --input-bg: #4e6a83;
            --tab-active-color: #5D5CDE;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            box-sizing: border-box;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .game-container {
            background-color: var(--container-bg);
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            padding: 20px;
            width: 95%;
            max-width: 1200px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            transition: background-color 0.3s ease;
        }

        h1 {
            text-align: center;
            color: var(--header-color);
            margin-bottom: 20px;
        }

        /* Sekme Navigasyonu */
        .tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 10px;
            gap: 10px; /* Sekmeler arasÄ± boÅŸluk */
            flex-wrap: wrap; /* KÃ¼Ã§Ã¼k ekranlarda sarmalama */
        }

        .tab-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 5px 5px 0 0; /* Ãœst kÃ¶ÅŸeleri yuvarlak */
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.2s ease, transform 0.1s ease;
            flex-grow: 1; /* Esnek bÃ¼yÃ¼me */
            min-width: 120px; /* Minimum geniÅŸlik */
        }

        @media (max-width: 768px) {
            .tab-btn {
                min-width: 90px;
                padding: 10px 12px;
                font-size: 0.9em;
            }
        }

        .tab-btn:hover {
            background-color: var(--primary-color);
            opacity: 0.9;
            transform: translateY(-2px); /* Hafif yukarÄ± kalkma efekti */
        }

        .tab-btn.active {
            background-color: var(--tab-active-color); /* Aktif sekme rengi */
            font-weight: bold;
            border-bottom: 2px solid var(--tab-active-color); /* Aktif sekmede alt Ã§izgi */
            transform: translateY(0); /* Sabit konum */
        }

        /* TÃ¼m ekranlarÄ± gizle */
        .game-screen {
            display: none;
            background-color: var(--container-bg); /* TÃ¼m ekranlar iÃ§in ortak arka plan */
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            min-height: 500px; /* Ekranlar arasÄ± boÅŸluÄŸu korumak iÃ§in */
            overflow-y: auto; /* Ä°Ã§erik taÅŸarsa kaydÄ±rma */
        }

        /* Ana oyun ekranÄ±nÄ±n dÃ¼zenini korumak iÃ§in */
        #main-screen {
            display: grid; /* Flexbox ile ana konteyneri yÃ¶nettik, iÃ§ini grid ile */
            grid-template-columns: 1fr 1.5fr;
            grid-template-rows: auto 1fr; /* Ä°statistikler ve eylemler Ã¼stte, log ve canvas altta */
            gap: 20px;
            grid-template-areas:
                "stats actions"
                "log canvas";
        }

        @media (max-width: 768px) {
            #main-screen {
                grid-template-columns: 1fr;
                grid-template-areas:
                    "stats"
                    "actions"
                    "log"
                    "canvas";
            }

            .game-container {
                padding: 15px;
                width: 98%;
            }
        }

        #main-screen.active {
            display: grid;
        }

        .stats-panel {
            grid-area: stats;
            background-color: var(--panel-bg);
            padding: 20px;
            border-radius: 6px;
            border-left: 5px solid var(--secondary-color);
        }

        .stats-panel p {
            margin: 10px 0;
            font-size: 1.1em;
        }

        .stats-panel span {
            font-weight: bold;
            color: var(--text-color);
        }

        .actions-panel {
            grid-area: actions;
            background-color: var(--panel-bg);
            padding: 20px;
            border-radius: 6px;
            border-left: 5px solid var(--warning-color);
        }

        .actions-panel h2 {
            color: var(--warning-color);
            margin-top: 0;
            margin-bottom: 15px;
        }

        .action-category {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px dashed var(--border-color);
        }

        .action-category:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .action-category h3 {
            color: var(--warning-color);
            margin-top: 0;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 15px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.95em;
            transition: background-color 0.2s ease;
        }

        button:hover {
            background-color: var(--primary-color);
            opacity: 0.9;
        }

        button:disabled {
            background-color: #7f8c8d;
            cursor: not-allowed;
        }

        .log-panel {
            grid-area: log;
            background-color: var(--panel-bg);
            padding: 20px;
            border-radius: 6px;
            border-left: 5px solid #9b59b6;
            overflow-y: auto;
            max-height: 300px; /* Log paneli iÃ§in maksimum yÃ¼kseklik */
        }

        .log-panel h2 {
            color: #9b59b6;
            margin-top: 0;
            margin-bottom: 15px;
        }

        #game-log {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        #game-log li {
            background-color: var(--container-bg);
            padding: 8px 12px;
            margin-bottom: 5px;
            border-radius: 4px;
            font-size: 0.9em;
        }

        #gameCanvas {
            grid-area: canvas;
            background-color: var(--panel-bg);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            width: 100%;
            height: 300px; /* Canvas boyutu */
        }

        /* Yeni EkranlarÄ±n Genel Stili */
        .game-screen h2 {
            color: var(--warning-color); /* SarÄ±msÄ± baÅŸlÄ±k rengi */
            margin-bottom: 20px;
            text-align: center;
        }

        .game-screen ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .game-screen li {
            background-color: var(--panel-bg);
            padding: 10px 15px;
            margin-bottom: 8px;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1.05em;
        }
         .game-screen li div { /* ButonlarÄ± saÄŸa yaslamak iÃ§in */
            display: flex;
            gap: 5px;
        }


        .game-screen .cabinet-actions,
        .game-screen .parliament-propose,
        .game-screen .security-actions,
        .game-screen .foreign-actions,
        .game-screen .opposition-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
            justify-content: center; /* ButonlarÄ± ortala */
            margin-bottom: 15px;
        }


        .game-screen input[type="text"],
        .game-screen input[type="number"],
        .game-screen select {
            padding: 10px;
            border-radius: 5px;
            border: 1px solid var(--border-color);
            background-color: var(--input-bg);
            color: var(--text-color);
            font-size: 1em;
            flex-grow: 1;
            min-width: 150px;
        }

        .game-screen .parliament-note,
        .game-screen .security-note {
            font-style: italic;
            font-size: 0.9em;
            color: #bdc3c7;
            margin-top: 10px;
            text-align: center;
        }

        /* Oyun Sonu EkranÄ± */
        #game-over-screen {
            display: flex; /* Flexbox ile ortalama */
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            min-height: 500px;
        }

        #game-over-screen h1 {
            color: var(--danger-color);
            margin-bottom: 20px;
        }

        #game-over-screen p {
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        #game-over-screen button {
            background-color: var(--danger-color);
            padding: 15px 30px;
            font-size: 1.2em;
            margin-top: 30px;
        }

        #game-over-screen button:hover {
            background-color: var(--danger-color);
            opacity: 0.9;
        }

        /* Meclis Action butonlarÄ± */
        .parliament-action-btn {
            padding: 8px 12px;
            margin-left: 5px;
            font-size: 0.85em;
        }

        .parliament-action-btn[data-action="approve"] {
            background-color: var(--success-color);
        }
        .parliament-action-btn[data-action="approve"]:hover {
            background-color: var(--success-color);
            opacity: 0.9;
        }
        .parliament-action-btn[data-action="reject"] {
            background-color: var(--danger-color);
        }
        .parliament-action-btn[data-action="reject"]:hover {
            background-color: var(--danger-color);
            opacity: 0.9;
        }

        /* DÄ±ÅŸ Ä°liÅŸkiler listesi */
        #country-relations-list button, #summit-invitation-list button {
            padding: 6px 10px;
            font-size: 0.8em;
            margin-left: 5px;
        }

        #country-relations-list li, #summit-invitation-list li {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap; /* KÃ¼Ã§Ã¼k ekranlarda sarmalama */
        }


        /* Dark Mode Toggle */
        .theme-toggle {
            position: absolute;
            top: 15px;
            right: 15px;
            background-color: transparent;
            border: none;
            cursor: pointer;
            font-size: 1.5rem;
            color: var(--text-color);
            z-index: 100;
        }

        /* Chart styles */
        #reportChartCanvas {
            background-color: var(--panel-bg);
            border-radius: 6px;
            max-width: 100%;
            height: auto;
            margin-top: 20px;
        }

        /* Yeni Ã¶zellikler iÃ§in stiller */
        .slider-container {
            margin: 15px 0;
        }

        .slider-container label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .slider-container input[type="range"] {
            width: 100%;
            height: 10px;
            border-radius: 5px;
            background: var(--panel-bg);
            outline: none;
            -webkit-appearance: none;
        }

        .slider-container input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--accent-color);
            cursor: pointer;
        }

        .flex-row {
            display: flex;
            gap: 10px;
            align-items: center;
            margin: 10px 0;
        }

        .input-with-buttons {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .input-with-buttons input {
            width: 100px;
            text-align: center;
        }

        .input-with-buttons button {
            padding: 8px 12px;
            font-size: 1em;
        }

        .minister-advice {
            background-color: var(--panel-bg);
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            border-left: 5px solid var(--accent-color);
        }

        .minister-advice h3 {
            margin-top: 0;
            color: var(--accent-color);
        }

        .policy-slider {
            margin: 15px 0;
        }

        .policy-slider-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px;
        }

        .policy-value {
            font-weight: bold;
        }

        /* Tooltip styles */
        .tooltip {
            position: relative;
            display: inline-block;
            margin-left: 5px;
            cursor: help;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: rgba(0, 0, 0, 0.8);
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.9em;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        @media (max-width: 480px) {
            button {
                padding: 8px 12px;
                font-size: 0.85em;
                margin: 3px;
            }
            
            .stats-panel p, .actions-panel h3 {
                font-size: 0.95em;
            }
        }
    </style>
</head>
<body>
    <button id="theme-toggle" class="theme-toggle" aria-label="Toggle dark/light mode">ğŸŒ“</button>
    <div class="game-container">
        <h1>Ulus SimÃ¼latÃ¶rÃ¼</h1>

        <div class="tabs">
            <button class="tab-btn active" data-tab="main-screen">Ana Ekran</button>
            <button class="tab-btn" data-tab="cabinet-screen">Kabine</button>
            <button class="tab-btn" data-tab="parliament-screen">Meclis & Siyaset</button>
            <button class="tab-btn" data-tab="foreign-affairs-screen">DÄ±ÅŸ Ä°liÅŸkiler & Zirveler</button>
            <button class="tab-btn" data-tab="security-screen">GÃ¼venlik & Ordu</button>
            <button class="tab-btn" data-tab="reports-screen">Raporlar</button>
        </div>

        <div id="main-screen" class="game-screen active">
            <div class="stats-panel">
                <p>Hafta: <span id="current-week">1</span></p>
                <p>NÃ¼fus: <span id="population">10,000,000</span></p>
                <p>GSYÄ°H: $<span id="gdp">1,000,000,000</span></p>
                <p>Enflasyon: <span id="inflation">2</span>%</p>
                <p>Halk Memnuniyeti: <span id="satisfaction">70</span>%</p>
                <p>BÃ¼tÃ§e: $<span id="budget">100,000,000</span></p>
                <p>Vergi OranÄ±: <span id="tax-rate">10</span>%</p>
                <p>Siyasi Sistem: <span id="political-system">Demokrasi</span></p>
                <p>DÄ±ÅŸ Ä°liÅŸkiler Skoru: <span id="foreign-relations-score">50</span></p>
                <p>Ordu BÃ¼yÃ¼klÃ¼ÄŸÃ¼: <span id="army-size-display">50000</span></p>
            </div>

            <div class="actions-panel">
                <h2>Kararlar</h2>
                <div class="action-category">
                    <h3>Vergi AyarlarÄ±</h3>
                    <div class="slider-container">
                        <label for="tax-slider">Vergi OranÄ±: <span id="tax-slider-value">10</span>%</label>
                        <input type="range" id="tax-slider" min="5" max="30" step="0.1" value="10">
                    </div>
                    <button id="apply-tax">Vergi OranÄ±nÄ± Uygula</button>
                </div>
                
                <div class="action-category">
                    <h3>Ekonomi</h3>
                    <div class="flex-row">
                        <label for="economy-investment">Ekonomiye YatÄ±rÄ±m ($M):</label>
                        <div class="input-with-buttons">
                            <button id="decrease-economy-investment">-</button>
                            <input type="number" id="economy-investment" value="10" min="1" max="100">
                            <button id="increase-economy-investment">+</button>
                        </div>
                        <button id="invest-economy">YatÄ±rÄ±m Yap</button>
                    </div>
                </div>
                
                <div class="action-category">
                    <h3>Sosyal Politikalar</h3>
                    <div class="flex-row">
                        <label for="education-investment">EÄŸitime YatÄ±rÄ±m ($M):</label>
                        <div class="input-with-buttons">
                            <button id="decrease-education-investment">-</button>
                            <input type="number" id="education-investment" value="5" min="1" max="50">
                            <button id="increase-education-investment">+</button>
                        </div>
                        <button id="invest-education">YatÄ±rÄ±m Yap</button>
                    </div>
                    
                    <div class="flex-row">
                        <label for="health-investment">SaÄŸlÄ±ÄŸa YatÄ±rÄ±m ($M):</label>
                        <div class="input-with-buttons">
                            <button id="decrease-health-investment">-</button>
                            <input type="number" id="health-investment" value="7" min="1" max="50">
                            <button id="increase-health-investment">+</button>
                        </div>
                        <button id="invest-health">YatÄ±rÄ±m Yap</button>
                    </div>
                    
                    <div class="flex-row">
                        <label for="culture-investment">KÃ¼ltÃ¼re YatÄ±rÄ±m ($M):</label>
                        <div class="input-with-buttons">
                            <button id="decrease-culture-investment">-</button>
                            <input type="number" id="culture-investment" value="3" min="1" max="30">
                            <button id="increase-culture-investment">+</button>
                        </div>
                        <button id="promote-culture">YatÄ±rÄ±m Yap</button>
                    </div>
                    
                    <button id="declare-holiday">Yeni Tatil Ä°lan Et ($2M)</button>
                </div>
                 <div class="action-category">
                    <h3>Yeni Politikalar</h3>
                    <button id="invest-green-energy">YeÅŸil Enerjiye YatÄ±rÄ±m Yap ($20M)</button>
                    <button id="develop-defense-industry">Savunma Sanayii GeliÅŸtir ($50M)</button>
                </div>
                <button id="end-week-btn">HaftayÄ± Bitir</button>
            </div>

            <div class="log-panel">
                <h2>Olay GÃ¼nlÃ¼ÄŸÃ¼</h2>
                <ul id="game-log"></ul>
            </div>

            <canvas id="gameCanvas"></canvas>
        </div>

        <div id="cabinet-screen" class="game-screen">
            <h2>Kabine YÃ¶netimi</h2>
            <p>Mevcut Kabine Ãœyeleri:</p>
            <ul id="cabinet-list">
            </ul>
            
            <div class="minister-advice" id="cabinet-advice">
                <h3>Bakan RaporlarÄ±</h3>
                <div id="economy-minister-advice">
                    <p><strong>Ekonomi BakanÄ±:</strong> <span id="economy-advice-text">HenÃ¼z rapor verilmedi.</span></p>
                </div>
                <div id="education-minister-advice">
                    <p><strong>EÄŸitim BakanÄ±:</strong> <span id="education-advice-text">HenÃ¼z rapor verilmedi.</span></p>
                </div>
                <div id="health-minister-advice">
                    <p><strong>SaÄŸlÄ±k BakanÄ±:</strong> <span id="health-advice-text">HenÃ¼z rapor verilmedi.</span></p>
                </div>
                <div id="foreign-minister-advice">
                    <p><strong>DÄ±ÅŸiÅŸleri BakanÄ±:</strong> <span id="foreign-advice-text">HenÃ¼z rapor verilmedi.</span></p>
                </div>
                <div id="interior-minister-advice">
                    <p><strong>Ä°Ã§iÅŸleri BakanÄ±:</strong> <span id="interior-advice-text">HenÃ¼z rapor verilmedi.</span></p>
                </div>
                <div id="justice-minister-advice">
                    <p><strong>Adalet BakanÄ±:</strong> <span id="justice-advice-text">HenÃ¼z rapor verilmedi.</span></p>
                </div>
                 <div id="defense-minister-advice">
                    <p><strong>Savunma BakanÄ±:</strong> <span id="defense-advice-text">HenÃ¼z rapor verilmedi.</span></p>
                </div>
            </div>
            
            <h3>Bakan AtamalarÄ± / DeÄŸiÅŸiklikleri</h3>
            <div class="cabinet-actions">
                <select id="minister-type-select">
                    <option value="economy">Ekonomi BakanÄ±</option>
                    <option value="education">EÄŸitim BakanÄ±</option>
                    <option value="health">SaÄŸlÄ±k BakanÄ±</option>
                    <option value="foreign">DÄ±ÅŸiÅŸleri BakanÄ±</option>
                    <option value="interior">Ä°Ã§iÅŸleri BakanÄ±</option>
                    <option value="justice">Adalet BakanÄ±</option>
                    <option value="defense">Savunma BakanÄ±</option>
                </select>
                <input type="text" id="minister-name-input" placeholder="Yeni Bakan AdÄ± (isteÄŸe baÄŸlÄ±)">
                <button id="appoint-minister-btn">Bakan Ata / DeÄŸiÅŸtir</button>
            </div>
            <p>Kabine kararlarÄ± haftalÄ±k sÃ¼reÃ§leri etkiler.</p>
        </div>

        <div id="parliament-screen" class="game-screen">
            <h2>Meclis & Siyaset</h2>
            <p>Meclis DesteÄŸi: <span id="parliament-support"></span></p>
            
            <div class="policy-slider">
                <div class="policy-slider-header">
                    <h3>Sosyal Politikalar</h3>
                    <span class="policy-value" id="social-policy-value">5</span>
                </div>
                <input type="range" id="social-policy-slider" min="1" max="10" value="5">
                <div class="tooltip">â„¹ï¸
                    <span class="tooltiptext">Sosyal politikalarÄ± artÄ±rmak halk memnuniyetini artÄ±rÄ±r ancak bÃ¼tÃ§eye yÃ¼k getirir.</span>
                </div>
                <button id="apply-social-policy">Uygula</button>
            </div>
            
            <div class="policy-slider">
                <div class="policy-slider-header">
                    <h3>Ekonomi PolitikalarÄ±</h3>
                    <span class="policy-value" id="economic-policy-value">5</span>
                </div>
                <input type="range" id="economic-policy-slider" min="1" max="10" value="5">
                <div class="tooltip">â„¹ï¸
                    <span class="tooltiptext">Ekonomi politikalarÄ±nÄ± deÄŸiÅŸtirmek GSYÄ°H ve enflasyonu etkiler.</span>
                </div>
                <button id="apply-economic-policy">Uygula</button>
            </div>
            
            <h3>GÃ¼ndemdeki Yasalar / Talepler</h3>
            <ul id="parliament-agenda">
            </ul>
            <h3>Sizin Teklifleriniz</h3>
            <div class="parliament-propose">
                <input type="text" id="proposal-input" placeholder="Yeni yasa teklifi">
                <button id="propose-law-btn">Yasa Teklif Et</button>
            </div>
            <div class="opposition-actions">
                <button id="meet-opposition-closed-btn">Muhalefetle KapalÄ± GÃ¶rÃ¼ÅŸ ($500K)</button>
                <button id="meet-opposition-open-btn">Muhalefetle AÃ§Ä±k GÃ¶rÃ¼ÅŸ ($200K)</button>
            </div>
            <button id="call-elections">SeÃ§im Ã‡aÄŸrÄ±sÄ± Yap</button>
            <button id="declare-dictatorship">DiktatÃ¶rlÃ¼k Ä°lan Et</button>
            <button id="dissolve-parliament-btn">Meclisi Feshet</button>
            <p class="parliament-note">Meclisi feshetmek diktatÃ¶rlÃ¼ÄŸe yol aÃ§abilir veya halk memnuniyetini dÃ¼ÅŸÃ¼rebilir.</p>
        </div>

        <div id="foreign-affairs-screen" class="game-screen">
            <h2>DÄ±ÅŸ Ä°liÅŸkiler & Zirveler</h2>
            <p>Genel DÄ±ÅŸ Ä°liÅŸkiler PuanÄ±: <span id="foreign-relations-display"></span></p>
            
            <div class="policy-slider">
                <div class="policy-slider-header">
                    <h3>Diplomatik YaklaÅŸÄ±m</h3>
                    <span class="policy-value" id="diplomatic-approach-value">5</span>
                </div>
                <input type="range" id="diplomatic-approach-slider" min="1" max="10" value="5">
                <div class="tooltip">â„¹ï¸
                    <span class="tooltiptext">1: Agresif, 10: UzlaÅŸmacÄ±. Diplomatik yaklaÅŸÄ±mÄ±nÄ±z dÄ±ÅŸ iliÅŸkileri ve ticari fÄ±rsatlarÄ± etkiler.</span>
                </div>
                <button id="apply-diplomatic-approach">Uygula</button>
            </div>
            
            <h3>Ãœlkelerle Ä°liÅŸkiler</h3>
            <ul id="country-relations-list">
            </ul>

            <h3>Zirve YÃ¶netimi</h3>
            <div class="foreign-actions">
                 <button id="create-summit-btn">Zirve DÃ¼zenle ($15M)</button>
            </div>
            <p>Zirveye davet edilecek Ã¼lkeler (En fazla 5):</p>
            <ul id="summit-invitation-list"></ul>
            <div class="foreign-actions">
                <button id="send-summit-invitations-btn" disabled>Davetleri GÃ¶nder</button>
            </div>


            <h3>Gelen Davetler / Olaylar</h3>
            <ul id="foreign-events-list">
            </ul>
            <div class="foreign-actions">
                <button id="global-summit-btn">UluslararasÄ± Zirveye KatÄ±l ($10M)</button>
                <button id="sign-trade-deal">Ticaret AnlaÅŸmasÄ± Ä°mzala ($1M)</button>
                <button id="improve-relations">DÄ±ÅŸ Ä°liÅŸkileri GeliÅŸtir ($2M)</button>
                <button id="declare-war">SavaÅŸ Ä°lan Et (En KÃ¶tÃ¼ Ä°liÅŸkili)</button>
            </div>
        </div>

        <div id="security-screen" class="game-screen">
            <h2>GÃ¼venlik & Ordu</h2>
            <p>SuÃ§ OranÄ±: <span id="crime-rate">5</span>%</p>
            <p>HalkÄ±n GÃ¼venlik AlgÄ±sÄ±: <span id="security-perception">75</span>%</p>
            <p>Ordu BÃ¼yÃ¼klÃ¼ÄŸÃ¼: <span id="army-size-security">50000</span></p>
            <p>Askeri GÃ¼Ã§ Endeksi: <span id="military-strength-index">50</span></p>
            
            <div class="policy-slider">
                <div class="policy-slider-header">
                    <h3>GÃ¼venlik Seviyesi (Ä°Ã§ Polisaj)</h3>
                    <span class="policy-value" id="security-level-value">5</span>
                </div>
                <input type="range" id="security-level-slider" min="1" max="10" value="5">
                <div class="tooltip">â„¹ï¸
                    <span class="tooltiptext">GÃ¼venlik seviyesini artÄ±rmak suÃ§larÄ± azaltabilir ancak Ã¶zgÃ¼rlÃ¼kleri kÄ±sÄ±tlayabilir.</span>
                </div>
                <button id="apply-security-level">Uygula</button>
            </div>
            
            <h3>Emniyet / Adalet KararlarÄ±</h3>
            <div class="flex-row">
                <label for="police-budget">Polis BÃ¼tÃ§esi ($M):</label>
                <div class="input-with-buttons">
                    <button id="decrease-police-budget">-</button>
                    <input type="number" id="police-budget" value="3" min="1" max="20">
                    <button id="increase-police-budget">+</button>
                </div>
                <button id="increase-police-budget-btn">Uygula</button>
            </div>
            <button id="reform-justice">Adalet Sistemini Reforme Et ($5M)</button>
            <button id="surveillance-program">GÃ¶zetim ProgramÄ± BaÅŸlat ($4M)</button>
            <button id="crackdown-dissent">Muhalefeti BastÄ±r ($2M)</button>
            <p class="security-note">GÃ¶zetim programlarÄ± ve muhalefeti bastÄ±rma, suÃ§ oranÄ±nÄ± dÃ¼ÅŸÃ¼rebilir ancak halk memnuniyetini etkileyebilir.</p>

            <h3>Askeri Kararlar</h3>
             <div class="flex-row">
                <label for="recruit-soldiers">Asker AlÄ±mÄ± (x1000 kiÅŸi):</label>
                <div class="input-with-buttons">
                    <button id="decrease-recruits">-</button>
                    <input type="number" id="recruit-soldiers-input" value="5" min="1" max="50">
                    <button id="increase-recruits">+</button>
                </div>
                <button id="recruit-soldiers-btn">Asker Al ($1M/1000 asker)</button>
            </div>
            <div class="security-actions">
                <button id="plan-war-btn">SavaÅŸ PlanlamasÄ± Yap ($5M)</button>
                <button id="military-exercise-btn">Askeri Tatbikat DÃ¼zenle ($10M)</button>
                <button id="military-council-meeting-btn">Askeri Åura ile ToplantÄ± ($1M)</button>
            </div>
        </div>

        <div id="reports-screen" class="game-screen">
            <h2>Raporlar</h2>
            
            <div class="minister-advice">
                <h3>Ekonomi BakanlÄ±ÄŸÄ± Raporu</h3>
                <p id="economy-report-inflation">Enflasyon Analizi: <span id="inflation-analysis">HenÃ¼z analiz yapÄ±lmadÄ±.</span></p>
                <p id="economy-report-gdp">GSYÄ°H Durumu: <span id="gdp-analysis">HenÃ¼z analiz yapÄ±lmadÄ±.</span></p>
                <p id="economy-report-advice">Ã–neriler: <span id="economy-recommendations">HenÃ¼z Ã¶neri bulunmuyor.</span></p>
            </div>
            
            <div class="minister-advice">
                <h3>Sosyal Politikalar Raporu</h3>
                <p>EÄŸitim Kalitesi: <span id="education-quality-report">Yetersiz</span></p>
                <p>SaÄŸlÄ±k Hizmetleri Kalitesi: <span id="health-quality-report">Yetersiz</span></p>
                <p>Ulusal Bayram SayÄ±sÄ±: <span id="holiday-count-report">0</span></p>
                <p>Ã–neriler: <span id="social-recommendations">HenÃ¼z Ã¶neri bulunmuyor.</span></p>
            </div>
            
            <div class="minister-advice">
                <h3>Siyasi Rapor</h3>
                <p>HÃ¼kÃ¼met DesteÄŸi: <span id="government-support-report">70%</span></p>
                <p>Muhalefet GÃ¼cÃ¼: <span id="opposition-strength-report">30%</span></p>
                <p>Ã–neriler: <span id="political-recommendations">HenÃ¼z Ã¶neri bulunmuyor.</span></p>
            </div>
             <div class="minister-advice">
                <h3>Askeri Durum Raporu</h3>
                <p>Ordu HazÄ±rlÄ±k Seviyesi: <span id="army-readiness-report">Orta</span></p>
                <p>Genelkurmay DeÄŸerlendirmesi: <span id="military-assessment-report">Durum stabil.</span></p>
            </div>
            
            <h3>Ekonomi Verileri</h3>
            <canvas id="reportChartCanvas" width="600" height="300"></canvas>
        </div>

        <div id="game-over-screen" class="game-screen">
            <h1>Oyun Bitti!</h1>
            <p id="game-over-reason"></p>
            <p>Son Hafta: <span id="final-week"></span></p>
            <p>Son NÃ¼fus: <span id="final-population"></span></p>
            <p>Son GSYÄ°H: <span id="final-gdp"></span></p>
            <button id="restart-game-btn">Tekrar Oyna</button>
        </div>

    </div>

    <script>
        // --- Oyun DeÄŸiÅŸkenleri ---
        let week = 1;
        let population = 10000000;
        let gdp = 1000000000;
        let inflation = 2; // %
        let satisfaction = 70; // %
        let budget = 100000000; // $
        let taxes = 10; // Vergi oranÄ± (%)
        let educationSpending = 0; // HaftalÄ±k eÄŸitim bÃ¼tÃ§esi (etki)
        let healthSpending = 0; // HaftalÄ±k saÄŸlÄ±k bÃ¼tÃ§esi (etki)
        let cultureSpending = 0; // HaftalÄ±k kÃ¼ltÃ¼r bÃ¼tÃ§esi (etki)
        let crimeRate = 5; // %
        let securityPerception = 75; // %
        let politicalSystem = 'Demokrasi'; // 'Demokrasi', 'DiktatÃ¶rlÃ¼k'
        let parliamentSupport = 70; // % Meclis desteÄŸi (yasalarÄ± geÃ§irme ÅŸansÄ±)
        let foreignRelationsScore = 50; // Genel dÄ±ÅŸ iliÅŸkiler puanÄ± (0-100)
        let nationalHolidays = 0; // Eklenen milli bayram sayÄ±sÄ±
        let armySize = 50000; // Ordu bÃ¼yÃ¼klÃ¼ÄŸÃ¼
        let militaryStrengthIndex = 50; // Askeri gÃ¼Ã§ (0-100), tatbikatlar ve teÃ§hizatla artar
        let armyUpkeepCostPerSoldier = 50; // Asker baÅŸÄ±na haftalÄ±k bakÄ±m maliyeti

        // Politika deÄŸiÅŸkenleri
        let socialPolicyLevel = 5; // 1-10 arasÄ±
        let economicPolicyLevel = 5; // 1-10 arasÄ±
        let diplomaticApproachLevel = 5; // 1-10 arasÄ± (1: Agresif, 10: UzlaÅŸmacÄ±)
        let securityLevel = 5; // 1-10 arasÄ± (Ä°Ã§ polisaj)

        // Tarih verilerini tutmak iÃ§in diziler
        const historicalData = {
            weeks: [],
            gdp: [],
            satisfaction: [],
            inflation: []
        };
        // GeÃ§ici haftalÄ±k etki depolayÄ±cÄ±larÄ±
        let weeklyBudgetChange = 0;
        let weeklySatisfactionChange = 0;
        let weeklyGdpChangeFactor = 1; // Ã‡arpan olarak GSYÄ°H deÄŸiÅŸimi
        let weeklyInflationChange = 0;
        let weeklyPopulationChangeFactor = 1; // Ã‡arpan olarak nÃ¼fus deÄŸiÅŸimi
        let weeklyForeignRelationsChange = 0;
        let weeklyCrimeRateChange = 0;
        let weeklySecurityPerceptionChange = 0;
        let weeklyMilitaryStrengthChange = 0;


        // Kabine Ãœyeleri (basit model)
        const cabinet = {
            economy: { name: 'BoÅŸ', efficiency: 0.5, corruption: 0.1 },
            education: { name: 'BoÅŸ', efficiency: 0.5, corruption: 0.1 },
            health: { name: 'BoÅŸ', efficiency: 0.5, corruption: 0.1 },
            foreign: { name: 'BoÅŸ', efficiency: 0.5, corruption: 0.1 },
            interior: { name: 'BoÅŸ', efficiency: 0.5, corruption: 0.1 },
            justice: { name: 'BoÅŸ', efficiency: 0.5, corruption: 0.1 },
            defense: { name: 'BoÅŸ', efficiency: 0.5, corruption: 0.1 }
        };
        // Ãœlkelerle Ä°liÅŸkiler (10 komÅŸu/bÃ¶lgesel Ã¼lke)
        const countries = {
            'Yunanistan': { relation: 40, tradeDeal: false, summitInvited: false, summitAccepted: false },
            'Bulgaristan': { relation: 55, tradeDeal: false, summitInvited: false, summitAccepted: false },
            'GÃ¼rcistan': { relation: 60, tradeDeal: true, summitInvited: false, summitAccepted: false },
            'Ermenistan': { relation: 20, tradeDeal: false, summitInvited: false, summitAccepted: false },
            'Azerbaycan': { relation: 75, tradeDeal: true, summitInvited: false, summitAccepted: false },
            'Ä°ran': { relation: 30, tradeDeal: false, summitInvited: false, summitAccepted: false },
            'Irak': { relation: 25, tradeDeal: false, summitInvited: false, summitAccepted: false },
            'Suriye': { relation: 15, tradeDeal: false, summitInvited: false, summitAccepted: false },
            'Rusya': { relation: 45, tradeDeal: false, summitInvited: false, summitAccepted: false },
            'Ukrayna': { relation: 50, tradeDeal: false, summitInvited: false, summitAccepted: false }
        };
        // Meclis GÃ¼ndemi (yasalarÄ±n reddedilme sayÄ±sÄ±nÄ± da iÃ§erecek)
        const parliamentAgenda = []; // { description, onApprove, onReject, rejectionCount }
        let summitPlanned = false;
        let summitInvitationsSent = false;

        // --- DOM Elementleri ---
        // Dark Mode Toggle
        const themeToggleBtn = document.getElementById('theme-toggle');
        // Sekme ButonlarÄ±
        const tabButtons = document.querySelectorAll('.tab-btn');
        const gameScreens = document.querySelectorAll('.game-screen');
        // Ana Ekran
        const currentWeekEl = document.getElementById('current-week');
        const populationEl = document.getElementById('population');
        const gdpEl = document.getElementById('gdp');
        const inflationEl = document.getElementById('inflation');
        const satisfactionEl = document.getElementById('satisfaction');
        const budgetEl = document.getElementById('budget');
        const taxRateEl = document.getElementById('tax-rate');
        const politicalSystemEl = document.getElementById('political-system');
        const foreignRelationsScoreEl = document.getElementById('foreign-relations-score');
        const armySizeDisplayEl = document.getElementById('army-size-display');
        const gameLogEl = document.getElementById('game-log');
        const gameCanvas = document.getElementById('gameCanvas');
        const ctx = gameCanvas.getContext('2d');
        // Vergi ve YatÄ±rÄ±m Elementleri
        const taxSlider = document.getElementById('tax-slider');
        const taxSliderValue = document.getElementById('tax-slider-value');
        const applyTaxBtn = document.getElementById('apply-tax');
        
        const economyInvestmentInput = document.getElementById('economy-investment');
        const decreaseEconomyInvestmentBtn = document.getElementById('decrease-economy-investment');
        const increaseEconomyInvestmentBtn = document.getElementById('increase-economy-investment');
        const investEconomyBtn = document.getElementById('invest-economy');
        const educationInvestmentInput = document.getElementById('education-investment');
        const decreaseEducationInvestmentBtn = document.getElementById('decrease-education-investment');
        const increaseEducationInvestmentBtn = document.getElementById('increase-education-investment');
        const investEducationBtn = document.getElementById('invest-education');
        
        const healthInvestmentInput = document.getElementById('health-investment');
        const decreaseHealthInvestmentBtn = document.getElementById('decrease-health-investment');
        const increaseHealthInvestmentBtn = document.getElementById('increase-health-investment');
        const investHealthBtn = document.getElementById('invest-health');
        
        const cultureInvestmentInput = document.getElementById('culture-investment');
        const decreaseCultureInvestmentBtn = document.getElementById('decrease-culture-investment');
        const increaseCultureInvestmentBtn = document.getElementById('increase-culture-investment');
        const promoteCultureBtn = document.getElementById('promote-culture');
        
        const declareHolidayBtn = document.getElementById('declare-holiday');
        const endWeekBtn = document.getElementById('end-week-btn');
        // Yeni Politikalar ButonlarÄ±
        const investGreenEnergyBtn = document.getElementById('invest-green-energy');
        const developDefenseIndustryBtn = document.getElementById('develop-defense-industry');

        // Politika AyarlarÄ±
        const socialPolicySlider = document.getElementById('social-policy-slider');
        const socialPolicyValue = document.getElementById('social-policy-value');
        const applySocialPolicyBtn = document.getElementById('apply-social-policy');
        
        const economicPolicySlider = document.getElementById('economic-policy-slider');
        const economicPolicyValue = document.getElementById('economic-policy-value');
        const applyEconomicPolicyBtn = document.getElementById('apply-economic-policy');
        
        const diplomaticApproachSlider = document.getElementById('diplomatic-approach-slider');
        const diplomaticApproachValue = document.getElementById('diplomatic-approach-value');
        const applyDiplomaticApproachBtn = document.getElementById('apply-diplomatic-approach');
        
        const securityLevelSlider = document.getElementById('security-level-slider');
        const securityLevelValue = document.getElementById('security-level-value');
        const applySecurityLevelBtn = document.getElementById('apply-security-level');
        // GÃ¼venlik EkranÄ±
        const policeBudgetInput = document.getElementById('police-budget');
        const decreasePoliceBudgetBtn = document.getElementById('decrease-police-budget');
        const increasePoliceBudgetBtn = document.getElementById('increase-police-budget');
        const increasePoliceBudgetBtnApply = document.getElementById('increase-police-budget-btn');
        const crimeRateEl = document.getElementById('crime-rate');
        const securityPerceptionEl = document.getElementById('security-perception');
        const armySizeSecurityEl = document.getElementById('army-size-security');
        const militaryStrengthIndexEl = document.getElementById('military-strength-index');
        const reformJusticeBtn = document.getElementById('reform-justice');
        const surveillanceProgramBtn = document.getElementById('surveillance-program');
        const crackdownDissentBtn = document.getElementById('crackdown-dissent');
        const recruitSoldiersInput = document.getElementById('recruit-soldiers-input');
        const decreaseRecruitsBtn = document.getElementById('decrease-recruits');
        const increaseRecruitsBtn = document.getElementById('increase-recruits');
        const recruitSoldiersBtn = document.getElementById('recruit-soldiers-btn');
        const planWarBtn = document.getElementById('plan-war-btn');
        const militaryExerciseBtn = document.getElementById('military-exercise-btn');
        const militaryCouncilMeetingBtn = document.getElementById('military-council-meeting-btn');


        // Kabine EkranÄ±
        const cabinetListEl = document.getElementById('cabinet-list');
        const ministerTypeSelect = document.getElementById('minister-type-select');
        const ministerNameInput = document.getElementById('minister-name-input');
        const appointMinisterBtn = document.getElementById('appoint-minister-btn');
        // Bakan Tavsiye Elementleri
        const economyAdviceText = document.getElementById('economy-advice-text');
        const educationAdviceText = document.getElementById('education-advice-text');
        const healthAdviceText = document.getElementById('health-advice-text');
        const foreignAdviceText = document.getElementById('foreign-advice-text');
        const interiorAdviceText = document.getElementById('interior-advice-text');
        const justiceAdviceText = document.getElementById('justice-advice-text');
        const defenseAdviceText = document.getElementById('defense-advice-text');
        // Ekonomi Raporu Elementleri
        const inflationAnalysisEl = document.getElementById('inflation-analysis');
        const gdpAnalysisEl = document.getElementById('gdp-analysis');
        const economyRecommendationsEl = document.getElementById('economy-recommendations');
        const socialRecommendationsEl = document.getElementById('social-recommendations');
        const politicalRecommendationsEl = document.getElementById('political-recommendations');
        // Meclis EkranÄ±
        const parliamentSupportEl = document.getElementById('parliament-support');
        const parliamentAgendaList = document.getElementById('parliament-agenda');
        const proposalInput = document.getElementById('proposal-input');
        const proposeLawBtn = document.getElementById('propose-law-btn');
        const callElectionsBtn = document.getElementById('call-elections');
        const declareDictatorshipBtn = document.getElementById('declare-dictatorship');
        const dissolveParliamentBtn = document.getElementById('dissolve-parliament-btn');
        const meetOppositionClosedBtn = document.getElementById('meet-opposition-closed-btn');
        const meetOppositionOpenBtn = document.getElementById('meet-opposition-open-btn');

        // DÄ±ÅŸ Ä°liÅŸkiler EkranÄ±
        const foreignRelationsDisplayEl = document.getElementById('foreign-relations-display');
        const countryRelationsList = document.getElementById('country-relations-list');
        const foreignEventsList = document.getElementById('foreign-events-list');
        const globalSummitBtn = document.getElementById('global-summit-btn');
        const signTradeDealBtn = document.getElementById('sign-trade-deal');
        const improveRelationsBtn = document.getElementById('improve-relations');
        const declareWarBtn = document.getElementById('declare-war');
        const createSummitBtn = document.getElementById('create-summit-btn');
        const summitInvitationListEl = document.getElementById('summit-invitation-list');
        const sendSummitInvitationsBtn = document.getElementById('send-summit-invitations-btn');


        // Raporlar EkranÄ±
        const gdpChangeReportEl = document.getElementById('gdp-change-report'); // Bu ID HTML'de yok, eklenecek ya da kaldÄ±rÄ±lacak
        const inflationChangeReportEl = document.getElementById('inflation-change-report'); // Bu ID HTML'de yok
        const educationQualityReportEl = document.getElementById('education-quality-report');
        const healthQualityReportEl = document.getElementById('health-quality-report');
        const holidayCountReportEl = document.getElementById('holiday-count-report');
        const governmentSupportReportEl = document.getElementById('government-support-report');
        const oppositionStrengthReportEl = document.getElementById('opposition-strength-report');
        const armyReadinessReportEl = document.getElementById('army-readiness-report');
        const militaryAssessmentReportEl = document.getElementById('military-assessment-report');
        const reportChartCanvas = document.getElementById('reportChartCanvas');
        const reportChartCtx = reportChartCanvas.getContext('2d');

        // Oyun Sonu EkranÄ±
        const gameOverScreen = document.getElementById('game-over-screen');
        const gameOverReasonEl = document.getElementById('game-over-reason');
        const finalWeekEl = document.getElementById('final-week');
        const finalPopulationEl = document.getElementById('final-population');
        const finalGdpEl = document.getElementById('final-gdp');
        const restartGameBtn = document.getElementById('restart-game-btn');
        
        // --- Dark Mode KontrolÃ¼ ---
        function initTheme() {
            if (localStorage.getItem('theme') === 'dark') {
                document.documentElement.classList.add('dark');
                themeToggleBtn.textContent = 'â˜€ï¸';
            } else {
                 document.documentElement.classList.remove('dark');
                themeToggleBtn.textContent = 'ğŸŒ™';
            }
        }

        themeToggleBtn.addEventListener('click', () => {
            if (document.documentElement.classList.contains('dark')) {
                document.documentElement.classList.remove('dark');
                themeToggleBtn.textContent = 'ğŸŒ™';
                localStorage.setItem('theme', 'light');
            } else {
                document.documentElement.classList.add('dark');
                themeToggleBtn.textContent = 'â˜€ï¸';
                localStorage.setItem('theme', 'dark');
            }
        });
        // --- YardÄ±mcÄ± Fonksiyonlar ---

        // Ekran deÄŸiÅŸtirme fonksiyonu
        function showScreen(screenId) {
            gameScreens.forEach(screen => {
                screen.style.display = 'none';
            });
            const targetScreen = document.getElementById(screenId);
            if (targetScreen) {
                 targetScreen.style.display = screenId === 'main-screen' ? 'grid' : 'block';
            }

            tabButtons.forEach(btn => {
                if (btn.dataset.tab === screenId) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });
            // Ekran deÄŸiÅŸiminde gerekli gÃ¼ncellemeleri yap
            if (screenId === 'reports-screen') {
                updateReports();
                updateMinisterReports(); // BakanlÄ±k raporlarÄ± da burada gÃ¼ncellensin
            } else if (screenId === 'cabinet-screen') {
                updateMinisterAdvice();
            } else if (screenId === 'foreign-affairs-screen') {
                updateForeignRelationsDisplay();
                updateSummitInvitationList();
            } else if (screenId === 'security-screen') {
                // GÃ¼venlik ekranÄ± iÃ§in Ã¶zel gÃ¼ncellemeler
                armySizeSecurityEl.textContent = armySize.toLocaleString();
                militaryStrengthIndexEl.textContent = militaryStrengthIndex.toFixed(0);
            }
        }

        // Responsive canvas boyutu ayarlama
        function resizeCanvas() {
            const container = gameCanvas.parentElement;
            if (container) { // container'Ä±n varlÄ±ÄŸÄ±nÄ± kontrol et
                 gameCanvas.width = container.offsetWidth;
                 gameCanvas.height = 300; // Sabit yÃ¼kseklik
                 drawCanvasStats();

                 reportChartCanvas.width = container.offsetWidth * 0.9; // Rapor grafiÄŸi iÃ§in
                 reportChartCanvas.height = 300; // Rapor grafiÄŸi iÃ§in
                 drawReportChart(); // Rapor grafiÄŸini de yeniden Ã§iz
            }
        }
        window.addEventListener('resize', resizeCanvas);


        // Oyun deÄŸiÅŸkenlerini sÄ±fÄ±rlama
        function resetGame() {
            week = 1;
            population = 10000000;
            gdp = 1000000000;
            inflation = 2;
            satisfaction = 70;
            budget = 100000000;
            taxes = 10;
            educationSpending = 0;
            healthSpending = 0;
            cultureSpending = 0;
            crimeRate = 5;
            securityPerception = 75;
            politicalSystem = 'Demokrasi';
            parliamentSupport = 70;
            foreignRelationsScore = 50;
            nationalHolidays = 0;
            armySize = 50000;
            militaryStrengthIndex = 50;
            summitPlanned = false;
            summitInvitationsSent = false;
            
            // Politika seviyelerini sÄ±fÄ±rla
            socialPolicyLevel = 5;
            economicPolicyLevel = 5;
            diplomaticApproachLevel = 5;
            securityLevel = 5;
            
            // Slider deÄŸerlerini gÃ¼ncelle
            taxSlider.value = taxes;
            taxSliderValue.textContent = taxes;
            socialPolicySlider.value = socialPolicyLevel;
            socialPolicyValue.textContent = socialPolicyLevel;
            economicPolicySlider.value = economicPolicyLevel;
            economicPolicyValue.textContent = economicPolicyLevel;
            diplomaticApproachSlider.value = diplomaticApproachLevel;
            diplomaticApproachValue.textContent = diplomaticApproachLevel;
            securityLevelSlider.value = securityLevel;
            securityLevelValue.textContent = securityLevel;

            // GeÃ§ici etkileri sÄ±fÄ±rla
            weeklyBudgetChange = 0;
            weeklySatisfactionChange = 0;
            weeklyGdpChangeFactor = 1;
            weeklyInflationChange = 0;
            weeklyPopulationChangeFactor = 1;
            weeklyForeignRelationsChange = 0;
            weeklyCrimeRateChange = 0;
            weeklySecurityPerceptionChange = 0;
            weeklyMilitaryStrengthChange = 0;

            // Tarih verilerini sÄ±fÄ±rla
            historicalData.weeks = [];
            historicalData.gdp = [];
            historicalData.satisfaction = [];
            historicalData.inflation = [];

            // Kabineyi sÄ±fÄ±rla
            for (const type in cabinet) {
                cabinet[type] = { name: 'BoÅŸ', efficiency: 0.5, corruption: 0.1 };
            }
            updateCabinetDisplay();
            // Ãœlke iliÅŸkilerini sÄ±fÄ±rla
            const initialCountries = {
                'Yunanistan': { relation: 40, tradeDeal: false, summitInvited: false, summitAccepted: false },
                'Bulgaristan': { relation: 55, tradeDeal: false, summitInvited: false, summitAccepted: false },
                'GÃ¼rcistan': { relation: 60, tradeDeal: true, summitInvited: false, summitAccepted: false },
                'Ermenistan': { relation: 20, tradeDeal: false, summitInvited: false, summitAccepted: false },
                'Azerbaycan': { relation: 75, tradeDeal: true, summitInvited: false, summitAccepted: false },
                'Ä°ran': { relation: 30, tradeDeal: false, summitInvited: false, summitAccepted: false },
                'Irak': { relation: 25, tradeDeal: false, summitInvited: false, summitAccepted: false },
                'Suriye': { relation: 15, tradeDeal: false, summitInvited: false, summitAccepted: false },
                'Rusya': { relation: 45, tradeDeal: false, summitInvited: false, summitAccepted: false },
                'Ukrayna': { relation: 50, tradeDeal: false, summitInvited: false, summitAccepted: false }
            };
             for (const countryName in countries) { // countries objesinin varlÄ±ÄŸÄ±nÄ± koruyarak iÃ§ini gÃ¼ncelle
                if (initialCountries[countryName]) {
                    countries[countryName].relation = initialCountries[countryName].relation;
                    countries[countryName].tradeDeal = initialCountries[countryName].tradeDeal;
                    countries[countryName].summitInvited = false;
                    countries[countryName].summitAccepted = false;
                }
            }
            updateForeignRelationsDisplay();
            updateSummitInvitationList();


            parliamentAgenda.length = 0; // Meclis gÃ¼ndemini temizle
            updateParliamentDisplay();
            foreignEventsList.innerHTML = ''; // DÄ±ÅŸ iliÅŸkiler olaylarÄ±nÄ± temizle

            gameLogEl.innerHTML = ''; // Logu temizle
            
            enableAllActionButtons();
            showScreen('main-screen'); // Ana ekrana dÃ¶n
            addLog('Ulus SimÃ¼latÃ¶rÃ¼ BaÅŸladÄ±! Yeni bir oyun...');
            updateGameStats(); // Ä°statistikleri gÃ¼ncelle
            updateMinisterAdvice(); // Bakan tavsiyelerini gÃ¼ncelle
        }

        // Oyun Durumunu HTML'e GÃ¼ncelleyen Fonksiyon
        function updateGameStats() {
            currentWeekEl.textContent = week;
            populationEl.textContent = population.toLocaleString();
            gdpEl.textContent = gdp.toLocaleString();
            inflationEl.textContent = inflation.toFixed(1);
            satisfactionEl.textContent = satisfaction.toFixed(1);
            budgetEl.textContent = budget.toLocaleString();
            taxRateEl.textContent = taxes.toFixed(1);
            politicalSystemEl.textContent = politicalSystem;
            foreignRelationsScoreEl.textContent = foreignRelationsScore.toFixed(0);
            armySizeDisplayEl.textContent = armySize.toLocaleString(); // Ana ekrandaki ordu sayÄ±sÄ±
            armySizeSecurityEl.textContent = armySize.toLocaleString(); // GÃ¼venlik ekranÄ±ndaki ordu sayÄ±sÄ±
            militaryStrengthIndexEl.textContent = militaryStrengthIndex.toFixed(0);


            // GÃ¼venlik ekranÄ± gÃ¼ncellemeleri
            crimeRateEl.textContent = crimeRate.toFixed(1);
            securityPerceptionEl.textContent = securityPerception.toFixed(1);

            drawCanvasStats(); // Canvas'Ä± gÃ¼ncelle
            updateReports(); // RaporlarÄ± gÃ¼ncelle (iÃ§inde drawReportChart da var)
        }

        // Oyun Loguna Mesaj Ekleme Fonksiyonu
        function addLog(message, type = 'info') {
            const listItem = document.createElement('li');
            listItem.textContent = `Hafta ${week}: ${message}`;
            if (type === 'warning') listItem.style.color = 'var(--warning-color)';
            if (type === 'danger') listItem.style.color = 'var(--danger-color)';
            if (type === 'success') listItem.style.color = 'var(--success-color)';
            gameLogEl.prepend(listItem); // En yeni mesaj en Ã¼ste gelir
            
            if (gameLogEl.children.length > 50) {
                gameLogEl.removeChild(gameLogEl.lastChild);
            }
        }

        // Canvas Ãœzerinde DurumlarÄ± Ã‡izen Fonksiyon
        function drawCanvasStats() {
            if (!gameCanvas || !ctx) return;
            ctx.clearRect(0, 0, gameCanvas.width, gameCanvas.height);
            const barHeight = 20;
            const barWidth = Math.max(50, gameCanvas.width - 120); // GeniÅŸliÄŸin negatif olmamasÄ±nÄ± saÄŸla
            const startX = 100;
            let currentY = 30;
            ctx.font = '16px Arial';
            ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--text-color');

            // Memnuniyet BarÄ±
            ctx.fillText('Memnuniyet:', 10, currentY + barHeight / 2 + 5);
            const satisfactionFill = (satisfaction / 100) * barWidth;
            ctx.fillStyle = `rgb(${255 - (satisfaction * 2.55)}, ${satisfaction * 2.55}, 0)`;
            ctx.fillRect(startX, currentY, satisfactionFill, barHeight);
            ctx.strokeStyle = getComputedStyle(document.documentElement).getPropertyValue('--border-color');
            ctx.strokeRect(startX, currentY, barWidth, barHeight);
            ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--text-color');
            ctx.fillText(`${satisfaction.toFixed(1)}%`, startX + barWidth + 5, currentY + barHeight / 2 + 5);
            currentY += barHeight + 20;
            // Enflasyon BarÄ±
            ctx.fillText('Enflasyon:', 10, currentY + barHeight / 2 + 5);
            const scaledInflation = Math.min(inflation, 20) / 20;
            const inflationFill = scaledInflation * barWidth;
            ctx.fillStyle = `rgb(${scaledInflation * 255}, ${255 - (scaledInflation * 255)}, 0)`;
            ctx.fillRect(startX, currentY, inflationFill, barHeight);
            ctx.strokeStyle = getComputedStyle(document.documentElement).getPropertyValue('--border-color');
            ctx.strokeRect(startX, currentY, barWidth, barHeight);
            ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--text-color');
            ctx.fillText(`${inflation.toFixed(1)}%`, startX + barWidth + 5, currentY + barHeight / 2 + 5);
            currentY += barHeight + 20;

            // DÄ±ÅŸ Ä°liÅŸkiler BarÄ±
            ctx.fillText('DÄ±ÅŸ Ä°liÅŸkiler:', 10, currentY + barHeight / 2 + 5);
            const foreignRelationsFill = (foreignRelationsScore / 100) * barWidth;
            ctx.fillStyle = `rgb(0, ${foreignRelationsScore * 2.55}, ${255 - (foreignRelationsScore * 2.55)})`;
            ctx.fillRect(startX, currentY, foreignRelationsFill, barHeight);
            ctx.strokeStyle = getComputedStyle(document.documentElement).getPropertyValue('--border-color');
            ctx.strokeRect(startX, currentY, barWidth, barHeight);
            ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--text-color');
            ctx.fillText(`${foreignRelationsScore.toFixed(0)}%`, startX + barWidth + 5, currentY + barHeight / 2 + 5);
            currentY += barHeight + 20;
            // SuÃ§ OranÄ± BarÄ±
            ctx.fillText('SuÃ§ OranÄ±:', 10, currentY + barHeight / 2 + 5);
            const scaledCrime = Math.min(crimeRate, 20) / 20;
            const crimeFill = scaledCrime * barWidth;
            ctx.fillStyle = `rgb(${scaledCrime * 255}, ${255 - (scaledCrime * 255)}, 0)`;
            ctx.fillRect(startX, currentY, crimeFill, barHeight);
            ctx.strokeStyle = getComputedStyle(document.documentElement).getPropertyValue('--border-color');
            ctx.strokeRect(startX, currentY, barWidth, barHeight);
            ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--text-color');
            ctx.fillText(`${crimeRate.toFixed(1)}%`, startX + barWidth + 5, currentY + barHeight / 2 + 5);
        }

        // Rapor GrafiÄŸini Ã‡izme Fonksiyonu
        function drawReportChart() {
            if (!reportChartCanvas || !reportChartCtx) return;
            reportChartCtx.clearRect(0, 0, reportChartCanvas.width, reportChartCanvas.height);
            if (historicalData.weeks.length < 2) {
                reportChartCtx.font = '16px Arial';
                reportChartCtx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--text-color');
                reportChartCtx.textAlign = 'center';
                reportChartCtx.fillText('Veri henÃ¼z yetersiz. En az 2 hafta gerekli.', reportChartCanvas.width / 2, reportChartCanvas.height / 2);
                return;
            }

            const padding = 40;
            const chartWidth = reportChartCanvas.width - (padding * 2);
            const chartHeight = reportChartCanvas.height - (padding * 2);
            
            if (chartWidth <= 0 || chartHeight <= 0) return; // Ã‡izim alanÄ± yoksa Ã§izme

            reportChartCtx.beginPath();
            reportChartCtx.strokeStyle = getComputedStyle(document.documentElement).getPropertyValue('--border-color');
            reportChartCtx.moveTo(padding, padding);
            reportChartCtx.lineTo(padding, reportChartCanvas.height - padding);
            reportChartCtx.lineTo(reportChartCanvas.width - padding, reportChartCanvas.height - padding);
            reportChartCtx.stroke();
            const dataPoints = Math.min(historicalData.weeks.length, 10);
            const startIndex = Math.max(0, historicalData.weeks.length - dataPoints);
            
            reportChartCtx.font = '12px Arial';
            reportChartCtx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--text-color');
            reportChartCtx.textAlign = 'center';
            
            if (dataPoints > 1) { // En az iki nokta varsa X eksenini Ã§iz
                for (let i = 0; i < dataPoints; i++) {
                    const x = padding + (i * (chartWidth / (dataPoints - 1)));
                    reportChartCtx.fillText(historicalData.weeks[startIndex + i].toString(), x, reportChartCanvas.height - padding + 20);
                }
            } else if (dataPoints === 1) { // Tek nokta varsa ortada gÃ¶ster
                 const x = padding + chartWidth / 2;
                 reportChartCtx.fillText(historicalData.weeks[startIndex].toString(), x, reportChartCanvas.height - padding + 20);
            }


            // Memnuniyet Ã§izgisi
            if (dataPoints > 0) {
                reportChartCtx.beginPath();
                reportChartCtx.strokeStyle = 'rgb(46, 204, 113)'; // YeÅŸil
                reportChartCtx.lineWidth = 2;
                for (let i = 0; i < dataPoints; i++) {
                    const x = padding + (dataPoints > 1 ? (i * (chartWidth / (dataPoints - 1))) : chartWidth / 2);
                    const y = reportChartCanvas.height - padding - ((historicalData.satisfaction[startIndex + i] / 100) * chartHeight);
                    if (i === 0) reportChartCtx.moveTo(x, y);
                    else reportChartCtx.lineTo(x, y);
                }
                reportChartCtx.stroke();
            }

            // Enflasyon Ã§izgisi
             if (dataPoints > 0) {
                reportChartCtx.beginPath();
                reportChartCtx.strokeStyle = 'rgb(231, 76, 60)'; // KÄ±rmÄ±zÄ±
                reportChartCtx.lineWidth = 2;
                for (let i = 0; i < dataPoints; i++) {
                    const inflationValue = Math.min(historicalData.inflation[startIndex + i], 20); // 20% max gÃ¶sterim
                    const x = padding + (dataPoints > 1 ? (i * (chartWidth / (dataPoints - 1))) : chartWidth / 2);
                    const y = reportChartCanvas.height - padding - ((inflationValue / 20) * chartHeight);
                    if (i === 0) reportChartCtx.moveTo(x, y);
                    else reportChartCtx.lineTo(x, y);
                }
                reportChartCtx.stroke();
            }

            // GSYÄ°H Ã§izgisi (normalize edilmiÅŸ)
            if (dataPoints > 0) {
                reportChartCtx.beginPath();
                reportChartCtx.strokeStyle = 'rgb(52, 152, 219)'; // Mavi
                reportChartCtx.lineWidth = 2;
                const gdpSlice = historicalData.gdp.slice(startIndex, startIndex + dataPoints);
                const minGdp = Math.min(...gdpSlice);
                const maxGdp = Math.max(...gdpSlice);
                const gdpRange = maxGdp - minGdp;

                for (let i = 0; i < dataPoints; i++) {
                    const x = padding + (dataPoints > 1 ? (i * (chartWidth / (dataPoints - 1))) : chartWidth / 2);
                    const normalizedGdp = gdpRange === 0 ? 0.5 : (historicalData.gdp[startIndex + i] - minGdp) / gdpRange;
                    const y = reportChartCanvas.height - padding - (normalizedGdp * chartHeight);
                    if (i === 0) reportChartCtx.moveTo(x, y);
                    else reportChartCtx.lineTo(x, y);
                }
                reportChartCtx.stroke();
            }
            // Lejant
            reportChartCtx.font = '14px Arial';
            reportChartCtx.textAlign = 'left'; // Lejant iÃ§in sola hizala
            reportChartCtx.fillStyle = 'rgb(46, 204, 113)';
            reportChartCtx.fillText('Memnuniyet', padding + 10, padding - 10);
            
            reportChartCtx.fillStyle = 'rgb(231, 76, 60)';
            reportChartCtx.fillText('Enflasyon', padding + 120, padding - 10);
            
            reportChartCtx.fillStyle = 'rgb(52, 152, 219)';
            reportChartCtx.fillText('GSYÄ°H', padding + 230, padding - 10);
        }

        // Bakan tavsiyelerini gÃ¼ncelleme
        function updateMinisterAdvice() {
            // Ekonomi BakanÄ± Tavsiyesi
            let economyAdvice = "";
            if (cabinet.economy.name === 'BoÅŸ') {
                economyAdvice = "Ekonomi BakanÄ± atanmadan rapor alÄ±namaz.";
            } else {
                if (inflation > 10) {
                    economyAdvice = "Enflasyon Ã§ok yÃ¼ksek! Vergi oranlarÄ±nÄ± artÄ±rmanÄ±zÄ± ve harcamalarÄ± kÄ±smanÄ±zÄ± Ã¶neriyorum.";
                } else if (inflation > 5) {
                    economyAdvice = "Enflasyon yÃ¼kseliyor. BÃ¼tÃ§e aÃ§Ä±ÄŸÄ±nÄ± azaltmak ve ekonomik bÃ¼yÃ¼meyi desteklemek iÃ§in dengeli bir yaklaÅŸÄ±m gerekiyor.";
                } else if (gdp < 800000000) {
                    economyAdvice = "Ekonomik bÃ¼yÃ¼me zayÄ±f. YatÄ±rÄ±mlarÄ± artÄ±rmanÄ±zÄ± ve vergi indirimleri yapmanÄ±zÄ± Ã¶neririm.";
                } else {
                    economyAdvice = "Ekonomi dengeli gÃ¶rÃ¼nÃ¼yor. Mevcut politikalarÄ± sÃ¼rdÃ¼rebiliriz.";
                }
            }
            economyAdviceText.textContent = economyAdvice;
            // EÄŸitim BakanÄ± Tavsiyesi
            let educationAdvice = "";
            if (cabinet.education.name === 'BoÅŸ') {
                educationAdvice = "EÄŸitim BakanÄ± atanmadan rapor alÄ±namaz.";
            } else {
                if (educationSpending < 1000000) { // Harcama miktarÄ±na gÃ¶re
                    educationAdvice = "EÄŸitim yatÄ±rÄ±mlarÄ± Ã§ok dÃ¼ÅŸÃ¼k! EÄŸitime daha fazla kaynak ayÄ±rmanÄ±zÄ± tavsiye ediyorum.";
                } else if (educationSpending < 5000000) {
                    educationAdvice = "EÄŸitim yatÄ±rÄ±mlarÄ± yeterli deÄŸil. Uzun vadeli kalkÄ±nma iÃ§in eÄŸitim bÃ¼tÃ§esini artÄ±rmalÄ±yÄ±z.";
                } else {
                    educationAdvice = "EÄŸitim yatÄ±rÄ±mlarÄ± iyi dÃ¼zeyde. Bu seviyeyi korursak uzun vadede olumlu sonuÃ§lar gÃ¶receÄŸiz.";
                }
            }
            educationAdviceText.textContent = educationAdvice;
            // SaÄŸlÄ±k BakanÄ± Tavsiyesi
            let healthAdvice = "";
            if (cabinet.health.name === 'BoÅŸ') {
                healthAdvice = "SaÄŸlÄ±k BakanÄ± atanmadan rapor alÄ±namaz.";
            } else {
                 if (healthSpending < 1000000) { // Harcama miktarÄ±na gÃ¶re
                    healthAdvice = "SaÄŸlÄ±k yatÄ±rÄ±mlarÄ± kritik seviyenin altÄ±nda! Acilen saÄŸlÄ±k bÃ¼tÃ§esini artÄ±rmalÄ±yÄ±z.";
                } else if (healthSpending < 7000000) {
                    healthAdvice = "SaÄŸlÄ±k sistemi iÃ§in daha fazla yatÄ±rÄ±m gerekiyor. Ã–zellikle halk saÄŸlÄ±ÄŸÄ± Ã¶ncelikli olmalÄ±.";
                } else {
                    healthAdvice = "SaÄŸlÄ±k yatÄ±rÄ±mlarÄ± iyi seviyede. Halk memnuniyeti artacaktÄ±r.";
                }
            }
            healthAdviceText.textContent = healthAdvice;
            // DÄ±ÅŸiÅŸleri BakanÄ± Tavsiyesi
            let foreignAdvice = "";
            if (cabinet.foreign.name === 'BoÅŸ') {
                foreignAdvice = "DÄ±ÅŸiÅŸleri BakanÄ± atanmadan rapor alÄ±namaz.";
            } else {
                if (foreignRelationsScore < 30) {
                    foreignAdvice = "UluslararasÄ± iliÅŸkiler kritik seviyede! Diplomatik giriÅŸimlere Ã¶ncelik vermeliyiz.";
                } else if (foreignRelationsScore < 60) {
                    foreignAdvice = "DÄ±ÅŸ iliÅŸkilerimizi geliÅŸtirmek iÃ§in daha fazla uluslararasÄ± iÅŸbirliÄŸi Ã¶neriyorum.";
                } else {
                    foreignAdvice = "DÄ±ÅŸ iliÅŸkilerimiz iyi durumda. Mevcut anlaÅŸmalarÄ± gÃ¼Ã§lendirerek devam edebiliriz.";
                }
            }
            foreignAdviceText.textContent = foreignAdvice;
            // Ä°Ã§iÅŸleri BakanÄ± Tavsiyesi
            let interiorAdvice = "";
            if (cabinet.interior.name === 'BoÅŸ') {
                interiorAdvice = "Ä°Ã§iÅŸleri BakanÄ± atanmadan rapor alÄ±namaz.";
            } else {
                if (crimeRate > 10) {
                    interiorAdvice = "SuÃ§ oranlarÄ± tehlikeli seviyelerde! GÃ¼venlik Ã¶nlemlerini artÄ±rmamÄ±z gerekiyor.";
                } else if (securityPerception < 50) {
                    interiorAdvice = "HalkÄ±n gÃ¼venlik algÄ±sÄ± dÃ¼ÅŸÃ¼k. Emniyet hizmetlerine yatÄ±rÄ±m yapmalÄ±yÄ±z.";
                } else {
                    interiorAdvice = "Ä°Ã§ gÃ¼venlik durumu kontrol altÄ±nda. Ã–nleyici tedbirlere devam etmeliyiz.";
                }
            }
            interiorAdviceText.textContent = interiorAdvice;
            // Adalet BakanÄ± Tavsiyesi
            let justiceAdvice = "";
            if (cabinet.justice.name === 'BoÅŸ') {
                justiceAdvice = "Adalet BakanÄ± atanmadan rapor alÄ±namaz.";
            } else {
                if (satisfaction < 40 && crimeRate > 7) {
                    justiceAdvice = "Halk memnuniyeti dÃ¼ÅŸÃ¼k ve suÃ§ oranlarÄ± yÃ¼ksek. Adalet sisteminde acil reformlar yapÄ±lmalÄ±.";
                } else if (crimeRate > 7) {
                    justiceAdvice = "SuÃ§ oranlarÄ±nÄ± dÃ¼ÅŸÃ¼rmek iÃ§in adalet sisteminde iyileÅŸtirmeler yapmamÄ±z gerekiyor.";
                } else {
                    justiceAdvice = "Adalet sistemi iyi Ã§alÄ±ÅŸÄ±yor. Mevcut dÃ¼zeni korumaya devam edebiliriz.";
                }
            }
            justiceAdviceText.textContent = justiceAdvice;
            // Savunma BakanÄ± Tavsiyesi
            let defenseAdv = "";
            if (cabinet.defense.name === 'BoÅŸ') {
                defenseAdv = "Savunma BakanÄ± atanmadan rapor alÄ±namaz.";
            } else {
                if (militaryStrengthIndex < 40) {
                    defenseAdv = "Askeri gÃ¼cÃ¼mÃ¼z yetersiz. Orduya yatÄ±rÄ±m yapmalÄ± ve modernizasyonu hÄ±zlandÄ±rmalÄ±yÄ±z.";
                } else if (armySize < population * 0.003) { // NÃ¼fusun %0.3'Ã¼nden azsa
                    defenseAdv = "Ordu mevcudumuz dÃ¼ÅŸÃ¼k. Asker alÄ±mÄ±nÄ± artÄ±rmayÄ± dÃ¼ÅŸÃ¼nmeliyiz.";
                } else {
                    defenseAdv = "Savunma kapasitemiz yeterli dÃ¼zeyde. Mevcut durumu koruyalÄ±m.";
                }
            }
            defenseAdviceText.textContent = defenseAdv;
        }

        // BakanlarÄ±n ayrÄ±ntÄ±lÄ± raporlarÄ±nÄ± gÃ¼ncelleme
        function updateMinisterReports() {
            // Ekonomi BakanlÄ±ÄŸÄ± Raporu
            let inflationAnalysis = "";
            if (cabinet.economy.name === 'BoÅŸ') {
                inflationAnalysis = "Ekonomi BakanÄ± atanmadan detaylÄ± analiz yapÄ±lamaz.";
            } else {
                if (inflation > 15) {
                    inflationAnalysis = "KRÄ°TÄ°K DURUM! Enflasyon kontrolden Ã§Ä±kmak Ã¼zere. Acil Ã¶nlemler: Vergileri artÄ±rÄ±n, kamu harcamalarÄ±nÄ± kÄ±sÄ±n ve para politikasÄ±nÄ± sÄ±kÄ±laÅŸtÄ±rÄ±n.";
                } else if (inflation > 10) {
                    inflationAnalysis = "YÃœKSEK ENFLASYON. Fiyat istikrarÄ±nÄ± saÄŸlamak iÃ§in vergi artÄ±ÅŸÄ± ve ekonomik politikalarÄ±n gÃ¶zden geÃ§irilmesi gerekiyor.";
                } else if (inflation > 5) {
                    inflationAnalysis = "Enflasyon kontrol edilebilir seviyede ancak dikkatli olunmalÄ±. Dengeli politikalar sÃ¼rdÃ¼rÃ¼lmeli.";
                } else if (inflation < 1) {
                    inflationAnalysis = "Enflasyon Ã§ok dÃ¼ÅŸÃ¼k, deflasyon riski mevcut. Ekonomiyi canlandÄ±rmak iÃ§in harcamalarÄ± artÄ±rabilirsiniz.";
                } else {
                    inflationAnalysis = "Enflasyon ideal aralÄ±kta. Mevcut ekonomik politikalar sÃ¼rdÃ¼rÃ¼lebilir.";
                }
            }
            inflationAnalysisEl.textContent = inflationAnalysis;
            // GSYÄ°H Durumu
            let gdpAnalysis = "";
            if (cabinet.economy.name === 'BoÅŸ') {
                gdpAnalysis = "Ekonomi BakanÄ± atanmadan detaylÄ± analiz yapÄ±lamaz.";
            } else {
                if (gdp < 700000000) {
                    gdpAnalysis = "Ekonomi ciddi durgunluk iÃ§inde! Acil ekonomik canlandÄ±rma paketi gerekiyor.";
                } else if (gdp < 900000000) {
                    gdpAnalysis = "GSYÄ°H beklenen seviyenin altÄ±nda. Ekonomik bÃ¼yÃ¼meyi teÅŸvik edecek yatÄ±rÄ±mlar yapÄ±lmalÄ±.";
                } else if (gdp > 1300000000) {
                    gdpAnalysis = "Ekonomi Ã§ok iyi performans gÃ¶steriyor. SÃ¼rdÃ¼rÃ¼lebilirliÄŸe odaklanmalÄ±yÄ±z.";
                } else {
                    gdpAnalysis = "GSYÄ°H normal seviyelerde. Dengeli bÃ¼yÃ¼me devam ediyor.";
                }
            }
            gdpAnalysisEl.textContent = gdpAnalysis;
            // Ekonomi Ã–nerileri
            let economyRecommendations = "";
            if (cabinet.economy.name === 'BoÅŸ') {
                economyRecommendations = "Ekonomi BakanÄ± atanmadan Ã¶neri alÄ±namaz.";
            } else {
                if (inflation > 10 && taxes < 12) {
                    economyRecommendations = "Vergileri artÄ±rÄ±n, kamu harcamalarÄ±nÄ± azaltÄ±n. Enflasyonla mÃ¼cadele ekonomik Ã¶nceliÄŸimiz olmalÄ±.";
                } else if (inflation < 2 && gdp < 950000000) {
                    economyRecommendations = "Vergileri dÃ¼ÅŸÃ¼rÃ¼p ekonomik teÅŸvikleri artÄ±rÄ±n. Ekonomiyi canlandÄ±rmak iÃ§in geniÅŸlemeci politikalar uygulanmalÄ±.";
                } else if (budget < 10000000) {
                    economyRecommendations = "BÃ¼tÃ§e aÃ§Ä±ÄŸÄ± kritik seviyede. Mali disiplini saÄŸlamak iÃ§in gelir artÄ±rÄ±cÄ± Ã¶nlemler alÄ±nmalÄ±.";
                } else {
                    economyRecommendations = "Mevcut ekonomik denge korunabilir. Ä°htiyatlÄ± mali politikalarÄ± sÃ¼rdÃ¼rmenizi Ã¶neririm.";
                }
            }
            economyRecommendationsEl.textContent = economyRecommendations;
            // Sosyal Politika Ã–nerileri
            let socialRecommendationsText = ""; // DeÄŸiÅŸken adÄ±nÄ± deÄŸiÅŸtirdim
            if (cabinet.education.name === 'BoÅŸ' && cabinet.health.name === 'BoÅŸ') {
                socialRecommendationsText = "EÄŸitim ve SaÄŸlÄ±k BakanlarÄ± atanmadan Ã¶neri alÄ±namaz.";
            } else {
                if (educationSpending < 2000000 && healthSpending < 3000000) {
                    socialRecommendationsText = "EÄŸitim ve saÄŸlÄ±k sistemleri iÃ§in acil kaynak artÄ±rÄ±mÄ± yapÄ±lmalÄ±. Sosyal memnuniyet kritik seviyede dÃ¼ÅŸebilir.";
                } else if (satisfaction < 40) {
                    socialRecommendationsText = "Halk memnuniyeti Ã§ok dÃ¼ÅŸÃ¼k. Sosyal politikalarÄ± gÃ¼Ã§lendirin ve kÃ¼ltÃ¼rel etkinlikleri artÄ±rÄ±n.";
                } else if (nationalHolidays < 2 && budget > 50000000) {
                    socialRecommendationsText = "Ulusal bayramlar ve kÃ¼ltÃ¼rel etkinlikler iÃ§in daha fazla yatÄ±rÄ±m yapÄ±labilir. Bu, halk memnuniyetini artÄ±racaktÄ±r.";
                } else {
                    socialRecommendationsText = "Sosyal politikalar dengeli. Ä°htiyaÃ§ duyulan alanlara gÃ¶re kaynak daÄŸÄ±lÄ±mÄ± yapÄ±labilir.";
                }
            }
            socialRecommendationsEl.textContent = socialRecommendationsText;
            // Siyasi Ã–neriler
            let politicalRecommendationsText = ""; // DeÄŸiÅŸken adÄ±nÄ± deÄŸiÅŸtirdim
            if (cabinet.interior.name === 'BoÅŸ' && cabinet.justice.name === 'BoÅŸ') {
                politicalRecommendationsText = "Ä°Ã§iÅŸleri ve Adalet BakanlarÄ± atanmadan Ã¶neri alÄ±namaz.";
            } else {
                if (politicalSystem === 'DiktatÃ¶rlÃ¼k' && satisfaction < 30) {
                    politicalRecommendationsText = "DiktatÃ¶rlÃ¼k rejimi halk tarafÄ±ndan desteklenmiyor. Ä°syan riski yÃ¼ksek!";
                } else if (parliamentSupport < 30 && politicalSystem === 'Demokrasi') {
                    politicalRecommendationsText = "Meclis desteÄŸi Ã§ok dÃ¼ÅŸÃ¼k. Siyasi kriz riski var. UzlaÅŸmacÄ± politikalar geliÅŸtirin.";
                } else if (crimeRate > 10) {
                    politicalRecommendationsText = "SuÃ§ oranlarÄ± yÃ¼ksek. GÃ¼venlik ve adalet sistemlerine yatÄ±rÄ±m yapÄ±lmalÄ±.";
                } else {
                    politicalRecommendationsText = "Siyasi durum dengeli. Mevcut politikalarÄ± sÃ¼rdÃ¼rebilirsiniz.";
                }
            }
            politicalRecommendationsEl.textContent = politicalRecommendationsText;

            // Askeri Durum Raporu
            if (cabinet.defense.name === 'BoÅŸ') {
                armyReadinessReportEl.textContent = "Savunma BakanÄ± atanmadÄ±.";
                militaryAssessmentReportEl.textContent = "DeÄŸerlendirme yapÄ±lamÄ±yor.";
            } else {
                if (militaryStrengthIndex > 70) armyReadinessReportEl.textContent = "YÃ¼ksek";
                else if (militaryStrengthIndex > 40) armyReadinessReportEl.textContent = "Orta";
                else armyReadinessReportEl.textContent = "DÃ¼ÅŸÃ¼k";

                let assessment = "Genelkurmay, mevcut askeri durumu stabil olarak deÄŸerlendiriyor. ";
                if (militaryStrengthIndex < 30) assessment += "Ancak, acil modernizasyon ve teÃ§hizat ihtiyacÄ± var. ";
                if (armySize < population * 0.002) assessment += "Personel sayÄ±sÄ± kritik seviyede, takviye gerekebilir. ";
                // KomÅŸularla iliÅŸkilere gÃ¶re tehdit deÄŸerlendirmesi eklenebilir.
                let potentialThreat = false;
                for (const countryName in countries) {
                    if (countries[countryName].relation < 25) potentialThreat = true;
                }
                if (potentialThreat) assessment += "BazÄ± komÅŸu Ã¼lkelerle iliÅŸkilerin gergin olmasÄ± nedeniyle savunma tedbirleri artÄ±rÄ±lmalÄ±. ";
                militaryAssessmentReportEl.textContent = assessment;
            }
        }

        // TÃ¼m aksiyon butonlarÄ±nÄ± aktif/pasif hale getirme
        function enableAllActionButtons(enable = true) {
            const allButtons = document.querySelectorAll('button:not(.tab-btn):not(#restart-game-btn):not(#theme-toggle)');
            allButtons.forEach(button => button.disabled = !enable);
            
            if (politicalSystem === 'Demokrasi') {
                declareDictatorshipBtn.disabled = !enable;
                callElectionsBtn.disabled = !enable;
                dissolveParliamentBtn.disabled = !enable; 
                crackdownDissentBtn.disabled = true; 
                meetOppositionClosedBtn.disabled = !enable;
                meetOppositionOpenBtn.disabled = !enable;
            } else { // DiktatÃ¶rlÃ¼k
                declareDictatorshipBtn.disabled = true; 
                callElectionsBtn.disabled = true;
                dissolveParliamentBtn.disabled = true; // Zaten feshedilmiÅŸ gibi dÃ¼ÅŸÃ¼nÃ¼lebilir veya aktif kalabilir. Åimdilik true.
                crackdownDissentBtn.disabled = !enable;
                meetOppositionClosedBtn.disabled = true; // DiktatÃ¶rlÃ¼kte muhalefetle gÃ¶rÃ¼ÅŸme olmaz
                meetOppositionOpenBtn.disabled = true;
            }
             sendSummitInvitationsBtn.disabled = !summitPlanned || summitInvitationsSent || getSelectedSummitInvitees().length === 0;

        }

        // Oyun Sonu Fonksiyonu
        function gameOver(reason) {
            addLog(`Oyun Bitti! ${reason}`, 'danger');
            enableAllActionButtons(false); // TÃ¼m butonlarÄ± devre dÄ±ÅŸÄ± bÄ±rak
            endWeekBtn.disabled = true;
            gameOverReasonEl.textContent = reason;
            finalWeekEl.textContent = week;
            finalPopulationEl.textContent = population.toLocaleString();
            finalGdpEl.textContent = gdp.toLocaleString();
            showScreen('game-over-screen');
        }

        // --- Oyun DÃ¶ngÃ¼sÃ¼ ve Mekanikleri ---

        // HaftayÄ± Bitir Fonksiyonu
        function endWeek() {
            week++;
            // Tarih verilerini kaydet
            historicalData.weeks.push(week);
            historicalData.gdp.push(gdp);
            historicalData.satisfaction.push(satisfaction);
            historicalData.inflation.push(inflation);
            // --- HaftalÄ±k GSYÄ°H DeÄŸiÅŸimi ---
            gdp *= (1 + (Math.random() - 0.5) * 0.003 * cabinet.economy.efficiency);
            if (inflation > 5) gdp *= 0.999;
            if (satisfaction > 80) gdp *= 1.0005;
            gdp *= weeklyGdpChangeFactor; // KararlarÄ±n etkisi
            
            // Ekonomik politika etkisi
            gdp *= (1 + (economicPolicyLevel - 5) * 0.001);
            weeklyGdpChangeFactor = 1; // SÄ±fÄ±rla

            // --- HaftalÄ±k BÃ¼tÃ§e HesabÄ± ---
            const taxRevenue = (population * gdp * (taxes / 520000)); 
            budget += taxRevenue;
            // Harcamalar
            const ministrySpending = (educationSpending * cabinet.education.efficiency) + 
                                   (healthSpending * cabinet.health.efficiency) + 
                                   (cultureSpending * cabinet.economy.efficiency); // KÃ¼ltÃ¼r iÃ§in ekonomi bakanÄ± verimliliÄŸi? Belki kendi bakanÄ± olmalÄ±. Åimdilik bÃ¶yle.
            budget -= ministrySpending;
            // Sosyal politika harcamalarÄ±
            budget -= (socialPolicyLevel * 500000); // Sosyal politika seviyesine gÃ¶re harcama
            // Ordu bakÄ±m maliyeti
            const armyMaintenance = armySize * armyUpkeepCostPerSoldier * (1 + (militaryStrengthIndex - 50) / 200); // Daha gÃ¼Ã§lÃ¼ ordu daha pahalÄ±
            budget -= armyMaintenance;

            weeklyBudgetChange = taxRevenue - ministrySpending - (socialPolicyLevel * 500000) - armyMaintenance; // GeÃ§ici bÃ¼tÃ§e deÄŸiÅŸimini gÃ¼ncelle


            // --- HaftalÄ±k Enflasyon DeÄŸiÅŸimi ---
            inflation += (weeklyBudgetChange / gdp * 100) * 0.0005; // BÃ¼tÃ§e deÄŸiÅŸimine gÃ¶re enflasyon (Ã§ok kÃ¼Ã§Ã¼k etki)
            inflation += (Math.random() - 0.5) * 0.05; // KÃ¼Ã§Ã¼k rastgele deÄŸiÅŸim
            inflation += weeklyInflationChange; // KararlarÄ±n etkisi
            
            if (economicPolicyLevel > 5) {
                inflation += (economicPolicyLevel - 5) * 0.1; // GeniÅŸlemeci politikalar enflasyonu artÄ±rÄ±r
            } else if (economicPolicyLevel < 5) {
                inflation -= (5 - economicPolicyLevel) * 0.05; // DaraltÄ±cÄ± politikalar enflasyonu dÃ¼ÅŸÃ¼rÃ¼r
            }
            
            inflation = Math.max(0.1, Math.min(30, inflation));
            weeklyInflationChange = 0; // SÄ±fÄ±rla

            // --- HaftalÄ±k NÃ¼fus DeÄŸiÅŸimi ---
            population *= (1 + (satisfaction / 100000) - (inflation / 50000) + (healthSpending / gdp * 0.0001)); // SaÄŸlÄ±k harcamasÄ± pozitif etki
            population *= weeklyPopulationChangeFactor; // KararlarÄ±n etkisi
            population = Math.round(population);
            weeklyPopulationChangeFactor = 1; // SÄ±fÄ±rla

            // --- HaftalÄ±k Halk Memnuniyeti DeÄŸiÅŸimi ---
            satisfaction += weeklySatisfactionChange;
            satisfaction -= (taxes / 70); 
            satisfaction += (educationSpending / 500000 * cabinet.education.efficiency) + 
                            (healthSpending / 500000 * cabinet.health.efficiency) + 
                            (cultureSpending / 300000); // KÃ¼ltÃ¼r etkisi
            satisfaction += (socialPolicyLevel - 5) * 0.5; // Sosyal politika seviyesi etkisi
            if (inflation > 5) satisfaction -= (inflation - 5) * 0.2;
            satisfaction -= crimeRate * 0.5;
            if (securityLevel > 7) { // YÃ¼ksek iÃ§ gÃ¼venlik Ã¶zgÃ¼rlÃ¼kleri kÄ±sÄ±tlayabilir
                satisfaction -= (securityLevel - 7) * 0.3;
            }
            if (politicalSystem === 'DiktatÃ¶rlÃ¼k') satisfaction -= 0.5; // DiktatÃ¶rlÃ¼k sÃ¼rekli hafif baskÄ± yapar

            satisfaction = Math.max(0, Math.min(100, satisfaction));
            weeklySatisfactionChange = 0; // SÄ±fÄ±rla

            // --- GÃ¼venlik DeÄŸiÅŸimi ---
            crimeRate += weeklyCrimeRateChange;
            crimeRate -= (securityLevel - 5) * 0.1; // Ä°Ã§ polisaj seviyesi etkisi
            crimeRate -= (militaryStrengthIndex / 1000); // Ordunun caydÄ±rÄ±cÄ±lÄ±ÄŸÄ± (Ã§ok kÃ¼Ã§Ã¼k etki)
            crimeRate = Math.max(0.1, Math.min(20, crimeRate)); 
            weeklyCrimeRateChange = 0;
            
            securityPerception += weeklySecurityPerceptionChange;
            securityPerception += (securityLevel - 5) * 0.5;
            securityPerception += (militaryStrengthIndex / 500); // Ordu gÃ¼cÃ¼ algÄ±yÄ± artÄ±rÄ±r
            securityPerception = Math.max(0, Math.min(100, securityPerception));
            weeklySecurityPerceptionChange = 0;

            // Askeri GÃ¼Ã§ DeÄŸiÅŸimi
            militaryStrengthIndex += weeklyMilitaryStrengthChange;
            militaryStrengthIndex = Math.max(10, Math.min(100, militaryStrengthIndex)); // SÄ±nÄ±rlar iÃ§inde tut
            weeklyMilitaryStrengthChange = 0;


            // --- DÄ±ÅŸ Ä°liÅŸkiler DeÄŸiÅŸimi ---
            foreignRelationsScore += weeklyForeignRelationsChange;
            foreignRelationsScore += (diplomaticApproachLevel - 5) * 0.3; // Diplomatik yaklaÅŸÄ±m etkisi
             if (diplomaticApproachLevel < 3 && Math.random() < 0.05) { // Daha dÃ¼ÅŸÃ¼k ihtimal
                addLog("Agresif dÄ±ÅŸ politika nedeniyle komÅŸu bir Ã¼lke ile diplomatik kriz yaÅŸanÄ±yor!", 'danger');
                foreignRelationsScore -= 5;
                // Rastgele bir komÅŸuyla iliÅŸki dÃ¼ÅŸÃ¼r
                const neighborKeys = Object.keys(countries);
                const randomNeighbor = neighborKeys[Math.floor(Math.random() * neighborKeys.length)];
                countries[randomNeighbor].relation = Math.max(0, countries[randomNeighbor].relation - 10);
            }
            
            foreignRelationsScore = Math.max(0, Math.min(100, foreignRelationsScore));
            weeklyForeignRelationsChange = 0;

            // --- Rastgele Olaylar (her hafta %15 ihtimalle) ---
            if (Math.random() < 0.15) { // Ä°htimali artÄ±rdÄ±m
                triggerRandomEvent();
            }
             // Muhalefetten toplantÄ± talebi (rastgele)
            if (politicalSystem === 'Demokrasi' && Math.random() < 0.05) { // Her hafta %5 ihtimal
                const meetingType = Math.random() < 0.5 ? 'kapalÄ±' : 'aÃ§Ä±k';
                addLog(`Muhalefet liderleri sizinle ${meetingType} bir gÃ¶rÃ¼ÅŸme talep ediyor. (Meclis & Siyaset ekranÄ±ndan yanÄ±tlayÄ±n)`, 'warning');
                // Oyuncunun bu talebe yanÄ±t vermesi iÃ§in bir mekanizma eklenebilir. Åimdilik sadece log.
                // Veya direkt bir event gibi:
                const acceptMeeting = confirm(`Muhalefet ${meetingType} gÃ¶rÃ¼ÅŸme talep ediyor. Kabul ediyor musunuz?`);
                if (acceptMeeting) {
                    if (meetingType === 'kapalÄ±') {
                        handleOppositionMeeting(true, true); // isPlayerInitiated = false, isClosed = true
                    } else {
                        handleOppositionMeeting(false, false); // isPlayerInitiated = false, isClosed = false
                    }
                } else {
                    addLog("Muhalefetin gÃ¶rÃ¼ÅŸme talebini reddettiniz. Bu durum siyasi tansiyonu artÄ±rabilir.", "warning");
                    parliamentSupport = Math.max(0, parliamentSupport - 3);
                    weeklySatisfactionChange -=2;
                }
            }


            // --- SeÃ§im MekanizmasÄ± (DiktatÃ¶rlÃ¼k deÄŸilse her 52 haftada bir kontrol) ---
            if (politicalSystem === 'Demokrasi' && week % 52 === 0 && week > 1) {
                addLog('SeÃ§im zamanÄ± yaklaÅŸÄ±yor! HalkÄ±n nabzÄ±nÄ± tutun.');
                if (satisfaction < 50) {
                    addLog('Halk memnuniyeti dÃ¼ÅŸÃ¼k. Bir sonraki seÃ§imde zorlanabilirsiniz.', 'warning');
                }
                setTimeout(() => conductElections(), 1000 * (Math.random() * 2 + 1) ); // 1-3 saniye sonra seÃ§im yap
            }
            
            // Zirve sonuÃ§larÄ± (eÄŸer davetler gÃ¶nderildiyse)
            if (summitPlanned && summitInvitationsSent) {
                let successfulSummit = false;
                let participatingCount = 0;
                let relationBoost = 0;
                for (const countryName in countries) {
                    if (countries[countryName].summitInvited && countries[countryName].summitAccepted) {
                        participatingCount++;
                        countries[countryName].relation = Math.min(100, countries[countryName].relation + 5); // KatÄ±lanlarla iliÅŸki artar
                        relationBoost += 1;
                    }
                }
                if (participatingCount >= 2) { // En az 2 katÄ±lÄ±mcÄ± varsa baÅŸarÄ±lÄ± sayalÄ±m
                    successfulSummit = true;
                    addLog(`DÃ¼zenlediÄŸiniz zirve ${participatingCount} Ã¼lkenin katÄ±lÄ±mÄ±yla baÅŸarÄ±lÄ± oldu! DÄ±ÅŸ itibarÄ±nÄ±z arttÄ±.`, "success");
                    foreignRelationsScore = Math.min(100, foreignRelationsScore + 5 + relationBoost);
                    weeklySatisfactionChange += 3;
                } else if (participatingCount > 0) {
                    addLog(`DÃ¼zenlediÄŸiniz zirveye ${participatingCount} Ã¼lke katÄ±ldÄ±. SÄ±nÄ±rlÄ± bir baÅŸarÄ± elde edildi.`, "info");
                    foreignRelationsScore = Math.min(100, foreignRelationsScore + 2 + relationBoost);
                    weeklySatisfactionChange += 1;
                } else {
                    addLog("DÃ¼zenlediÄŸiniz zirveye yeterli katÄ±lÄ±m olmadÄ±.", "warning");
                    foreignRelationsScore = Math.max(0, foreignRelationsScore - 3);
                }
                summitPlanned = false; // Zirve bitti
                summitInvitationsSent = false;
                for (const countryName in countries) { // Davet durumlarÄ±nÄ± sÄ±fÄ±rla
                    countries[countryName].summitInvited = false;
                    countries[countryName].summitAccepted = false;
                }
                updateSummitInvitationList();
                sendSummitInvitationsBtn.disabled = true;
                createSummitBtn.disabled = false;
            }


            // --- Oyun Sonu KoÅŸullarÄ± ---
            if (satisfaction < 10 && week > 10) { // Daha dÃ¼ÅŸÃ¼k eÅŸik ve biraz sÃ¼re
                addLog('Halk memnuniyeti Ã§ok dÃ¼ÅŸÃ¼k! BÃ¼yÃ¼k Ã§aplÄ± isyanlar patlak verdi!', 'danger');
                gameOver('HalkÄ±n isyanÄ± sonucu hÃ¼kÃ¼metiniz devrildi!');
                return;
            }
            if (budget < -1000000000 && week > 20) { // Daha bÃ¼yÃ¼k borÃ§ sÄ±nÄ±rÄ±
                addLog('Ãœlke iflas etti! Ekonomik Ã§Ã¶kÃ¼ÅŸ yaÅŸandÄ±.', 'danger');
                gameOver('Ãœlke iflas etti ve yÃ¶netilemez hale geldi!');
                return;
            }
            if (population < 500000 && week > 20) { 
                addLog('NÃ¼fus dramatik ÅŸekilde azaldÄ±. Ãœlke yaÅŸanmaz hale geldi.', 'danger');
                gameOver('NÃ¼fus azaldÄ± ve Ã¼lkeniz Ã§Ã¶kÃ¼ÅŸe geÃ§ti!');
                return;
            }
            if (foreignRelationsScore < 5 && week > 30) { // Uzun sÃ¼re dÃ¼ÅŸÃ¼k dÄ±ÅŸ iliÅŸkiler
                 // SavaÅŸ riski eklenebilir.
                let atWar = false;
                for(const countryName in countries) {
                    if (countries[countryName].relation < 10 && Math.random() < 0.1) { // DÃ¼ÅŸÃ¼k iliÅŸkili bir komÅŸu savaÅŸ aÃ§abilir
                        addLog(`${countryName} Ã¼lkesi size savaÅŸ ilan etti! HazÄ±rlÄ±ksÄ±z yakalandÄ±nÄ±z!`, 'danger');
                        simulateWar(countryName, false); // isPlayerInitiated = false
                        atWar = true;
                        break;
                    }
                }
                if(!atWar && politicalSystem === 'Demokrasi'){
                     addLog('UluslararasÄ± izolasyon nedeniyle hÃ¼kÃ¼metiniz dÃ¼ÅŸtÃ¼!', 'danger');
                     gameOver('UluslararasÄ± izolasyon ve baskÄ±lar sonucu iktidarÄ± kaybettiniz!');
                     return;
                } else if (!atWar && politicalSystem === 'DiktatÃ¶rlÃ¼k') {
                    addLog('UluslararasÄ± izolasyon rejimini zayÄ±flatÄ±yor.', 'warning');
                    weeklySatisfactionChange -= 5; // DiktatÃ¶rlÃ¼k iÃ§in farklÄ± sonuÃ§
                }
            }


            addLog(`Hafta Sonu Ã–zeti: BÃ¼tÃ§e DeÄŸiÅŸimi: $${Math.round(weeklyBudgetChange).toLocaleString()}, Memnuniyet: ${satisfaction.toFixed(1)}%. Enflasyon: ${inflation.toFixed(1)}%.`);
            weeklyBudgetChange = 0; 

            updateGameStats();
            updateMinisterAdvice();
            enableAllActionButtons(); 
        }

        // Rastgele Olay Tetikleyici
        function triggerRandomEvent() {
            const events = [
                { desc: 'Åiddetli bir doÄŸal afet yaÅŸandÄ±, alt yapÄ±ya zarar verdi.', type: 'danger', effect: () => { budget -= 20000000; weeklyBudgetChange -= 20000000; weeklySatisfactionChange -= 7; weeklyGdpChangeFactor *= 0.98; } },
                { desc: 'Yeni bir teknolojik buluÅŸ ekonomiye bÃ¼yÃ¼k katkÄ± saÄŸladÄ±!', type: 'success', effect: () => { weeklyGdpChangeFactor *= 1.008; weeklySatisfactionChange += 4; } },
                { desc: 'HÃ¼kÃ¼mette yolsuzluk iddialarÄ± yayÄ±ldÄ±. Halk memnuniyeti dÃ¼ÅŸtÃ¼.', type: 'danger', effect: () => { weeklySatisfactionChange -= 12; weeklyForeignRelationsChange -= 7; if(cabinet.justice.efficiency < 0.6) weeklySatisfactionChange -=5; } }, // Adalet bakanÄ± kÃ¶tÃ¼yse daha Ã§ok dÃ¼ÅŸer
                { desc: 'Ãœlkenize bÃ¼yÃ¼k bir uluslararasÄ± yatÄ±rÄ±m yapÄ±ldÄ±!', type: 'success', effect: () => { budget += 70000000; weeklyBudgetChange += 70000000; weeklyGdpChangeFactor *= 1.003; } },
                { desc: 'BaÅŸarÄ±lÄ± bir kÃ¼ltÃ¼r festivali dÃ¼zenlendi. Halk memnuniyeti arttÄ±.', type: 'success', effect: () => { weeklySatisfactionChange += 8; } },
                { desc: 'KÃ¼resel enerji fiyatlarÄ± fÄ±rladÄ±.', type: 'warning', effect: () => { weeklyInflationChange += 1.8; weeklyBudgetChange -= 5000000; } }, // BÃ¼tÃ§eye de etki
                { desc: 'KomÅŸu Ã¼lke ile iliÅŸkiler bir sÄ±nÄ±r anlaÅŸmazlÄ±ÄŸÄ± nedeniyle gerginleÅŸti.', type: 'warning', effect: () => {
                    const neighborKeys = Object.keys(countries);
                    const randomNeighbor = neighborKeys[Math.floor(Math.random() * neighborKeys.length)];
                    countries[randomNeighbor].relation = Math.max(0, countries[randomNeighbor].relation - 15);
                    weeklyForeignRelationsChange -= 8; addLog(`${randomNeighbor} ile sÄ±nÄ±r anlaÅŸmazlÄ±ÄŸÄ± yaÅŸandÄ±.`, 'warning');
                    }
                },
                { desc: 'BÃ¼yÃ¼k bir saÄŸlÄ±k kampanyasÄ± baÅŸarÄ±yla sonuÃ§landÄ±, salgÄ±n hastalÄ±k Ã¶nlendi.', type: 'success', effect: () => { weeklyPopulationChangeFactor *= 1.0008; weeklySatisfactionChange += 6; } },
                { desc: 'Ãœlkede organize suÃ§ Ã¶rgÃ¼tleri gÃ¼Ã§ kazandÄ±.', type: 'danger', effect: () => { weeklyCrimeRateChange += 2.5; weeklySecurityPerceptionChange -= 12; weeklySatisfactionChange -= 7; } },
                { desc: 'BasÄ±n Ã¶zgÃ¼rlÃ¼ÄŸÃ¼ Ã¼zerine uluslararasÄ± bir rapor Ã¼lkenizi eleÅŸtirdi.', type: 'danger', effect: () => { 
                    if(politicalSystem === 'DiktatÃ¶rlÃ¼k') { weeklySatisfactionChange -= 3; weeklyForeignRelationsChange -= 8; } 
                    else { weeklySatisfactionChange -= 8; weeklyForeignRelationsChange -= 12; } } 
                },
                { desc: 'Bilim insanlarÄ±mÄ±z Ã¶nemli bir patent aldÄ±, uluslararasÄ± ilgi Ã§ekti.', type: 'success', effect: () => { weeklyGdpChangeFactor *= 1.002; budget += 10000000; weeklyBudgetChange += 10000000; weeklyForeignRelationsChange +=3;}},
                { desc: 'Borsada ani bir dÃ¼ÅŸÃ¼ÅŸ yaÅŸandÄ±, yatÄ±rÄ±mcÄ± gÃ¼veni sarsÄ±ldÄ±.', type: 'warning', effect: () => { weeklyGdpChangeFactor *= 0.995; weeklyInflationChange += 0.5; weeklySatisfactionChange -=3;}}
            ];
            const randomEvent = events[Math.floor(Math.random() * events.length)];
            randomEvent.effect();
            addLog(randomEvent.desc, randomEvent.type);
        }

        // SeÃ§im yapma fonksiyonu
        function conductElections() {
            if (politicalSystem !== 'Demokrasi') return;
            addLog('SeÃ§imler yapÄ±lÄ±yor...', 'info');
            let electionOutcomeModifier = 0;
            // Muhalefetle iliÅŸkiler ve meclis desteÄŸi de sonucu etkileyebilir
            if (parliamentSupport < 40) electionOutcomeModifier -= 10; // DÃ¼ÅŸÃ¼k meclis desteÄŸi kÃ¶tÃ¼
            // Son dÃ¶nemdeki bÃ¼yÃ¼k baÅŸarÄ±lar/baÅŸarÄ±sÄ±zlÄ±klar (event bazlÄ± eklenebilir)

            const effectiveSatisfaction = satisfaction + electionOutcomeModifier;

            if (effectiveSatisfaction >= 55) {
                addLog('HalkÄ±n gÃ¼venini tazelediniz. SeÃ§imleri kazandÄ±nÄ±z ve iktidarda kaldÄ±nÄ±z!', 'success');
                parliamentSupport = Math.min(100, parliamentSupport + 15 + Math.floor(Math.random()*10)); 
                satisfaction = Math.min(100, satisfaction + 5); // SeÃ§im sonrasÄ± moral artÄ±ÅŸÄ±
            } else if (effectiveSatisfaction >= 35) {
                addLog('SeÃ§imler baÅŸa baÅŸ geÃ§ti. Koalisyon kurmak zorunda kaldÄ±nÄ±z veya az farkla kazandÄ±nÄ±z. Meclis gÃ¼cÃ¼nÃ¼z azaldÄ±.', 'warning');
                parliamentSupport = Math.max(20, parliamentSupport - 10 - Math.floor(Math.random()*10)); 
            } else {
                addLog('Halk memnuniyeti ve siyasi destek yetersiz. SeÃ§imleri kaybettiniz ve iktidardan dÃ¼ÅŸtÃ¼nÃ¼z!', 'danger');
                gameOver('SeÃ§im maÄŸlubiyeti sonucu iktidardan dÃ¼ÅŸtÃ¼nÃ¼z!');
                return;
            }
            updateGameStats();
        }


        // --- Kabine YÃ¶netimi FonksiyonlarÄ± ---
        function updateCabinetDisplay() {
            cabinetListEl.innerHTML = '';
            for (const type in cabinet) {
                const minister = cabinet[type];
                const listItem = document.createElement('li');
                listItem.innerHTML = `<strong>${capitalizeFirstLetter(type)} BakanÄ±:</strong> ${minister.name} (Verimlilik: ${minister.efficiency.toFixed(1)}, Yolsuzluk: ${minister.corruption.toFixed(1)})`;
                cabinetListEl.appendChild(listItem);
            }
        }

        function capitalizeFirstLetter(string) {
            return string.charAt(0).toUpperCase() + string.slice(1);
        }

        // --- Meclis YÃ¶netimi FonksiyonlarÄ± ---
        function updateParliamentDisplay() {
            parliamentSupportEl.textContent = `${parliamentSupport.toFixed(0)}%`;
            parliamentAgendaList.innerHTML = '';

            if (parliamentAgenda.length === 0) {
                parliamentAgendaList.innerHTML = '<li>GÃ¼ndemde yeni bir yasa teklifi yok.</li>';
            } else {
                parliamentAgenda.forEach((item, index) => {
                    const listItem = document.createElement('li');
                    listItem.innerHTML = `<p>${item.description} (Red SayÄ±sÄ±: ${item.rejectionCount || 0})</p>
                                        <div>
                                          <button class="parliament-action-btn" data-action="approve" data-index="${index}">Onayla</button>
                                          <button class="parliament-action-btn" data-action="reject" data-index="${index}">Reddet</button>
                                        </div>`;
                    parliamentAgendaList.appendChild(listItem);
                });
            }

            document.querySelectorAll('.parliament-action-btn').forEach(btn => {
                btn.onclick = handleParliamentAction;
            });
        }

        function handleParliamentAction(event) {
            const index = parseInt(event.target.dataset.index);
            const action = event.target.dataset.action;
            const proposal = parliamentAgenda[index];

            if (!proposal) return;

            if (politicalSystem === 'DiktatÃ¶rlÃ¼k') {
                 addLog(`DiktatÃ¶rlÃ¼kte meclis kararlarÄ± formalitedir. "${proposal.description}" otomatik onaylandÄ±.`, 'info');
                 proposal.onApprove();
                 parliamentAgenda.splice(index, 1);
                 updateParliamentDisplay();
                 updateGameStats();
                 return;
            }


            if (action === 'approve') {
                const roll = Math.random() * 100;
                if (roll < parliamentSupport * (1 - proposal.rejectionCount * 0.1) ) { // Her red ÅŸansÄ± biraz dÃ¼ÅŸÃ¼rÃ¼r
                    proposal.onApprove();
                    addLog(`Meclis, "${proposal.description}" yasasÄ±nÄ± onayladÄ±.`, 'success');
                    parliamentSupport = Math.min(100, parliamentSupport + 2); // Onaylanan yasa desteÄŸi artÄ±rÄ±r
                } else {
                    addLog(`Meclis, "${proposal.description}" yasasÄ±nÄ± onaylamadÄ±. Yeterli destek yok veya muhalefet gÃ¼Ã§lÃ¼.`, 'warning');
                    parliamentSupport = Math.max(0, parliamentSupport - 5); 
                     proposal.rejectionCount = (proposal.rejectionCount || 0) + 1;
                    if (proposal.rejectionCount >= 2) { // 2 kez reddedilince
                        addLog(`"${proposal.description}" yasasÄ± ikinci kez reddedildiÄŸi iÃ§in gÃ¼ndemden dÃ¼ÅŸtÃ¼!`, 'danger');
                        parliamentAgenda.splice(index, 1);
                        updateParliamentDisplay();
                        updateGameStats();
                        return;
                    }
                }
            } else { // Reject
                proposal.rejectionCount = (proposal.rejectionCount || 0) + 1;
                proposal.onReject();
                addLog(`"${proposal.description}" yasasÄ± reddedildi. Red SayÄ±sÄ±: ${proposal.rejectionCount}`, 'info');
                parliamentSupport = Math.max(0, parliamentSupport - 3); 
                if (proposal.rejectionCount >= 2) {
                     addLog(`"${proposal.description}" yasasÄ± ikinci kez reddedildiÄŸi iÃ§in gÃ¼ndemden dÃ¼ÅŸtÃ¼!`, 'danger');
                     parliamentAgenda.splice(index, 1); 
                     updateParliamentDisplay();
                     updateGameStats();
                     return;
                }
            }
            
            if (action === 'approve' || parliamentAgenda.find(p => p === proposal && p.rejectionCount < 2)) {
                 // OnaylandÄ±ysa veya 2 kez reddedilmediyse gÃ¼ndemden kaldÄ±rma, sadece gÃ¼ncelle
            } else {
                 parliamentAgenda.splice(index, 1); // 2 kez reddedildiyse kaldÄ±r
            }

            updateParliamentDisplay();
            updateGameStats();
        }
        
        // Muhalefetle GÃ¶rÃ¼ÅŸme
        function handleOppositionMeeting(isPlayerInitiated, isClosed) {
            const cost = isClosed ? 500000 : 200000;
            if(budget < cost && isPlayerInitiated) {
                addLog("Muhalefetle gÃ¶rÃ¼ÅŸme iÃ§in yeterli bÃ¼tÃ§e yok.", "warning");
                return;
            }
            if(isPlayerInitiated) budget -= cost;

            let outcomeLog = `Muhalefet liderleriyle ${isClosed ? 'kapalÄ± kapÄ±lar ardÄ±nda' : 'aÃ§Ä±k bir ÅŸekilde'} gÃ¶rÃ¼ÅŸtÃ¼nÃ¼z. `;
            let satisfactionChange = 0;
            let supportChange = 0;

            const rand = Math.random();
            if (rand < 0.3) { // Olumsuz sonuÃ§
                outcomeLog += "GÃ¶rÃ¼ÅŸme gergin geÃ§ti ve bir sonuca varÄ±lamadÄ±. Siyasi tansiyon arttÄ±.";
                satisfactionChange = isClosed ? -2 : -3;
                supportChange = isClosed ? -3 : -5;
                if (!isPlayerInitiated) outcomeLog += " Muhalefet, taleplerinin karÅŸÄ±lanmadÄ±ÄŸÄ±nÄ± belirtti.";
            } else if (rand < 0.7) { // NÃ¶tr/Hafif olumlu
                outcomeLog += "BazÄ± konularda fikir ayrÄ±lÄ±klarÄ± olsa da yapÄ±cÄ± bir diyalog kuruldu.";
                satisfactionChange = isClosed ? 1 : 0;
                supportChange = isClosed ? 2 : 1;
                 if (!isPlayerInitiated && isClosed) outcomeLog += " Gizli bir uzlaÅŸÄ±ya varÄ±lmÄ±ÅŸ olabilir.";
                 if (!isPlayerInitiated && !isClosed) outcomeLog += " Kamuoyuna ortak bir metin aÃ§Ä±klanmasÄ± dÃ¼ÅŸÃ¼nÃ¼lÃ¼yor.";
            } else { // Olumlu sonuÃ§
                outcomeLog += "GÃ¶rÃ¼ÅŸme oldukÃ§a olumlu geÃ§ti. BazÄ± konularda uzlaÅŸÄ± saÄŸlandÄ± ve iÅŸbirliÄŸi mesajlarÄ± verildi.";
                satisfactionChange = isClosed ? 3 : 4;
                supportChange = isClosed ? 5 : 7;
                 if (!isPlayerInitiated) outcomeLog += " Muhalefet, yapÄ±cÄ± adÄ±mlarÄ±nÄ±zdan memnun.";
            }

            if (isClosed) {
                outcomeLog += " GÃ¶rÃ¼ÅŸmenin iÃ§eriÄŸi hakkÄ±nda resmi bir aÃ§Ä±klama yapÄ±lmadÄ±.";
            } else {
                outcomeLog += " GÃ¶rÃ¼ÅŸmenin ardÄ±ndan ortak bir basÄ±n aÃ§Ä±klamasÄ± yapÄ±ldÄ±.";
            }

            addLog(outcomeLog, satisfactionChange > 0 ? 'success' : (satisfactionChange === 0 ? 'info' : 'warning'));
            weeklySatisfactionChange += satisfactionChange;
            parliamentSupport = Math.min(100, Math.max(0, parliamentSupport + supportChange));
            updateGameStats();
        }


        // --- DÄ±ÅŸ Ä°liÅŸkiler FonksiyonlarÄ± ---
        function updateForeignRelationsDisplay() {
            foreignRelationsDisplayEl.textContent = foreignRelationsScore.toFixed(0);
            countryRelationsList.innerHTML = '';
            for (const countryName in countries) {
                const country = countries[countryName];
                const listItem = document.createElement('li');
                let status = '';
                let color = '';
                if (country.relation >= 70) { status = 'MÃ¼kemmel'; color = 'var(--success-color)'; }
                else if (country.relation >= 40) { status = 'Ä°yi'; color = 'var(--primary-color)'; }
                else if (country.relation >= 20) { status = 'NÃ¶tr'; color = 'var(--warning-color)'; }
                else { status = 'KÃ¶tÃ¼'; color = 'var(--danger-color)'; }

                listItem.innerHTML = `
                    <span>${countryName}: ${status} (<span style="color:${color};">${country.relation.toFixed(0)}</span>) ${country.tradeDeal ? '[Ticaret AnlaÅŸmasÄ± Var]' : ''}</span>
                    <div>
                        <button class="foreign-action-btn" data-country="${countryName}" data-action="trade">Ticaret Anl.</button>
                        <button class="foreign-action-btn" data-country="${countryName}" data-action="improve_specific">Ä°liÅŸki GeliÅŸtir ($1M)</button>
                        <button class="foreign-action-btn" data-country="${countryName}" data-action="harm_specific">Ä°liÅŸki Boz ($500K)</button>
                        ${country.relation < 20 ? `<button class="foreign-action-btn" style="background-color:var(--danger-color);" data-country="${countryName}" data-action="declare-war-specific">SavaÅŸ Ä°lan Et</button>` : ''}
                    </div>
                `;
                countryRelationsList.appendChild(listItem);
            }

            document.querySelectorAll('.foreign-action-btn').forEach(btn => {
                btn.onclick = handleForeignAction;
            });
        }
        
        function handleForeignAction(event) {
            const countryName = event.target.dataset.country;
            const action = event.target.dataset.action;
            const country = countries[countryName];

            if (!country) return;

            if (action === 'trade') {
                if (country.tradeDeal) {
                    addLog(`${countryName} ile zaten ticaret anlaÅŸmanÄ±z var. AnlaÅŸmayÄ± iptal etmek istiyorsanÄ±z, diplomatik maliyeti olacaktÄ±r.`, 'warning');
                    // Ä°ptal mekanizmasÄ± eklenebilir.
                    return;
                }
                const cost = 3000000; // Maliyet dÃ¼ÅŸÃ¼rÃ¼ldÃ¼
                 if (country.relation < 30) {
                     addLog(`${countryName} ile iliÅŸkiler ticaret anlaÅŸmasÄ± imzalamak iÃ§in Ã§ok kÃ¶tÃ¼.`, 'warning');
                     return;
                 }
                if (budget >= cost) {
                    budget -= cost;
                    weeklyBudgetChange -= cost;
                    country.relation = Math.min(100, country.relation + 10 + Math.floor(diplomaticApproachLevel/2)); // Diplomatik yaklaÅŸÄ±m da etkili
                    country.tradeDeal = true;
                    weeklyGdpChangeFactor *= 1.0015; // Ticaret GDP'ye katkÄ± biraz arttÄ±
                    foreignRelationsScore = Math.min(100, foreignRelationsScore + 2);
                    addLog(`${countryName} ile yeni bir ticaret anlaÅŸmasÄ± imzalandÄ±!`, 'success');
                } else {
                    addLog(`Yeterli bÃ¼tÃ§e yok! Ticaret gÃ¶rÃ¼ÅŸmesi maliyeti: $${cost.toLocaleString()}`, 'warning');
                }
            } else if (action === 'improve_specific') {
                const cost = 1000000;
                if (budget >= cost) {
                    budget -= cost; weeklyBudgetChange -= cost;
                    country.relation = Math.min(100, country.relation + 5 + Math.floor(Math.random()*5) + Math.floor(diplomaticApproachLevel/2));
                    foreignRelationsScore = Math.min(100, foreignRelationsScore + 1);
                    addLog(`${countryName} ile iliÅŸkileri geliÅŸtirmek iÃ§in diplomatik bir jest yapÄ±ldÄ±.`, 'info');
                } else { addLog('Yetersiz bÃ¼tÃ§e.', 'warning'); }
            } else if (action === 'harm_specific') {
                 const cost = 500000;
                if (budget >= cost) {
                    budget -= cost; weeklyBudgetChange -= cost;
                    country.relation = Math.max(0, country.relation - 5 - Math.floor(Math.random()*5) - Math.floor((10-diplomaticApproachLevel)/2) ); // Agresif yaklaÅŸÄ±m daha Ã§ok bozar
                    foreignRelationsScore = Math.max(0, foreignRelationsScore - 1);
                    addLog(`${countryName} ile iliÅŸkileri gerecek bir adÄ±m atÄ±ldÄ±.`, 'warning');
                } else { addLog('Yetersiz bÃ¼tÃ§e.', 'warning'); }
            } else if (action === 'declare-war-specific') {
                if (country.relation < 20 || militaryStrengthIndex > country.relation + 40) { // Ya iliÅŸki Ã§ok kÃ¶tÃ¼ ya da biz Ã§ok gÃ¼Ã§lÃ¼yÃ¼z
                    const cost = 50000000 + (armySize * 100); // SavaÅŸ maliyeti ordu bÃ¼yÃ¼klÃ¼ÄŸÃ¼ne de baÄŸlÄ±
                    if (budget < cost) {
                        addLog(`Yeterli bÃ¼tÃ§e yok! SavaÅŸ baÅŸlatmak iÃ§in $${cost.toLocaleString()} gerekiyor.`, 'warning');
                        return;
                    }
                    budget -= cost;
                    weeklyBudgetChange -= cost;
                    addLog(`${countryName} Ã¼lkesine savaÅŸ ilan edildi!`, 'danger');
                    weeklySatisfactionChange -= 10; // SavaÅŸ memnuniyeti dÃ¼ÅŸÃ¼rÃ¼r
                    foreignRelationsScore = Math.max(0, foreignRelationsScore - 20);
                    simulateWar(countryName, true); // isPlayerInitiated = true
                } else {
                    addLog(`${countryName} ile iliÅŸkiler savaÅŸ ilan etmek iÃ§in yeterince kÃ¶tÃ¼ deÄŸil veya askeri olarak denk sayÄ±lÄ±rÄ±z. Daha fazla provokasyon gerekebilir.`, 'warning');
                }
            }
            updateForeignRelationsDisplay();
            updateGameStats();
        }

        function simulateWar(targetCountry, isPlayerInitiated) {
            addLog(`${targetCountry} ile savaÅŸ baÅŸladÄ±! Askerler cepheye...`, 'danger');
            let playerPower = militaryStrengthIndex * (armySize / 10000) * (cabinet.defense.efficiency || 0.5);
            // Rakip gÃ¼cÃ¼, iliÅŸkiler ve genel bir rastgelelik ile belirlenebilir
            let enemyPower = (100 - countries[targetCountry].relation) * Math.random() * 2; // Basit bir rakip gÃ¼Ã§ hesabÄ±
            
            const outcomeRoll = Math.random();
            let resultDescription = "";
            
            // SavaÅŸ planlamasÄ± ve tatbikatlar sonucu etkilesin
            // Bu deÄŸiÅŸkenler globalde tanÄ±mlanÄ±p butonlarla artÄ±rÄ±labilir. Åimdilik rastgele ekleyelim.
            playerPower *= (1 + weeklyMilitaryStrengthChange / 100); // Bu hafta yapÄ±lan hazÄ±rlÄ±klar

            if (playerPower * (outcomeRoll + 0.2) > enemyPower * (1 - outcomeRoll + 0.2) ) { // Kazanma olasÄ±lÄ±ÄŸÄ±
                resultDescription = `SavaÅŸÄ± kazandÄ±nÄ±z! ${targetCountry} Ã¼zerinde zafer elde edildi.`;
                weeklyGdpChangeFactor *= 1.005; // Ganimet, kaynak vs.
                weeklySatisfactionChange += (isPlayerInitiated ? 10 : 5); // Savunma savaÅŸÄ± daha az memnuniyet artÄ±rÄ±r
                budget += 30000000 + Math.floor(Math.random() * 50000000); 
                weeklyBudgetChange += 30000000;
                countries[targetCountry].relation = Math.max(0, countries[targetCountry].relation - 30); // Yenilen Ã¼lkeyle iliÅŸki daha da kÃ¶tÃ¼leÅŸir
                if(isPlayerInitiated) foreignRelationsScore = Math.max(0, foreignRelationsScore -10); // SaldÄ±rgan savaÅŸ imajÄ± bozar
                else foreignRelationsScore = Math.min(100, foreignRelationsScore + 5); // Savunma savaÅŸÄ± sempati toplayabilir
                militaryStrengthIndex = Math.max(10, militaryStrengthIndex - 5 - Math.floor(Math.random()*5)); // SavaÅŸta gÃ¼Ã§ kaybÄ±
                armySize = Math.max(10000, armySize - Math.floor(armySize * (0.02 + Math.random()*0.05))); // Asker kaybÄ±
                addLog(resultDescription, 'success');
            } else if (playerPower * (outcomeRoll + 0.4) < enemyPower * (1-outcomeRoll + 0.4) && outcomeRoll < 0.3) { // Kaybetme olasÄ±lÄ±ÄŸÄ±
                 resultDescription = `SavaÅŸÄ± kaybettiniz! ${targetCountry} karÅŸÄ±sÄ±nda aÄŸÄ±r kayÄ±plar verildi. Toprak kaybedildi.`;
                weeklyGdpChangeFactor *= 0.95;
                weeklySatisfactionChange -= (isPlayerInitiated ? 25 : 15);
                budget -= 20000000 + Math.floor(Math.random() * 30000000);
                weeklyBudgetChange -= 20000000;
                countries[targetCountry].relation = Math.min(100, countries[targetCountry].relation + 20); // Kaybedince dÃ¼ÅŸman daha da gÃ¼Ã§lenir/hak iddia eder
                foreignRelationsScore = Math.max(0, foreignRelationsScore - (isPlayerInitiated ? 15 : 5));
                militaryStrengthIndex = Math.max(10, militaryStrengthIndex - 10 - Math.floor(Math.random()*10));
                armySize = Math.max(10000, armySize - Math.floor(armySize * (0.05 + Math.random()*0.1)));
                addLog(resultDescription, 'danger');
            } else { // Beraberlik / Ã‡Ä±kmaz
                resultDescription = `SavaÅŸ ${targetCountry} ile bir Ã§Ä±kmaza girdi. Ä°ki taraf da aÄŸÄ±r kayÄ±plar verdi ancak sÄ±nÄ±r deÄŸiÅŸmedi. AteÅŸkes imzalandÄ±.`;
                weeklyGdpChangeFactor *= 0.98;
                weeklySatisfactionChange -= 8;
                militaryStrengthIndex = Math.max(10, militaryStrengthIndex - 8 - Math.floor(Math.random()*8));
                armySize = Math.max(10000, armySize - Math.floor(armySize * (0.03 + Math.random()*0.07)));
                addLog(resultDescription, 'warning');
            }
            updateGameStats();
            updateForeignRelationsDisplay();
        }
        // Zirve FonksiyonlarÄ±
        function updateSummitInvitationList() {
            summitInvitationListEl.innerHTML = '';
            let selectedCount = 0;
            for (const countryName in countries) {
                if(countries[countryName].summitInvited) selectedCount++;
            }

            for (const countryName in countries) {
                const country = countries[countryName];
                const listItem = document.createElement('li');
                listItem.innerHTML = `
                    <span>${countryName} (Ä°liÅŸki: ${country.relation.toFixed(0)})</span>
                    <input type="checkbox" data-country="${countryName}" class="summit-invite-checkbox" 
                           ${country.summitInvited ? 'checked' : ''} 
                           ${summitInvitationsSent ? 'disabled' : ''}
                           ${selectedCount >=5 && !country.summitInvited ? 'disabled' : ''}> 
                           ${country.summitInvited && summitInvitationsSent ? (country.summitAccepted ? ' (KatÄ±ldÄ±)' : ' (Reddetti)') : ''}
                `;
                summitInvitationListEl.appendChild(listItem);
            }

            document.querySelectorAll('.summit-invite-checkbox').forEach(checkbox => {
                checkbox.onchange = handleSummitInviteCheckbox;
            });
            sendSummitInvitationsBtn.disabled = !summitPlanned || summitInvitationsSent || getSelectedSummitInvitees().length === 0;
        }

        function handleSummitInviteCheckbox(event) {
            const countryName = event.target.dataset.country;
            countries[countryName].summitInvited = event.target.checked;
            updateSummitInvitationList(); // Buton durumunu ve sayaÃ§larÄ± gÃ¼ncellemek iÃ§in
        }
        
        function getSelectedSummitInvitees() {
            const invitees = [];
            for (const countryName in countries) {
                if (countries[countryName].summitInvited) {
                    invitees.push(countryName);
                }
            }
            return invitees;
        }


        // --- Raporlar FonksiyonlarÄ± ---
        function updateReports() {
            // Bu ID'ler HTML'de yoksa hata verir, kontrol et.
            // gdpChangeReportEl ve inflationChangeReportEl iÃ§in varsayÄ±lan span'ler eklenmeli ya da bu satÄ±rlar kaldÄ±rÄ±lmalÄ±.
            // Åimdilik bu elementlerin var olduÄŸunu varsayÄ±yorum. EÄŸer yoksa, ilgili HTML'e eklenmeli.
            // Ã–rneÄŸin: <p>GSYÄ°H DeÄŸiÅŸimi (HaftalÄ±k): <span id="gdp-change-report"></span></p>
            //          <p>Enflasyon DeÄŸiÅŸimi (HaftalÄ±k): <span id="inflation-change-report"></span></p>
            if(document.getElementById('gdp-change-report')) { // Kontrol eklendi
                 document.getElementById('gdp-change-report').textContent = `${((weeklyGdpChangeFactor - 1) * 100).toFixed(2)}%`;
            }
            if(document.getElementById('inflation-change-report')) { // Kontrol eklendi
                 document.getElementById('inflation-change-report').textContent = `${weeklyInflationChange.toFixed(2)}%`;
            }

            educationQualityReportEl.textContent = `${(educationSpending < 1000000 ? 'Yetersiz' : (educationSpending < 5000000 ? 'Orta' : 'Ä°yi'))}`;
            healthQualityReportEl.textContent = `${(healthSpending < 1000000 ? 'Yetersiz' : (healthSpending < 7000000 ? 'Orta' : 'Ä°yi'))}`;
            holidayCountReportEl.textContent = nationalHolidays;
            governmentSupportReportEl.textContent = `${satisfaction.toFixed(1)}%`; 
            oppositionStrengthReportEl.textContent = `${(politicalSystem === 'Demokrasi' ? (100 - parliamentSupport) : 0).toFixed(1)}%`;

            drawReportChart();
        }

        // --- Buton Olay Dinleyicileri ve Yeni Ã–zellikler ---

        // Vergi sliderÄ± deÄŸiÅŸikliÄŸi
        taxSlider.addEventListener('input', () => {
            taxSliderValue.textContent = taxSlider.value;
        });
        // Vergi uygulama butonu
        applyTaxBtn.addEventListener('click', () => {
            const newTaxRate = parseFloat(taxSlider.value);
            if (newTaxRate !== taxes) {
                const change = newTaxRate - taxes;
                taxes = newTaxRate;
                
                taxRateEl.textContent = taxes.toFixed(1);
                
                if (change > 0) {
                    addLog(`Vergileri %${taxes.toFixed(1)} oranÄ±na yÃ¼kselttiniz. Halk memnuniyeti etkilenebilir.`, 'warning');
                    weeklySatisfactionChange -= change * 2.5; // Vergi artÄ±ÅŸÄ± memnuniyeti daha Ã§ok dÃ¼ÅŸÃ¼rÃ¼r
                } else {
                    addLog(`Vergileri %${taxes.toFixed(1)} oranÄ±na dÃ¼ÅŸÃ¼rdÃ¼nÃ¼z. BÃ¼tÃ§e gelirleri azalabilir.`, 'info');
                    weeklySatisfactionChange -= change * 1.5; // Vergi azalÄ±ÅŸÄ± memnuniyeti artÄ±rÄ±r (change negatif olduÄŸu iÃ§in)
                }
                
                updateGameStats();
            }
        });
        // YatÄ±rÄ±m deÄŸeri butonlarÄ± (genel)
        function setupInvestmentButtons(inputId, decreaseBtnId, increaseBtnId, minVal, maxVal) {
            const inputEl = document.getElementById(inputId);
            document.getElementById(decreaseBtnId).addEventListener('click', () => {
                inputEl.value = Math.max(minVal, parseInt(inputEl.value) - 1);
            });
            document.getElementById(increaseBtnId).addEventListener('click', () => {
                inputEl.value = Math.min(maxVal, parseInt(inputEl.value) + 1);
            });
        }
        setupInvestmentButtons('economy-investment', 'decrease-economy-investment', 'increase-economy-investment', 1, 100);
        setupInvestmentButtons('education-investment', 'decrease-education-investment', 'increase-education-investment', 1, 50);
        setupInvestmentButtons('health-investment', 'decrease-health-investment', 'increase-health-investment', 1, 50);
        setupInvestmentButtons('culture-investment', 'decrease-culture-investment', 'increase-culture-investment', 1, 30);
        setupInvestmentButtons('police-budget', 'decrease-police-budget', 'increase-police-budget', 1, 20);
        setupInvestmentButtons('recruit-soldiers-input', 'decrease-recruits', 'increase-recruits', 1, 50);


        // YatÄ±rÄ±m uygulama butonlarÄ±
        investEconomyBtn.addEventListener('click', () => {
            const investmentAmount = parseInt(economyInvestmentInput.value) * 1000000;
            if (budget >= investmentAmount) {
                budget -= investmentAmount;
                weeklyBudgetChange -= investmentAmount;
                weeklyGdpChangeFactor *= (1 + (investmentAmount / gdp * 0.1 * cabinet.economy.efficiency)); // GSYÄ°H'ye oransal etki
                weeklyInflationChange += (investmentAmount / gdp * 0.05); 
                weeklySatisfactionChange += 0.1 * (investmentAmount / 10000000);
                addLog(`Ekonomiye $${investmentAmount.toLocaleString()} yatÄ±rÄ±m yaptÄ±nÄ±z.`, 'info');
            } else {
                addLog(`Yeterli bÃ¼tÃ§eniz yok! Ekonomi yatÄ±rÄ±m maliyeti: $${investmentAmount.toLocaleString()}`, 'warning');
            }
            updateGameStats();
        });
        investEducationBtn.addEventListener('click', () => {
            const investmentAmount = parseInt(educationInvestmentInput.value) * 1000000;
            if (budget >= investmentAmount) {
                budget -= investmentAmount;
                weeklyBudgetChange -= investmentAmount;
                educationSpending += investmentAmount; // HaftalÄ±k etki yerine birikimli olsun
                weeklySatisfactionChange += 0.5 * (investmentAmount / 5000000) * cabinet.education.efficiency;
                addLog(`EÄŸitime $${investmentAmount.toLocaleString()} yatÄ±rÄ±m yaptÄ±nÄ±z.`, 'info');
            } else {
                addLog(`Yeterli bÃ¼tÃ§eniz yok! EÄŸitim yatÄ±rÄ±m maliyeti: $${investmentAmount.toLocaleString()}`, 'warning');
            }
            updateGameStats();
        });
        
        investHealthBtn.addEventListener('click', () => {
            const investmentAmount = parseInt(healthInvestmentInput.value) * 1000000;
            if (budget >= investmentAmount) {
                budget -= investmentAmount;
                weeklyBudgetChange -= investmentAmount;
                healthSpending += investmentAmount; // HaftalÄ±k etki yerine birikimli
                weeklySatisfactionChange += 0.7 * (investmentAmount / 7000000) * cabinet.health.efficiency;
                addLog(`SaÄŸlÄ±ÄŸa $${investmentAmount.toLocaleString()} yatÄ±rÄ±m yaptÄ±nÄ±z.`, 'info');
            } else {
                addLog(`Yeterli bÃ¼tÃ§eniz yok! SaÄŸlÄ±k yatÄ±rÄ±m maliyeti: $${investmentAmount.toLocaleString()}`, 'warning');
            }
            updateGameStats();
        });
        
        promoteCultureBtn.addEventListener('click', () => {
            const investmentAmount = parseInt(cultureInvestmentInput.value) * 1000000;
            if (budget >= investmentAmount) {
                budget -= investmentAmount;
                weeklyBudgetChange -= investmentAmount;
                cultureSpending += investmentAmount; // HaftalÄ±k etki yerine birikimli
                weeklySatisfactionChange += 0.3 * (investmentAmount / 3000000);
                addLog(`KÃ¼ltÃ¼re $${investmentAmount.toLocaleString()} yatÄ±rÄ±m yaptÄ±nÄ±z.`, 'info');
            } else {
                addLog(`Yeterli bÃ¼tÃ§eniz yok! KÃ¼ltÃ¼r yatÄ±rÄ±m maliyeti: $${investmentAmount.toLocaleString()}`, 'warning');
            }
            updateGameStats();
        });
        increasePoliceBudgetBtnApply.addEventListener('click', () => {
            const investmentAmount = parseInt(policeBudgetInput.value) * 1000000;
            if (budget >= investmentAmount) {
                budget -= investmentAmount;
                weeklyBudgetChange -= investmentAmount;
                weeklyCrimeRateChange -= 0.3 * (investmentAmount / 3000000) * cabinet.interior.efficiency;
                weeklySecurityPerceptionChange += 1.5 * (investmentAmount / 3000000) * cabinet.interior.efficiency;
                addLog(`Polis bÃ¼tÃ§esine $${investmentAmount.toLocaleString()} yatÄ±rÄ±m yaptÄ±nÄ±z.`, 'info');
            } else {
                addLog(`Yeterli bÃ¼tÃ§eniz yok! Polis bÃ¼tÃ§esi maliyeti: $${investmentAmount.toLocaleString()}`, 'warning');
            }
            updateGameStats();
        });

        // Yeni Politikalar ButonlarÄ±
        investGreenEnergyBtn.addEventListener('click', () => {
            const cost = 20000000;
            if (budget >= cost) {
                budget -= cost; weeklyBudgetChange -= cost;
                addLog("YeÅŸil enerji dÃ¶nÃ¼ÅŸÃ¼mÃ¼ iÃ§in bÃ¼yÃ¼k bir yatÄ±rÄ±m paketi aÃ§Ä±klandÄ±.", "success");
                weeklySatisfactionChange += 3;
                weeklyForeignRelationsChange += 2; // UluslararasÄ± imaj
                weeklyInflationChange -= 0.1; // Uzun vadede enerji maliyetini dÃ¼ÅŸÃ¼rebilir
                // GSYÄ°H'ya uzun vadeli etki iÃ§in ayrÄ± bir mekanizma eklenebilir.
            } else { addLog("YeÅŸil enerji yatÄ±rÄ±mÄ± iÃ§in yeterli bÃ¼tÃ§e yok.", "warning"); }
            updateGameStats();
        });

        developDefenseIndustryBtn.addEventListener('click', () => {
            const cost = 50000000;
            if (budget >= cost) {
                budget -= cost; weeklyBudgetChange -= cost;
                addLog("Ulusal savunma sanayii geliÅŸtirme projesi baÅŸlatÄ±ldÄ±.", "info");
                weeklyMilitaryStrengthChange += 5; // Askeri gÃ¼cÃ¼ artÄ±rÄ±r
                weeklyGdpChangeFactor *= 1.001; // Uzun vadede GSYÄ°H'ya katkÄ±
                weeklyForeignRelationsChange -= 1; // BazÄ± komÅŸular rahatsÄ±z olabilir
                // cabinet.defense.efficiency artabilir.
            } else { addLog("Savunma sanayii projesi iÃ§in yeterli bÃ¼tÃ§e yok.", "warning"); }
            updateGameStats();
        });


        // Politika sliderlarÄ±
        socialPolicySlider.addEventListener('input', () => { socialPolicyValue.textContent = socialPolicySlider.value; });
        economicPolicySlider.addEventListener('input', () => { economicPolicyValue.textContent = economicPolicySlider.value; });
        diplomaticApproachSlider.addEventListener('input', () => { diplomaticApproachValue.textContent = diplomaticApproachSlider.value; });
        securityLevelSlider.addEventListener('input', () => { securityLevelValue.textContent = securityLevelSlider.value; });
        // Politika uygulama butonlarÄ±
        applySocialPolicyBtn.addEventListener('click', () => {
            const newLevel = parseInt(socialPolicySlider.value);
            const change = newLevel - socialPolicyLevel;
            if (change !== 0) {
                socialPolicyLevel = newLevel;
                if (change > 0) {
                    addLog(`Sosyal politikalarÄ± geniÅŸlettiniz. Halk memnuniyeti artabilir ancak bÃ¼tÃ§e yÃ¼kÃ¼ oluÅŸacak.`, 'info');
                    weeklySatisfactionChange += change * 0.7; // Etki biraz arttÄ±
                    weeklyBudgetChange -= change * 600000; // Maliyet biraz arttÄ±
                } else {
                    addLog(`Sosyal politikalarÄ± daralttÄ±nÄ±z. BÃ¼tÃ§e rahatlarken halk memnuniyeti dÃ¼ÅŸebilir.`, 'warning');
                    weeklySatisfactionChange += change * 1.2; 
                    weeklyBudgetChange -= change * 600000; 
                }
                updateGameStats();
            }
        });
        
        applyEconomicPolicyBtn.addEventListener('click', () => {
            const newLevel = parseInt(economicPolicySlider.value);
            const change = newLevel - economicPolicyLevel;
            if (change !== 0) {
                economicPolicyLevel = newLevel;
                if (change > 0) {
                    addLog(`Ekonomi politikalarÄ±nÄ± geniÅŸletici yÃ¶nde deÄŸiÅŸtirdiniz. GSYÄ°H bÃ¼yÃ¼mesi hÄ±zlanabilir ancak enflasyon riski artar.`, 'info');
                    weeklyGdpChangeFactor *= (1 + (change * 0.0025)); // Etki biraz arttÄ±
                    weeklyInflationChange += change * 0.12; // Enflasyon etkisi biraz arttÄ±
                } else {
                    addLog(`Ekonomi politikalarÄ±nÄ± daraltÄ±cÄ± yÃ¶nde deÄŸiÅŸtirdiniz. Enflasyon dÃ¼ÅŸebilir ancak GSYÄ°H bÃ¼yÃ¼mesi yavaÅŸlayabilir.`, 'warning');
                    weeklyGdpChangeFactor *= (1 + (change * 0.0015)); 
                    weeklyInflationChange += change * 0.12; 
                }
                updateGameStats();
            }
        });
        
        applyDiplomaticApproachBtn.addEventListener('click', () => {
            const newLevel = parseInt(diplomaticApproachSlider.value);
            const change = newLevel - diplomaticApproachLevel;
            if (change !== 0) {
                diplomaticApproachLevel = newLevel;
                if (change > 0) { // Daha uzlaÅŸmacÄ±
                    addLog(`Diplomatik yaklaÅŸÄ±mÄ±nÄ±zÄ± daha uzlaÅŸmacÄ± bir hale getirdiniz. DÄ±ÅŸ iliÅŸkiler iyileÅŸebilir.`, 'info');
                    weeklyForeignRelationsChange += change * 0.7; // Genel skora etki
                    for (const countryName in countries) { // TÃ¼m Ã¼lkelere pozitif etki
                        countries[countryName].relation = Math.min(100, countries[countryName].relation + (change * 0.5));
                    }
                } else { // Daha agresif
                    addLog(`Diplomatik yaklaÅŸÄ±mÄ±nÄ±zÄ± daha agresif bir hale getirdiniz. DÄ±ÅŸ iliÅŸkiler geriliyebilir.`, 'warning');
                    weeklyForeignRelationsChange += change * 1.0; // Genel skora daha gÃ¼Ã§lÃ¼ negatif etki
                     for (const countryName in countries) { // TÃ¼m Ã¼lkelere negatif etki
                        countries[countryName].relation = Math.max(0, countries[countryName].relation + (change * 0.7));
                    }
                }
                updateForeignRelationsDisplay();
                updateGameStats();
            }
        });
        applySecurityLevelBtn.addEventListener('click', () => { // Ä°Ã§ polisaj
            const newLevel = parseInt(securityLevelSlider.value);
            const change = newLevel - securityLevel;
            if (change !== 0) {
                securityLevel = newLevel;
                if (change > 0) {
                    addLog(`Ä°Ã§ gÃ¼venlik (polisaj) seviyesini artÄ±rdÄ±nÄ±z. SuÃ§ oranÄ± dÃ¼ÅŸebilir ancak Ã¶zgÃ¼rlÃ¼kler kÄ±sÄ±tlanabilir.`, 'info');
                    weeklyCrimeRateChange -= change * 0.25;
                    weeklySecurityPerceptionChange += change * 0.6;
                    if (securityLevel > 8) { // EÅŸik dÃ¼ÅŸÃ¼rÃ¼ldÃ¼
                        addLog(`Ã‡ok yÃ¼ksek iÃ§ gÃ¼venlik Ã¶nlemleri halk tarafÄ±ndan ciddi endiÅŸeyle karÅŸÄ±lanÄ±yor.`, 'warning');
                        weeklySatisfactionChange -= (securityLevel - 8) * 0.5; 
                    }
                } else {
                    addLog(`Ä°Ã§ gÃ¼venlik (polisaj) seviyesini dÃ¼ÅŸÃ¼rdÃ¼nÃ¼z. Ã–zgÃ¼rlÃ¼kler geniÅŸlerken suÃ§ oranÄ± artabilir.`, 'warning');
                    weeklyCrimeRateChange -= change * 0.35; 
                    weeklySecurityPerceptionChange += change * 0.8; 
                }
                updateGameStats();
            }
        });

        // Sekme butonlarÄ± iÃ§in olay dinleyici
        tabButtons.forEach(button => {
            button.addEventListener('click', () => {
                const tabId = button.dataset.tab;
                showScreen(tabId);
            });
        });
        // DiÄŸer butonlar
        declareHolidayBtn.addEventListener('click', () => {
            const cost = 2000000;
            if (budget >= cost) {
                budget -= cost;
                weeklyBudgetChange -= cost;
                nationalHolidays++;
                weeklySatisfactionChange += 4; // Tatil memnuniyeti etkisi arttÄ±
                weeklyGdpChangeFactor *= 0.9985; // Ekonomi etkisi biraz daha belirgin
                addLog(`Yeni bir resmi tatil ilan ettiniz! Halk mutlu ama ekonomi hafif etkilenecek.`, 'success');
            } else {
                addLog(`Yeterli bÃ¼tÃ§eniz yok! Tatil ilan etme maliyeti: $${cost.toLocaleString()}`, 'warning');
            }
            updateGameStats();
        });
        // Meclis ButonlarÄ±
        callElectionsBtn.addEventListener('click', () => {
            if (politicalSystem === 'Demokrasi') {
                addLog('Erken seÃ§im Ã§aÄŸrÄ±sÄ± yaptÄ±nÄ±z! Bu riskli bir karar olabilir.', 'warning');
                weeklySatisfactionChange -= 5; // Erken seÃ§im halkÄ± daha Ã§ok rahatsÄ±z eder
                budget -= 10000000; // Erken seÃ§im maliyeti
                weeklyBudgetChange -= 10000000;
                setTimeout(() => conductElections(), 1000 * (Math.random() + 0.5) ); 
            } else {
                addLog('DiktatÃ¶rlÃ¼kte seÃ§im yapamazsÄ±nÄ±z.', 'danger');
            }
        });
        proposeLawBtn.addEventListener('click', () => {
            const proposalText = proposalInput.value.trim();
            if (proposalText === '') {
                addLog('LÃ¼tfen bir yasa teklifi girin.', 'warning');
                return;
            }
            if (politicalSystem === 'DiktatÃ¶rlÃ¼k') {
                 addLog(`DiktatÃ¶rlÃ¼kte yasa teklifleri doÄŸrudan kararname olarak yayÄ±nlanÄ±r: "${proposalText}"`, 'info');
                 weeklySatisfactionChange +=1; // KÃ¼Ã§Ã¼k bir etki
                 proposalInput.value = '';
                 updateGameStats();
                 return;
            }

            parliamentAgenda.push({
                description: proposalText,
                rejectionCount: 0, // BaÅŸlangÄ±Ã§ta red sayÄ±sÄ± 0
                onApprove: () => {
                    addLog(`Kendi teklifiniz olan "${proposalText}" yasasÄ± onaylandÄ±!`, 'success');
                    weeklySatisfactionChange += 2; 
                    parliamentSupport = Math.min(100, parliamentSupport + 3);
                },
                onReject: () => {
                    addLog(`Kendi teklifiniz olan "${proposalText}" yasasÄ± reddedildi.`, 'warning');
                    weeklySatisfactionChange -= 1; 
                }
            });
            addLog(`Yeni yasa teklifi "${proposalText}" meclis gÃ¼ndemine eklendi.`, 'info');
            proposalInput.value = '';
            updateParliamentDisplay();
        });

        declareDictatorshipBtn.addEventListener('click', () => {
            if (politicalSystem === 'Demokrasi') {
                if (satisfaction > 40 && parliamentSupport > 40 && militaryStrengthIndex > 60) { // Belli bir gÃ¼Ã§ ve destek gerekebilir
                    addLog('DiktatÃ¶rlÃ¼k ilan ettiniz! Demokrasi sona erdi. Ordu yÃ¶netime el koydu.', 'danger');
                    politicalSystem = 'DiktatÃ¶rlÃ¼k';
                    weeklySatisfactionChange -= 30; 
                    weeklyForeignRelationsChange -= 40; 
                    parliamentSupport = 100; // Meclis etkisiz
                    crimeRate = Math.max(0.1, crimeRate/2); // Otorite suÃ§larÄ± bastÄ±rÄ±r
                    securityPerception = Math.min(100, securityPerception + 20);
                    updateGameStats();
                    enableAllActionButtons(); 
                } else {
                     addLog('DiktatÃ¶rlÃ¼k ilan etmek iÃ§in yeterli siyasi gÃ¼cÃ¼nÃ¼z, halk desteÄŸiniz veya askeri kontrolÃ¼nÃ¼z yok!', 'danger');
                     weeklySatisfactionChange -= 10; // BaÅŸarÄ±sÄ±z darbe giriÅŸimi gibi
                     parliamentSupport = Math.max(0, parliamentSupport - 20);
                }
            } else {
                addLog('Zaten diktatÃ¶rlÃ¼kle yÃ¶netiliyorsunuz.', 'warning');
            }
        });
        dissolveParliamentBtn.addEventListener('click', () => { // Bu buton diktatÃ¶rlÃ¼ÄŸe daha yumuÅŸak bir geÃ§iÅŸ olabilir
            if (politicalSystem === 'Demokrasi') {
                 if (parliamentSupport < 20 && satisfaction < 30) { // Meclis Ã§ok zayÄ±fsa ve halk memnuniyetsizse
                    addLog('Meclisi feshettiniz ve tÃ¼m yetkileri Ã¼zerinize aldÄ±nÄ±z! Bu durum Ã¼lkeyi diktatÃ¶rlÃ¼ÄŸe sÃ¼rÃ¼kleyebilir.', 'danger');
                    weeklySatisfactionChange -= 25; 
                    politicalSystem = 'DiktatÃ¶rlÃ¼k'; // SonuÃ§ diktatÃ¶rlÃ¼k
                    parliamentSupport = 0; 
                    parliamentAgenda.length = 0; 
                    updateParliamentDisplay();
                    enableAllActionButtons(); 
                 } else {
                     addLog('Meclisi feshetmek iÃ§in siyasi koÅŸullar uygun deÄŸil. Bu, iÃ§ savaÅŸa yol aÃ§abilir!', 'danger');
                     weeklySatisfactionChange -= 15;
                     parliamentSupport = Math.max(0, parliamentSupport - 10);
                 }
            } else {
                 addLog('Zaten diktatÃ¶rlÃ¼kle yÃ¶netiliyorsunuz, meclis zaten etkisiz.', 'warning');
            }
            updateGameStats();
        });
        // Muhalefetle GÃ¶rÃ¼ÅŸme ButonlarÄ±
        meetOppositionClosedBtn.addEventListener('click', () => {
            if (politicalSystem === 'Demokrasi') handleOppositionMeeting(true, true);
            else addLog("DiktatÃ¶rlÃ¼kte muhalefetle resmi gÃ¶rÃ¼ÅŸme yapÄ±lamaz.", "danger");
        });
        meetOppositionOpenBtn.addEventListener('click', () => {
            if (politicalSystem === 'Demokrasi') handleOppositionMeeting(true, false);
            else addLog("DiktatÃ¶rlÃ¼kte muhalefetle resmi gÃ¶rÃ¼ÅŸme yapÄ±lamaz.", "danger");
        });

        // GÃ¼venlik EkranÄ± ButonlarÄ±
        recruitSoldiersBtn.addEventListener('click', () => {
            const numRecruits = parseInt(recruitSoldiersInput.value) * 1000;
            const costPerThousand = 1000000;
            const totalCost = (numRecruits / 1000) * costPerThousand;

            if (budget >= totalCost) {
                budget -= totalCost; weeklyBudgetChange -= totalCost;
                armySize += numRecruits;
                militaryStrengthIndex = Math.min(100, militaryStrengthIndex + numRecruits / 20000); // Yeni askerler gÃ¼cÃ¼ biraz artÄ±rÄ±r
                addLog(`${numRecruits.toLocaleString()} yeni asker orduya katÄ±ldÄ±.`, 'info');
                weeklySatisfactionChange -= numRecruits / population * 50; // Zorunlu askerlik gibi memnuniyeti hafif dÃ¼ÅŸÃ¼rebilir
            } else {
                addLog(`Asker alÄ±mÄ± iÃ§in yeterli bÃ¼tÃ§e yok. Maliyet: $${totalCost.toLocaleString()}`, 'warning');
            }
            updateGameStats();
        });
        planWarBtn.addEventListener('click', () => {
            const cost = 5000000;
            if (budget >= cost) {
                budget -= cost; weeklyBudgetChange -= cost;
                addLog("Genelkurmay, olasÄ± bir savaÅŸ iÃ§in detaylÄ± operasyon planlarÄ± hazÄ±rladÄ±. Askeri stratejiler gÃ¼ncellendi.", "info");
                weeklyMilitaryStrengthChange += 2; // HazÄ±rlÄ±k artar
                // Gelecek savaÅŸlarda kÃ¼Ã§Ã¼k bir avantaj saÄŸlayabilir
            } else { addLog("SavaÅŸ planlamasÄ± iÃ§in yeterli bÃ¼tÃ§e yok.", "warning");}
            updateGameStats();
        });
        militaryExerciseBtn.addEventListener('click', () => {
            const cost = 10000000 + Math.floor(armySize / 10000 * 500000); // Ordu bÃ¼yÃ¼klÃ¼ÄŸÃ¼ne gÃ¶re maliyet
            if (budget >= cost) {
                budget -= cost; weeklyBudgetChange -= cost;
                addLog("GeniÅŸ kapsamlÄ± bir askeri tatbikat dÃ¼zenlendi. Ordunun hazÄ±rlÄ±k seviyesi ve koordinasyonu arttÄ±.", "success");
                weeklyMilitaryStrengthChange += (3 + Math.floor(cabinet.defense.efficiency * 2)); // Bakan da etkili
                foreignRelationsScore = Math.max(0, foreignRelationsScore - 1); // KomÅŸular rahatsÄ±z olabilir
                // Rastgele bir komÅŸuyla iliÅŸki hafif dÃ¼ÅŸebilir
                const neighborKeys = Object.keys(countries);
                const randomNeighbor = neighborKeys[Math.floor(Math.random() * neighborKeys.length)];
                if (countries[randomNeighbor].relation > 20) { // Ã‡ok kÃ¶tÃ¼ deÄŸilse
                     countries[randomNeighbor].relation = Math.max(0, countries[randomNeighbor].relation - (5 - diplomaticApproachLevel)); // Agresifsek daha Ã§ok dÃ¼ÅŸer
                     addLog(`${randomNeighbor}, tatbikatÄ± provokasyon olarak algÄ±ladÄ±.`, 'warning');
                }
                updateForeignRelationsDisplay();
            } else { addLog("Askeri tatbikat iÃ§in yeterli bÃ¼tÃ§e yok.", "warning");}
            updateGameStats();
        });
        militaryCouncilMeetingBtn.addEventListener('click', () => {
            const cost = 1000000;
            if (budget >= cost) {
                budget -= cost; weeklyBudgetChange -= cost;
                let advice = "Askeri Åura toplandÄ±. Genelkurmay BaÅŸkanÄ± ";
                if (militaryStrengthIndex < 40) {
                    advice += "ordunun modernizasyon ihtiyacÄ±nÄ± ve teÃ§hizat eksikliÄŸini vurguladÄ±. Acil yatÄ±rÄ±m talep ediliyor.";
                    weeklyMilitaryStrengthChange -=1; // Moral dÃ¼ÅŸebilir
                } else if (armySize < population * 0.004 && foreignRelationsScore < 40) {
                    advice += "sÄ±nÄ±rlardaki gerginlik nedeniyle daha fazla personele ihtiyaÃ§ olduÄŸunu belirtti.";
                } else {
                    advice += "mevcut askeri durumu yeterli bulduÄŸunu ancak her zaman teyakkuzda olunmasÄ± gerektiÄŸini ifade etti.";
                    weeklyMilitaryStrengthChange +=1; // Moral artabilir
                }
                addLog(advice, "info");
            } else { addLog("Askeri Åura toplantÄ±sÄ± iÃ§in yeterli bÃ¼tÃ§e yok.", "warning");}
            updateGameStats();
        });


        reformJusticeBtn.addEventListener('click', () => {
            const cost = 5000000;
            if (budget >= cost) {
                budget -= cost;
                weeklyBudgetChange -= cost;
                weeklyCrimeRateChange -= 0.2 * cabinet.justice.efficiency;
                weeklySecurityPerceptionChange += 3 * cabinet.justice.efficiency;
                weeklySatisfactionChange += (1 + cabinet.justice.efficiency); // BakanÄ±n verimliliÄŸi de etkilesin
                addLog(`Adalet sistemini reforme ettiniz. SuÃ§la mÃ¼cadele ve halk gÃ¼veni artabilir.`, 'info');
            } else {
                addLog(`Yeterli bÃ¼tÃ§eniz yok! Adalet reformu maliyeti: $${cost.toLocaleString()}`, 'warning');
            }
            updateGameStats();
        });
        surveillanceProgramBtn.addEventListener('click', () => {
            const cost = 4000000;
            if (budget >= cost) {
                budget -= cost;
                weeklyBudgetChange -= cost;
                weeklyCrimeRateChange -= 1.2; // Etkisi arttÄ±
                weeklySecurityPerceptionChange += 1.5;
                weeklySatisfactionChange -= 6; // Memnuniyet daha Ã§ok dÃ¼ÅŸer
                addLog(`GeniÅŸ Ã§aplÄ± gÃ¶zetim programÄ± baÅŸlattÄ±nÄ±z. SuÃ§ oranÄ± dÃ¼ÅŸebilir, ancak Ã¶zgÃ¼rlÃ¼kler kÄ±sÄ±tlandÄ± ve halk tedirgin.`, 'warning');
            } else {
                addLog(`Yeterli bÃ¼tÃ§eniz yok! GÃ¶zetim programÄ± maliyeti: $${cost.toLocaleString()}`, 'warning');
            }
            updateGameStats();
        });
        crackdownDissentBtn.addEventListener('click', () => {
            if (politicalSystem === 'DiktatÃ¶rlÃ¼k') {
                const cost = 2000000 + Math.floor(population * 0.00001); // NÃ¼fusa gÃ¶re maliyet
                if (budget >= cost) {
                    budget -= cost; 
                    weeklyBudgetChange -= cost;
                    weeklySatisfactionChange -= 12; 
                    weeklySecurityPerceptionChange += 8; 
                    weeklyForeignRelationsChange -= 8; 
                    parliamentSupport = 100; // DiktatÃ¶rlÃ¼kte zaten 100 olmalÄ± ama yine de
                    addLog(`Muhalefeti ve her tÃ¼rlÃ¼ aykÄ±rÄ± sesi ÅŸiddetle bastÄ±rdÄ±nÄ±z. HalkÄ±n korkusu arttÄ±, rejimin kontrolÃ¼ pekiÅŸti. UluslararasÄ± tepkiler sert.`, 'danger');
                } else {
                    addLog(`Yeterli bÃ¼tÃ§eniz yok! Muhalefeti bastÄ±rma maliyeti: $${cost.toLocaleString()}`, 'warning');
                }
            } else {
                addLog(`Demokratik bir rejimde muhalefeti bu ÅŸekilde bastÄ±ramazsÄ±nÄ±z! Bu durum sizi diktatÃ¶rlÃ¼ÄŸe gÃ¶tÃ¼rebilir.`, 'danger');
                 weeklySatisfactionChange -= 10;
                 parliamentSupport = Math.max(0, parliamentSupport - 15);
            }
            updateGameStats();
        });
        // DÄ±ÅŸ Ä°liÅŸkiler ButonlarÄ±
        globalSummitBtn.addEventListener('click', () => { // UluslararasÄ± bir zirveye KATILMAK
            const cost = 10000000;
            if (budget >= cost) {
                budget -= cost;
                weeklyBudgetChange -= cost;
                weeklyForeignRelationsChange += (8 + Math.floor(diplomaticApproachLevel)); // YaklaÅŸÄ±m da etkili
                weeklySatisfactionChange += 3;
                addLog(`Ã–nemli bir uluslararasÄ± zirveye katÄ±ldÄ±nÄ±z. DÄ±ÅŸ iliÅŸkiler gÃ¼Ã§lendi ve Ã¼lkenizin itibarÄ± arttÄ±.`, 'success');
            } else {
                addLog(`Yeterli bÃ¼tÃ§e yok! UluslararasÄ± zirveye katÄ±lÄ±m maliyeti: $${cost.toLocaleString()}`, 'warning');
            }
            updateGameStats();
        });

        createSummitBtn.addEventListener('click', () => { // Kendi zirvemizi DÃœZENLEMEK
            if (summitPlanned) {
                addLog("Zaten bir zirve planlama aÅŸamasÄ±ndasÄ±nÄ±z.", "warning");
                return;
            }
            const cost = 15000000;
            if (budget >= cost) {
                budget -= cost; weeklyBudgetChange -= cost;
                summitPlanned = true;
                summitInvitationsSent = false; // Yeni zirve iÃ§in davetler gÃ¶nderilmedi
                for(const countryName in countries) { // Eski davetleri temizle
                    countries[countryName].summitInvited = false;
                    countries[countryName].summitAccepted = false;
                }
                addLog(`Bir ulusal zirve dÃ¼zenlemeye karar verdiniz. Maliyet: $${cost.toLocaleString()}. Davet edilecek Ã¼lkeleri seÃ§in ve davetleri gÃ¶nderin.`, 'info');
                updateSummitInvitationList();
                createSummitBtn.disabled = true; // Zirve planlanÄ±rken tekrar basÄ±lamasÄ±n
                sendSummitInvitationsBtn.disabled = false; // Davet gÃ¶nderme butonu aktif
            } else {
                addLog("Zirve dÃ¼zenlemek iÃ§in yeterli bÃ¼tÃ§e yok.", "warning");
            }
            updateGameStats();
        });

        sendSummitInvitationsBtn.addEventListener('click', () => {
            if (!summitPlanned || summitInvitationsSent) return;
            const selectedInvitees = getSelectedSummitInvitees();
            if (selectedInvitees.length === 0) {
                addLog("Zirveye davet etmek iÃ§in en az bir Ã¼lke seÃ§melisiniz.", "warning");
                return;
            }

            addLog(`${selectedInvitees.join(', ')} Ã¼lkelerine zirve davetleri gÃ¶nderildi. KatÄ±lÄ±m durumlarÄ± iliÅŸkilerinize ve diplomatik Ã§abalarÄ±nÄ±za baÄŸlÄ± olacak.`, "info");
            summitInvitationsSent = true;
            sendSummitInvitationsBtn.disabled = true;

            // Ãœlkelerin kabul/red durumunu belirle (bir sonraki hafta sonunda iÅŸlenecek)
            selectedInvitees.forEach(countryName => {
                const country = countries[countryName];
                // Kabul ÅŸansÄ±: iliÅŸki durumu + diplomatik yaklaÅŸÄ±m + rastgelelik
                const acceptanceChance = country.relation + (diplomaticApproachLevel * 5) + foreignRelationsScore/5 - 20; // 0-100 arasÄ± bir skor
                if (Math.random() * 100 < acceptanceChance) {
                    country.summitAccepted = true;
                } else {
                    country.summitAccepted = false;
                }
            });
            updateSummitInvitationList(); // Checkbox'larÄ± disable etmek iÃ§in
        });


        signTradeDealBtn.addEventListener('click', () => { // Genele yÃ¶nelik ticaret anlaÅŸmasÄ± arayÄ±ÅŸÄ±
            const cost = 1000000;
            if (budget >= cost) {
                budget -= cost;
                weeklyBudgetChange -= cost;
                
                let bestCountry = null;
                let bestPotential = -1; // Ä°liÅŸki + rastgelelik
                
                for (const countryName in countries) {
                    const country = countries[countryName];
                    if (!country.tradeDeal && country.relation > 25) { // En azÄ±ndan biraz iliÅŸki lazÄ±m
                        const potential = country.relation + Math.random() * 30 + diplomaticApproachLevel * 2;
                        if (potential > bestPotential) {
                            bestCountry = countryName;
                            bestPotential = potential;
                        }
                    }
                }
                
                if (bestCountry) {
                    countries[bestCountry].tradeDeal = true;
                    countries[bestCountry].relation += (5 + Math.floor(diplomaticApproachLevel/2));
                    weeklyGdpChangeFactor *= 1.0015;
                    foreignRelationsScore = Math.min(100, foreignRelationsScore + 1);
                    addLog(`${bestCountry} ile genel bir ticaret anlaÅŸmasÄ± imzaladÄ±nÄ±z!`, 'success');
                } else {
                    addLog(`Åu anda uygun bir Ã¼lke ile ticaret anlaÅŸmasÄ± imzalanamadÄ±. Diplomatik Ã§abalarÄ± artÄ±rÄ±n.`, 'warning');
                    budget += cost; weeklyBudgetChange += cost; // ParayÄ± iade et
                }
            } else {
                addLog(`Yeterli bÃ¼tÃ§e yok! Ticaret anlaÅŸmasÄ± maliyeti: $${cost.toLocaleString()}`, 'warning');
            }
            updateForeignRelationsDisplay();
            updateGameStats();
        });
        improveRelationsBtn.addEventListener('click', () => { // Genele yÃ¶nelik iliÅŸki geliÅŸtirme
            const cost = 2000000;
            if (budget >= cost) {
                budget -= cost;
                weeklyBudgetChange -= cost;
                weeklyForeignRelationsChange += (3 + Math.floor(diplomaticApproachLevel/2)); 
                
                for (const countryName in countries) {
                    if (countries[countryName].relation < 90) { // Zaten mÃ¼kemmel olanlarÄ± daha da zorlama
                         countries[countryName].relation = Math.min(100, countries[countryName].relation + 1 + Math.floor(Math.random()*3));
                    }
                }
                
                addLog(`TÃ¼m komÅŸularla iliÅŸkileri geliÅŸtirmek iÃ§in genel bir diplomatik giriÅŸimde bulundunuz.`, 'info');
            } else {
                addLog(`Yeterli bÃ¼tÃ§e yok! Diplomasi giriÅŸimi maliyeti: $${cost.toLocaleString()}`, 'warning');
            }
            updateForeignRelationsDisplay();
            updateGameStats();
        });

        declareWarBtn.addEventListener('click', () => { // En kÃ¶tÃ¼ iliÅŸkiliye savaÅŸ
            let worstCountry = null;
            let worstRelation = 101;
            
            for (const countryName in countries) {
                const country = countries[countryName];
                if (country.relation < worstRelation) {
                    worstCountry = countryName;
                    worstRelation = country.relation;
                }
            }
            
            if (worstCountry && worstRelation < 25) { // EÅŸik biraz daha makul
                const cost = 50000000 + (armySize * 100);
                if (budget >= cost) {
                    budget -= cost;
                    weeklyBudgetChange -= cost;
                    addLog(`${worstCountry} Ã¼lkesine savaÅŸ ilan ettiniz!`, 'danger');
                    weeklySatisfactionChange -= 10;
                    foreignRelationsScore = Math.max(0, foreignRelationsScore - 20);
                    simulateWar(worstCountry, true);
                } else {
                    addLog(`Yeterli bÃ¼tÃ§e yok! SavaÅŸ ilan etme maliyeti: $${cost.toLocaleString()}`, 'warning');
                }
            } else {
                addLog(`HiÃ§bir Ã¼lke ile iliÅŸkileriniz savaÅŸ ilan edecek kadar kÃ¶tÃ¼ deÄŸil veya en kÃ¶tÃ¼ iliÅŸkili Ã¼lke bile gÃ¶rece iyi durumda.`, 'warning');
            }
            updateGameStats();
        });
        // Kabine ButonlarÄ±
        appointMinisterBtn.addEventListener('click', () => {
            const ministerType = ministerTypeSelect.value;
            let ministerName = ministerNameInput.value.trim();
            if (ministerName === '') {
                // Rastgele TÃ¼rk ismi veya daha jenerik bir isim
                const names = ["Ahmet YÄ±lmaz", "AyÅŸe Kaya", "Mehmet Demir", "Fatma Ã‡elik", "Mustafa Ã–ztÃ¼rk", "Zeynep AydÄ±n"];
                ministerName = names[Math.floor(Math.random() * names.length)];
            }

            const oldMinisterEfficiency = cabinet[ministerType] ? cabinet[ministerType].efficiency : 0.5;
            const newEfficiency = Math.random() * 0.5 + 0.4 + (Math.random() * 0.2); // 0.6 ile 1.1 arasÄ±, ortalama 0.85
            const newCorruption = Math.random() * 0.25 + (Math.random() * 0.1); // 0.0 ile 0.35 arasÄ±

            // Bakan deÄŸiÅŸikliÄŸi maliyeti ve etkisi
            const changeCost = 500000;
            if (budget >= changeCost) {
                budget -= changeCost; weeklyBudgetChange -= changeCost;
                cabinet[ministerType] = { name: ministerName, efficiency: newEfficiency, corruption: newCorruption };
                addLog(`${capitalizeFirstLetter(ministerType)} BakanÄ± ${ministerName} olarak atandÄ± (Maliyet: $${changeCost.toLocaleString()}). Verimlilik: ${newEfficiency.toFixed(1)}, Yolsuzluk: ${newCorruption.toFixed(1)}`, 'info');
                
                // Verimlilik farkÄ±na gÃ¶re memnuniyet etkisi
                const efficiencyDiff = newEfficiency - oldMinisterEfficiency;
                weeklySatisfactionChange += efficiencyDiff * 2; // Verimlilik artÄ±ÅŸÄ± memnuniyeti artÄ±rÄ±r, dÃ¼ÅŸÃ¼ÅŸÃ¼ azaltÄ±r

            } else {
                 addLog(`Bakan atama/deÄŸiÅŸtirme iÃ§in yeterli bÃ¼tÃ§e yok. ($${changeCost.toLocaleString()})`, 'warning');
                 return; // Atama yapÄ±lamadÄ±
            }
            
            updateCabinetDisplay();
            updateMinisterAdvice();
            updateMinisterReports();
            ministerNameInput.value = ''; 
        });
        // Oyun Sonu EkranÄ± Butonu
        restartGameBtn.addEventListener('click', () => {
            resetGame();
        });
        // HaftayÄ± Bitir butonu olay dinleyicisi
        endWeekBtn.addEventListener('click', () => {
            endWeek();
        });
        // Pencere boyutu deÄŸiÅŸtiÄŸinde canvas'Ä± yeniden boyutlandÄ±r
        window.addEventListener('resize', resizeCanvas);
        // Ä°lk yÃ¼kleme
        initTheme();
        resetGame(); // resetGame iÃ§inde resizeCanvas ve updateGameStats zaten Ã§aÄŸrÄ±lÄ±yor.
        showScreen('main-screen'); // Ä°lk ekranÄ± gÃ¶ster
    </script>
</body>
</html>
