<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ulus SimÃ¼latÃ¶rÃ¼</title>
    <style>
        :root {
            --bg-color: #ecf0f1;
            --container-bg: #fff;
            --text-color: #2c3e50;
            --primary-color: #3498db;
            --secondary-color: #1abc9c;
            --danger-color: #e74c3c;
            --warning-color: #f39c12;
            --success-color: #2ecc71;
            --panel-bg: #f5f7fa;
            --border-color: #dfe4ea;
            --accent-color: #5D5CDE;
            --header-color: #1abc9c;
            --input-bg: #ecf0f1;
            --tab-active-color: #5D5CDE;
        }

        .dark {
            --bg-color: #181818;
            --container-bg: #2c3e50;
            --text-color: #ecf0f1;
            --primary-color: #5D5CDE;
            --secondary-color: #1abc9c;
            --danger-color: #e74c3c;
            --warning-color: #f39c12;
            --success-color: #2ecc71;
            --panel-bg: #34495e;
            --border-color: #4e6a83;
            --header-color: #1abc9c;
            --input-bg: #4e6a83;
            --tab-active-color: #5D5CDE;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            box-sizing: border-box;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .game-container {
            background-color: var(--container-bg);
            border-radius: 12px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
            padding: 20px;
            width: 95%;
            max-width: 1200px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            transition: all 0.3s ease;
        }

        h1 {
            text-align: center;
            color: var(--header-color);
            margin-bottom: 20px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        /* Modal stil */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background-color: var(--container-bg);
            margin: 15% auto;
            padding: 30px;
            border-radius: 12px;
            width: 80%;
            max-width: 500px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }

        .modal input {
            padding: 12px;
            font-size: 16px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            margin: 10px;
            width: 200px;
            background-color: var(--input-bg);
            color: var(--text-color);
        }

        .modal button {
            padding: 12px 24px;
            font-size: 16px;
            background: linear-gradient(135deg, var(--accent-color), #4c4cb8);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin: 10px;
        }

        /* Sekme Navigasyonu */
        .tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 10px;
            gap: 10px;
            flex-wrap: wrap;
        }

        .tab-btn {
            background: linear-gradient(135deg, var(--primary-color), #2980b9);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px 8px 0 0;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
            flex-grow: 1;
            min-width: 120px;
            position: relative;
            overflow: hidden;
        }

        .tab-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .tab-btn:hover::before {
            left: 100%;
        }

        @media (max-width: 768px) {
            .tab-btn {
                min-width: 90px;
                padding: 10px 12px;
                font-size: 0.9em;
            }
        }

        .tab-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .tab-btn.active {
            background: linear-gradient(135deg, var(--tab-active-color), #4c4cb8);
            font-weight: bold;
            border-bottom: 3px solid var(--tab-active-color);
            transform: translateY(0);
            box-shadow: 0 2px 8px rgba(93, 92, 222, 0.3);
        }

        /* TÃ¼m ekranlarÄ± gizle */
        .game-screen {
            display: none;
            background-color: var(--container-bg);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
            min-height: 500px;
            overflow-y: auto;
            transition: all 0.3s ease;
        }

        /* Ana oyun ekranÄ±nÄ±n dÃ¼zenini korumak iÃ§in */
        #main-screen {
            display: grid;
            grid-template-columns: 1fr 1.5fr;
            grid-template-rows: auto 1fr;
            gap: 20px;
            grid-template-areas:
                "stats actions"
                "log canvas";
        }

        @media (max-width: 768px) {
            #main-screen {
                grid-template-columns: 1fr;
                grid-template-areas:
                    "stats"
                    "actions"
                    "log"
                    "canvas";
            }

            .game-container {
                padding: 15px;
                width: 98%;
            }
        }

        #main-screen.active {
            display: grid;
        }

        .stats-panel {
            grid-area: stats;
            background: linear-gradient(135deg, var(--panel-bg), rgba(255,255,255,0.05));
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid var(--secondary-color);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .stats-panel p {
            margin: 10px 0;
            font-size: 1.05em;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .stats-panel span {
            font-weight: bold;
            color: var(--accent-color);
        }

        .actions-panel {
            grid-area: actions;
            background: linear-gradient(135deg, var(--panel-bg), rgba(255,255,255,0.05));
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid var(--warning-color);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .actions-panel h2 {
            color: var(--warning-color);
            margin-top: 0;
            margin-bottom: 15px;
        }

        .action-category {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px dashed var(--border-color);
        }

        .action-category:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .action-category h3 {
            color: var(--warning-color);
            margin-top: 0;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        button {
            background: linear-gradient(135deg, var(--primary-color), #2980b9);
            color: white;
            border: none;
            padding: 10px 15px;
            margin: 5px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.95em;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        button:hover::before {
            left: 100%;
        }

        button:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        button:active {
            transform: translateY(0);
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }

        button:disabled {
            background: #7f8c8d;
            cursor: not-allowed;
            opacity: 0.7;
            transform: none;
            box-shadow: none;
        }

        button:disabled::before {
            display: none;
        }

        .log-panel {
            grid-area: log;
            background: linear-gradient(135deg, var(--panel-bg), rgba(255,255,255,0.05));
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #9b59b6;
            overflow-y: auto;
            max-height: 280px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .log-panel h2 {
            color: #9b59b6;
            margin-top: 0;
            margin-bottom: 15px;
        }

        #game-log {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        #game-log li {
            background-color: var(--container-bg);
            padding: 8px 12px;
            margin-bottom: 5px;
            border-radius: 4px;
            font-size: 0.9em;
            border-left: 3px solid transparent;
            transition: all 0.3s ease;
        }

        #game-log li:hover {
            background-color: var(--panel-bg);
            transform: translateX(2px);
        }

        #game-log li.daily { 
            font-style: italic;
            color: var(--accent-color);
            opacity: 0.8;
            font-size: 0.85em;
            border-left: 3px solid var(--accent-color);
            padding-left: 10px;
        }

        .critical-alert {
            animation: pulse 2s infinite;
            background: linear-gradient(135deg, var(--danger-color), #c0392b) !important;
            color: white !important;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        #gameCanvas {
            grid-area: canvas;
            background-color: var(--panel-bg);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            width: 100%;
            height: 220px;
            box-shadow: inset 0 2px 8px rgba(0,0,0,0.1);
        }

        /* Yeni EkranlarÄ±n Genel Stili */
        .game-screen h2 {
            color: var(--warning-color); 
            margin-bottom: 20px;
            text-align: center;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .game-screen h3 {
            color: var(--secondary-color);
            margin-top: 20px;
            margin-bottom: 10px;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 8px;
        }

        .game-screen ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .game-screen li {
            background: linear-gradient(135deg, var(--panel-bg), rgba(255,255,255,0.02));
            padding: 12px 15px;
            margin-bottom: 8px;
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1.05em;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
        }

        .game-screen li:hover {
            transform: translateX(2px);
            border-left: 3px solid var(--accent-color);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .game-screen li div { 
            display: flex;
            gap: 5px;
            flex-wrap: wrap; 
        }

        .game-screen .cabinet-actions,
        .game-screen .parliament-propose,
        .game-screen .security-actions,
        .game-screen .foreign-actions,
        .game-screen .opposition-actions,
        .game-screen .reports-actions,
        .game-screen .infrastructure-actions { 
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
            justify-content: center; 
            margin-bottom: 15px;
        }

        .game-screen input[type="text"],
        .game-screen input[type="number"],
        .game-screen select {
            padding: 10px;
            border-radius: 6px;
            border: 2px solid var(--border-color);
            background-color: var(--input-bg);
            color: var(--text-color);
            font-size: 1em;
            flex-grow: 1;
            min-width: 150px;
            transition: all 0.3s ease;
        }

        .game-screen input:focus,
        .game-screen select:focus {
            border-color: var(--accent-color);
            box-shadow: 0 0 8px rgba(93, 92, 222, 0.3);
            outline: none;
        }

        .flex-row {
            display: flex;
            gap: 10px;
            align-items: center;
            margin: 10px 0;
            flex-wrap: wrap;
        }

        .input-with-buttons {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .input-with-buttons input {
            width: 100px;
            text-align: center;
        }

        .input-with-buttons button {
            padding: 8px 12px;
            font-size: 1em;
            min-width: 40px;
        }

        .minister-advice {
            background: linear-gradient(135deg, var(--panel-bg), rgba(255,255,255,0.05));
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid var(--accent-color);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .minister-advice h3 {
            margin-top: 0;
            color: var(--accent-color);
        }

        .policy-slider {
            margin: 15px 0;
        }

        .policy-slider-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px;
        }

        .policy-value {
            font-weight: bold;
            color: var(--accent-color);
        }

        .slider-container {
            margin: 15px 0;
        }

        .slider-container label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .slider-container input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: var(--panel-bg);
            outline: none;
            -webkit-appearance: none;
            transition: all 0.3s ease;
        }

        .slider-container input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent-color), #4c4cb8);
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }

        .slider-container input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.2);
            box-shadow: 0 4px 12px rgba(93, 92, 222, 0.4);
        }

        /* Dark Mode Toggle */
        .theme-toggle {
            position: absolute;
            top: 15px;
            right: 15px;
            background: linear-gradient(135deg, var(--accent-color), #4c4cb8);
            border: none;
            cursor: pointer;
            font-size: 1.5rem;
            color: white;
            z-index: 100;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .theme-toggle:hover {
            transform: rotate(180deg) scale(1.1);
            box-shadow: 0 4px 12px rgba(93, 92, 222, 0.4);
        }

        /* Protesto stilleri */
        .protest-alert {
            background: linear-gradient(135deg, var(--warning-color), #e67e22);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            animation: shake 0.5s ease-in-out;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        /* Diplomatik davet stilleri */
        .diplomatic-invitation {
            background: linear-gradient(135deg, var(--primary-color), #2980b9);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            animation: slideIn 0.5s ease;
        }

        @media (max-width: 480px) {
            button {
                padding: 8px 12px;
                font-size: 0.85em;
                margin: 3px;
            }
            
            .stats-panel p, .actions-panel h3 {
                font-size: 0.95em;
            }

            .game-screen li div {
                justify-content: flex-start; 
            }
        }

        /* Animasyonlar */
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .game-screen.active {
            animation: slideIn 0.3s ease;
        }
    </style>
</head>
<body>
    <!-- Ä°sim Sorma Modal -->
    <div id="nameModal" class="modal">
        <div class="modal-content">
            <h2>ğŸ›ï¸ Ulus SimÃ¼latÃ¶rÃ¼'ne HoÅŸ Geldiniz!</h2>
            <p>Yeni bir Ã¼lkeyi yÃ¶netmek Ã¼zeresiniz. LiderliÄŸiniz tarihe nasÄ±l geÃ§ecek?</p>
            <input type="text" id="leaderNameInput" placeholder="Lider adÄ±nÄ±zÄ± girin" maxlength="20">
            <br>
            <button id="startGameBtn">Ãœlkeyi YÃ¶netmeye BaÅŸla!</button>
        </div>
    </div>

    <button id="theme-toggle" class="theme-toggle" aria-label="Toggle dark/light mode">ğŸŒ“</button>
    <div class="game-container">
        <h1 id="gameTitle">ğŸ›ï¸ Ulus SimÃ¼latÃ¶rÃ¼</h1>

        <div class="tabs">
            <button class="tab-btn active" data-tab="main-screen">ğŸ  Ana Ekran</button>
            <button class="tab-btn" data-tab="cabinet-screen">ğŸ‘¥ Kabine</button>
            <button class="tab-btn" data-tab="parliament-screen">ğŸ›ï¸ Meclis & Siyaset</button>
            <button class="tab-btn" data-tab="foreign-affairs-screen">ğŸŒ DÄ±ÅŸ Ä°liÅŸkiler</button>
            <button class="tab-btn" data-tab="security-screen">ğŸ›¡ï¸ GÃ¼venlik & Ordu</button>
            <button class="tab-btn" data-tab="reports-screen">ğŸ“Š Raporlar & Zaman</button>
        </div>

        <div id="main-screen" class="game-screen active">
            <div class="stats-panel">
                <p>ğŸ“… Hafta: <span id="current-week">1</span> (GÃ¼n: <span id="current-day-of-week">1</span>)</p>
                <p>ğŸ‘¤ Lider: <span id="leader-name">-</span></p>
                <p>ğŸ‘¥ NÃ¼fus: <span id="population">10,000,000</span></p>
                <p>ğŸ’° GSYÄ°H: $<span id="gdp">1,000,000,000</span></p>
                <p>ğŸ“ˆ Enflasyon: <span id="inflation">2</span>%</p>
                <p>ğŸ˜Š Halk Memnuniyeti: <span id="satisfaction">70</span>%</p>
                <p>ğŸ’µ BÃ¼tÃ§e: $<span id="budget">100,000,000</span></p>
                <p>ğŸ¦ Vergi OranÄ±: <span id="tax-rate">10</span>%</p>
                <p>ğŸ›ï¸ HÃ¼kÃ¼met Tipi: <span id="government-type-display">Demokrasi</span></p>
                <p>âš–ï¸ Siyasi Ä°stikrar: <span id="political-stability">70</span>%</p>
                <p>ğŸ—ï¸ AltyapÄ± Seviyesi: <span id="infrastructure-level-display">50</span>/100</p> 
                <p>ğŸŒ DÄ±ÅŸ Ä°liÅŸkiler Skoru: <span id="foreign-relations-score">50</span></p>
                <p>âš”ï¸ Ordu BÃ¼yÃ¼klÃ¼ÄŸÃ¼: <span id="army-size-display">50000</span></p>
                <p>ğŸ“º Medya Ã–zgÃ¼rlÃ¼ÄŸÃ¼: <span id="media-freedom-display">7</span>/10</p>
                <p>ğŸš¨ SuÃ§ OranÄ±: <span id="crime-rate-main">5</span>%</p>
            </div>

            <div class="actions-panel">
                <h2>âš¡ Kararlar</h2>
                <div class="action-category">
                    <h3>ğŸ¦ Vergi AyarlarÄ±</h3>
                    <div class="slider-container">
                        <label for="tax-slider">Vergi OranÄ±: <span id="tax-slider-value">10</span>%</label>
                        <input type="range" id="tax-slider" min="5" max="30" step="0.1" value="10">
                    </div>
                    <button id="apply-tax">Vergi OranÄ±nÄ± Uygula</button>
                </div>
                
                <div class="action-category">
                    <h3>ğŸ’¼ Ekonomi</h3>
                    <div class="flex-row">
                        <label for="economy-investment">Ekonomiye YatÄ±rÄ±m ($M):</label>
                        <div class="input-with-buttons">
                            <button id="decrease-economy-investment">-</button>
                            <input type="number" id="economy-investment" value="10" min="1" max="100">
                            <button id="increase-economy-investment">+</button>
                        </div>
                        <button id="invest-economy">YatÄ±rÄ±m Yap</button>
                    </div>
                </div>
                
                <div class="action-category">
                    <h3>ğŸ¥ Sosyal Politikalar</h3>
                    <div class="flex-row">
                        <label for="education-investment">EÄŸitime YatÄ±rÄ±m ($M):</label>
                        <div class="input-with-buttons">
                            <button id="decrease-education-investment">-</button>
                            <input type="number" id="education-investment" value="5" min="1" max="50">
                            <button id="increase-education-investment">+</button>
                        </div>
                        <button id="invest-education">YatÄ±rÄ±m Yap</button>
                    </div>
                     <div class="flex-row">
                        <label for="health-investment">SaÄŸlÄ±ÄŸa YatÄ±rÄ±m ($M):</label>
                        <div class="input-with-buttons">
                            <button id="decrease-health-investment">-</button>
                            <input type="number" id="health-investment" value="7" min="1" max="50">
                            <button id="increase-health-investment">+</button>
                        </div>
                        <button id="invest-health">YatÄ±rÄ±m Yap</button>
                    </div>
                    <div class="flex-row">
                        <label for="culture-investment">KÃ¼ltÃ¼re YatÄ±rÄ±m ($M):</label>
                        <div class="input-with-buttons">
                            <button id="decrease-culture-investment">-</button>
                            <input type="number" id="culture-investment" value="3" min="1" max="30">
                            <button id="increase-culture-investment">+</button>
                        </div>
                        <button id="promote-culture">YatÄ±rÄ±m Yap</button>
                    </div>
                    <button id="declare-holiday">ğŸ‰ Yeni Tatil Ä°lan Et ($2M)</button>
                </div>

                 <div class="action-category">
                    <h3>ğŸ—ï¸ AltyapÄ± ve KalkÄ±nma</h3> 
                    <div class="infrastructure-actions">
                        <button id="invest-transportation-btn">ğŸš— UlaÅŸÄ±m AÄŸÄ±na YatÄ±rÄ±m ($30M - 4 Hafta)</button>
                        <button id="invest-energy-btn">âš¡ Enerji Åebekesi ($40M - 6 Hafta)</button>
                        <button id="build-hospitals-btn">ğŸ¥ Hastane Ä°nÅŸa Et ($25M)</button>
                        <button id="build-schools-btn">ğŸ« Okul Ä°nÅŸa Et ($20M)</button>
                    </div>
                </div>

                 <div class="action-category">
                    <h3>ğŸŒ± Yeni Politikalar</h3>
                    <button id="invest-green-energy">â™»ï¸ YeÅŸil Enerjiye YatÄ±rÄ±m ($20M)</button>
                    <button id="develop-defense-industry">ğŸ”§ Savunma Sanayii GeliÅŸtir ($50M)</button>
                    <button id="disaster-preparation-btn">ğŸŒªï¸ Afet HazÄ±rlÄ±ÄŸÄ± ($15M)</button>
                    <button id="anti-corruption-campaign">âš–ï¸ Yolsuzlukla MÃ¼cadele ($8M)</button>
                </div>
                <button id="end-week-btn">â­ï¸ HaftayÄ± Bitir</button>
            </div>

            <div class="log-panel">
                <h2>ğŸ“œ Olay GÃ¼nlÃ¼ÄŸÃ¼</h2>
                <ul id="game-log"></ul>
            </div>

            <canvas id="gameCanvas"></canvas>
        </div>

        <div id="cabinet-screen" class="game-screen">
            <h2>ğŸ‘¥ Kabine YÃ¶netimi</h2>
            <p>Mevcut Kabine Ãœyeleri:</p>
            <ul id="cabinet-list"></ul>
            <div class="minister-advice" id="cabinet-advice">
                <h3>ğŸ“‹ Bakan RaporlarÄ±</h3>
                <div id="economy-minister-advice"><p><strong>ğŸ’¼ Ekonomi BakanÄ±:</strong> <span id="economy-advice-text">...</span></p></div>
                <div id="education-minister-advice"><p><strong>ğŸ“ EÄŸitim BakanÄ±:</strong> <span id="education-advice-text">...</span></p></div>
                <div id="health-minister-advice"><p><strong>ğŸ¥ SaÄŸlÄ±k BakanÄ±:</strong> <span id="health-advice-text">...</span></p></div>
                <div id="foreign-minister-advice"><p><strong>ğŸŒ DÄ±ÅŸiÅŸleri BakanÄ±:</strong> <span id="foreign-advice-text">...</span></p></div>
                <div id="interior-minister-advice"><p><strong>ğŸ›ï¸ Ä°Ã§iÅŸleri BakanÄ±:</strong> <span id="interior-advice-text">...</span></p></div>
                <div id="justice-minister-advice"><p><strong>âš–ï¸ Adalet BakanÄ±:</strong> <span id="justice-advice-text">...</span></p></div>
                <div id="defense-minister-advice"><p><strong>âš”ï¸ Savunma BakanÄ±:</strong> <span id="defense-advice-text">...</span></p></div>
            </div>
            <h3>ğŸ‘¤ Bakan AtamalarÄ± / DeÄŸiÅŸiklikleri</h3>
            <div class="cabinet-actions">
                <select id="minister-type-select">
                    <option value="economy">ğŸ’¼ Ekonomi</option> 
                    <option value="education">ğŸ“ EÄŸitim</option> 
                    <option value="health">ğŸ¥ SaÄŸlÄ±k</option>
                    <option value="foreign">ğŸŒ DÄ±ÅŸiÅŸleri</option> 
                    <option value="interior">ğŸ›ï¸ Ä°Ã§iÅŸleri</option> 
                    <option value="justice">âš–ï¸ Adalet</option>
                    <option value="defense">âš”ï¸ Savunma</option>
                </select>
                <input type="text" id="minister-name-input" placeholder="Yeni Bakan AdÄ±">
                <button id="appoint-minister-btn">Bakan Ata / DeÄŸiÅŸtir ($500K)</button>
            </div>
            
            <div id="protest-management" style="display: none;">
                <h3>ğŸš¨ Protesto YÃ¶netimi</h3>
                <div id="current-protests"></div>
                <div class="opposition-actions">
                    <button id="negotiate-protesters">ğŸ¤ Protestocularla MÃ¼zakere Et</button>
                    <button id="ignore-protests">ğŸ™„ ProtestolarÄ± GÃ¶rmezden Gel</button>
                    <button id="disperse-protests-peaceful">ğŸ‘® BarÄ±ÅŸÃ§Ä±l MÃ¼dahale</button>
                    <button id="disperse-protests-force">âš¡ GÃ¼Ã§le DaÄŸÄ±t</button>
                </div>
            </div>
        </div>

        <div id="parliament-screen" class="game-screen">
            <h2>ğŸ›ï¸ Meclis & Siyaset</h2>
            <p>ğŸ›ï¸ HÃ¼kÃ¼met Tipi: <span id="government-type-parliament">Demokrasi</span></p>
            <p>ğŸ“Š Meclis DesteÄŸi: <span id="parliament-support"></span>%</p>
            <p>ğŸ”´ Muhalefet GÃ¼cÃ¼: <span id="opposition-strength-display"></span>%</p>
            
            <h3>ğŸ“º Medya & Ä°fade Ã–zgÃ¼rlÃ¼ÄŸÃ¼</h3>
            <div class="policy-slider">
                <div class="policy-slider-header">
                    <label for="media-freedom-slider">Medya Ã–zgÃ¼rlÃ¼ÄŸÃ¼ PolitikasÄ± (Hedef: <span id="media-freedom-target-value">7</span>/10)</label>
                    <span class="policy-value" id="media-freedom-value-display">7</span>
                </div>
                <input type="range" id="media-freedom-slider" min="0" max="10" value="7">
                <button id="apply-media-policy">Medya PolitikasÄ±nÄ± GÃ¼ncelle</button>
            </div>
            <div class="opposition-actions">
                 <button id="start-propaganda-btn">ğŸ“¢ Devlet PropagandasÄ± BaÅŸlat ($5M)</button>
                 <button id="apply-censorship-btn">ğŸš« SansÃ¼r Uygula</button>
            </div>
            
            <h3>ğŸ“œ Yasama PolitikalarÄ±</h3>
            <div class="policy-slider">
                <div class="policy-slider-header">
                    <h4>ğŸ¥ Sosyal Politikalar</h4>
                    <span class="policy-value" id="social-policy-value">5</span>
                </div>
                <input type="range" id="social-policy-slider" min="1" max="10" value="5">
                <button id="apply-social-policy">Uygula</button>
            </div>
            <div class="policy-slider">
                <div class="policy-slider-header">
                    <h4>ğŸ’¼ Ekonomi PolitikalarÄ±</h4>
                    <span class="policy-value" id="economic-policy-value">5</span>
                </div>
                <input type="range" id="economic-policy-slider" min="1" max="10" value="5">
                <button id="apply-economic-policy">Uygula</button>
            </div>
            
            <h3>ğŸ“‹ GÃ¼ndemdeki Yasalar / Talepler</h3>
            <ul id="parliament-agenda"></ul>
            
            <h3>ğŸ’­ Sizin Teklifleriniz</h3>
            <div class="parliament-propose">
                <input type="text" id="proposal-input" placeholder="Yeni yasa teklifi">
                <button id="propose-law-btn">ğŸ“ Yasa Teklif Et</button>
            </div>
            
            <h3>ğŸ¤ Muhalefet Ä°liÅŸkileri</h3>
            <div class="opposition-actions">
                <button id="meet-opposition-closed-btn">ğŸšª Muhalefetle KapalÄ± GÃ¶rÃ¼ÅŸ ($500K)</button>
                <button id="meet-opposition-open-btn">ğŸ“º Muhalefetle AÃ§Ä±k GÃ¶rÃ¼ÅŸ ($200K)</button>
            </div>
            
            <h3>âš ï¸ Radikal Kararlar</h3>
            <div class="parliament-propose">
                <button id="call-elections">ğŸ—³ï¸ Erken SeÃ§im ($10M)</button>
                <button id="declare-dictatorship">ğŸ‘‘ DiktatÃ¶rlÃ¼k Ä°lan Et</button>
                <button id="dissolve-parliament-btn">ğŸ’¥ Meclisi Feshet</button>
            </div>
        </div>

        <div id="foreign-affairs-screen" class="game-screen">
            <h2>ğŸŒ DÄ±ÅŸ Ä°liÅŸkiler & Zirveler</h2>
            <p>ğŸŒ Genel DÄ±ÅŸ Ä°liÅŸkiler PuanÄ±: <span id="foreign-relations-display"></span></p>
            
            <div class="policy-slider">
                <div class="policy-slider-header">
                    <h3>ğŸ¤ Diplomatik YaklaÅŸÄ±m</h3>
                    <span class="policy-value" id="diplomatic-approach-value">5</span>
                </div>
                <input type="range" id="diplomatic-approach-slider" min="1" max="10" value="5">
                <button id="apply-diplomatic-approach">Uygula</button>
            </div>
            
            <h3>ğŸ—ºï¸ Ãœlkelerle Ä°liÅŸkiler</h3>
            <ul id="country-relations-list"></ul>
            
            <h3>ğŸ›ï¸ Zirve YÃ¶netimi</h3>
            <div class="foreign-actions">
                <button id="create-summit-btn">ğŸª Zirve DÃ¼zenle ($15M)</button>
            </div>
            <p>Zirveye davet edilecek Ã¼lkeler (En fazla 5):</p>
            <ul id="summit-invitation-list"></ul>
            <div class="foreign-actions">
                <button id="send-summit-invitations-btn" disabled>ğŸ“¤ Davetleri GÃ¶nder</button>
            </div>
            
            <h3>ğŸ“¨ Gelen Davetler / Olaylar</h3>
            <ul id="foreign-events-list"></ul>
            
            <h3>ğŸŒ Genel Diplomatik Eylemler</h3>
            <div class="foreign-actions">
                <button id="global-summit-btn">ğŸŒ UluslararasÄ± Zirveye KatÄ±l ($10M)</button>
                <button id="sign-trade-deal">ğŸ¤ Ticaret AnlaÅŸmasÄ± Ä°mzala ($3M)</button>
                <button id="improve-relations">â¤ï¸ DÄ±ÅŸ Ä°liÅŸkileri GeliÅŸtir ($2M)</button>
                <button id="economic-sanctions-btn">ğŸ’° Ekonomik YaptÄ±rÄ±m Uygula ($5M)</button>
                <button id="join-nato-btn">ğŸ›¡ï¸ NATO'ya KatÄ±lÄ±m BaÅŸvurusu ($20M)</button>
                <button id="declare-war">âš”ï¸ SavaÅŸ Ä°lan Et</button>
            </div>
        </div>

        <div id="security-screen" class="game-screen">
             <h2>ğŸ›¡ï¸ GÃ¼venlik & Ordu</h2>
            <p>ğŸš¨ SuÃ§ OranÄ±: <span id="crime-rate">5</span>%</p>
            <p>ğŸ‘® HalkÄ±n GÃ¼venlik AlgÄ±sÄ±: <span id="security-perception">75</span>%</p>
            <p>âš”ï¸ Ordu BÃ¼yÃ¼klÃ¼ÄŸÃ¼: <span id="army-size-security">50000</span></p>
            <p>ğŸ’ª Askeri GÃ¼Ã§ Endeksi: <span id="military-strength-index">50</span></p>
            <p>ğŸ–ï¸ Ordu Sadakati: <span id="army-loyalty-display">YÃ¼ksek</span></p>
            
            <div class="policy-slider">
                <div class="policy-slider-header">
                    <h3>ğŸ›¡ï¸ Ä°Ã§ GÃ¼venlik Seviyesi</h3>
                    <span class="policy-value" id="security-level-value">5</span>
                </div>
                <input type="range" id="security-level-slider" min="1" max="10" value="5">
                <button id="apply-security-level">Uygula</button>
            </div>
            
            <h3>ğŸ‘® Emniyet / Adalet KararlarÄ±</h3>
            <div class="flex-row">
                <label for="police-budget">Polis BÃ¼tÃ§esi ($M):</label>
                <div class="input-with-buttons">
                    <button id="decrease-police-budget">-</button>
                    <input type="number" id="police-budget" value="3" min="1" max="20">
                    <button id="increase-police-budget">+</button>
                </div>
                <button id="increase-police-budget-btn">Uygula</button>
            </div>
            <div class="security-actions">
                <button id="reform-justice">âš–ï¸ Adalet Reformu ($5M)</button>
                <button id="surveillance-program">ğŸ“¹ GÃ¶zetim ProgramÄ± ($4M)</button>
                <button id="crackdown-dissent">ğŸ‘Š Muhalefeti BastÄ±r ($2M+)</button>
                <button id="establish-secret-police-btn">ğŸ•µï¸ Gizli Polis TeÅŸkilatÄ± ($10M)</button>
            </div>
            
            <h3>âš”ï¸ Askeri Kararlar</h3>
            <div class="flex-row">
                <label for="recruit-soldiers-input">Asker AlÄ±mÄ± (x1000):</label>
                <div class="input-with-buttons">
                    <button id="decrease-recruits">-</button>
                    <input type="number" id="recruit-soldiers-input" value="5" min="1" max="50">
                    <button id="increase-recruits">+</button>
                </div>
                <button id="recruit-soldiers-btn">Asker Al ($1M/bin)</button>
            </div>
            <div class="security-actions">
                <button id="plan-war-btn">ğŸ“‹ SavaÅŸ Planla ($5M)</button>
                <button id="military-exercise-btn">ğŸ¯ Askeri Tatbikat ($10M+)</button>
                <button id="military-council-meeting-btn">ğŸ–ï¸ Askeri Åura ToplantÄ±sÄ± ($1M)</button>
                <button id="develop-nuclear-btn">â˜¢ï¸ NÃ¼kleer Program BaÅŸlat ($100M)</button>
                <button id="cyber-warfare-btn">ğŸ’» Siber SavaÅŸ Birimi ($30M)</button>
            </div>
        </div>

        <div id="reports-screen" class="game-screen">
            <h2>ğŸ“Š Raporlar & Zaman YÃ¶netimi</h2>
            <p>ğŸ“… Mevcut Tarih: Hafta <span id="report-current-week">1</span>, GÃ¼n <span id="report-current-day">1</span></p>
            <div class="reports-actions">
                <button id="advance-day-btn">â­ï¸ GÃ¼nÃ¼ Ä°lerlet (1 GÃ¼n)</button>
                <button id="complete-week-reports-btn" disabled>â© HaftayÄ± Tamamla</button>
            </div>
            <hr>
            
            <div class="minister-advice">
                <h3>ğŸ’¼ Ekonomi BakanlÄ±ÄŸÄ± Raporu</h3> 
                <p>ğŸ“ˆ GSYÄ°H DeÄŸiÅŸimi (HaftalÄ±k): <span id="gdp-change-report-display">-</span></p> 
                <p>ğŸ“Š Enflasyon DeÄŸiÅŸimi (HaftalÄ±k): <span id="inflation-change-report-display">-</span></p> 
                <p id="economy-report-inflation">ğŸ“ˆ Enflasyon Analizi: <span id="inflation-analysis">...</span></p> 
                <p id="economy-report-gdp">ğŸ’° GSYÄ°H Durumu: <span id="gdp-analysis">...</span></p> 
                <p id="economy-report-advice">ğŸ’¡ Ã–neriler: <span id="economy-recommendations">...</span></p> 
            </div>
            
            <div class="minister-advice">
                <h3>ğŸ¥ Sosyal Politikalar Raporu</h3> 
                <p>ğŸ“ EÄŸitim Kalitesi: <span id="education-quality-report">...</span></p> 
                <p>ğŸ¥ SaÄŸlÄ±k Hizmetleri Kalitesi: <span id="health-quality-report">...</span></p> 
                <p>ğŸ‰ Ulusal Bayram SayÄ±sÄ±: <span id="holiday-count-report">...</span></p> 
                <p>ğŸ’¡ Ã–neriler: <span id="social-recommendations">...</span></p> 
            </div>
            
            <div class="minister-advice">
                <h3>ğŸ›ï¸ Siyasi Rapor</h3> 
                <p>ğŸ‘ HÃ¼kÃ¼met DesteÄŸi: <span id="government-support-report">...</span>%</p> 
                <p>ğŸ›ï¸ Meclis DesteÄŸi: <span id="parliament-support-report">...</span>%</p> 
                <p>âš–ï¸ Siyasi Ä°stikrar: <span id="political-stability-report">...</span>%</p> 
                <p>ğŸ“º Medya Ã–zgÃ¼rlÃ¼ÄŸÃ¼: <span id="media-freedom-report">...</span>/10</p> 
                <p>ğŸ’¡ Ã–neriler: <span id="political-recommendations">...</span></p> 
            </div>
            
            <div class="minister-advice">
                <h3>âš”ï¸ Askeri Durum Raporu</h3> 
                <p>ğŸ–ï¸ Ordu HazÄ±rlÄ±k Seviyesi: <span id="army-readiness-report">...</span></p> 
                <p>ğŸ¯ Ordu Sadakati: <span id="army-loyalty-report">...</span></p> 
                <p>ğŸ“‹ Genelkurmay DeÄŸerlendirmesi: <span id="military-assessment-report">...</span></p> 
            </div>
        </div>

        <div id="game-over-screen" class="game-screen">
            <h1>ğŸ¯ Oyun Bitti!</h1>
            <p id="game-over-reason"></p>
            <p>ğŸ“… Son Hafta: <span id="final-week"></span></p>
            <p>ğŸ‘¥ Son NÃ¼fus: <span id="final-population"></span></p>
            <p>ğŸ’° Son GSYÄ°H: <span id="final-gdp"></span></p>
            <button id="restart-game-btn">ğŸ”„ Tekrar Oyna</button>
        </div>

    </div>

    <script>
        // --- Oyun DeÄŸiÅŸkenleri ---
        let leaderName = '';
        let week = 1;
        let dayOfWeek = 1; 
        let isAtWar = false;
        let governmentType = 'Demokrasi'; 
        let mediaFreedom = 7; 
        let mediaInfluence = 60; 
        let propagandaEffectWeeks = 0; 
        let infrastructureLevel = 50; 
        let transportationInvestmentWeeks = 0; 
        let energyInvestmentWeeks = 0;
        let naturalDisasterPreparedness = 30;
        let currentProtests = [];
        let protestIntensity = 0;
        let lastDecisionImpact = { type: '', value: 0 }; // Son kararÄ±n etkisini takip etmek iÃ§in

        let population = 10000000;
        let gdp = 1000000000;
        let inflation = 2; 
        let satisfaction = 70; 
        let budget = 100000000; 
        let taxes = 10; 
        let educationSpending = 0; 
        let healthSpending = 0; 
        let cultureSpending = 0; 
        let socialSecuritySpending = 0;
        let unemploymentSupport = 0;
        let crimeRate = 5; 
        let securityPerception = 75; 
        let politicalStability = 70; 
        let parliamentSupport = 70; 
        let foreignRelationsScore = 50; 
        let nationalHolidays = 0; 
        let armySize = 50000; 
        let militaryStrengthIndex = 50; 
        let armyUpkeepCostPerSoldier = 50; 
        let armyLoyalty = 80; 

        let socialPolicyLevel = 5; 
        let economicPolicyLevel = 5; 
        let diplomaticApproachLevel = 5; 
        let securityLevel = 5; 

        const historicalData = {
            weeks: [], gdp: [], satisfaction: [], inflation: [], politicalStability: [], crimeRate: []
        };
        
        let weeklyBudgetChange = 0; 
        let weeklySatisfactionChange = 0; 
        let weeklyGdpChangeFactor = 1;
        let weeklyInflationChange = 0; 
        let weeklyPopulationChangeFactor = 1; 
        let weeklyForeignRelationsChange = 0;
        let weeklyCrimeRateChange = 0; 
        let weeklySecurityPerceptionChange = 0; 
        let weeklyMilitaryStrengthChange = 0;
        let weeklyPoliticalStabilityChange = 0; 
        let weeklyArmyLoyaltyChange = 0;
        let weeklyMediaFreedomChange = 0;
        let weeklyInfrastructureChange = 0; 

        // Rastgele TÃ¼rk isimleri
        const turkishNames = {
            male: ['Ahmet', 'Mehmet', 'Mustafa', 'Ali', 'Hasan', 'HÃ¼seyin', 'Ä°brahim', 'Ä°smail', 'Ã–mer', 'Yusuf', 'Murat', 'Kemal', 'ErdoÄŸan', 'Recep', 'Serkan', 'Emre', 'Burak', 'Cem', 'Deniz', 'Efe'],
            female: ['Fatma', 'AyÅŸe', 'Emine', 'Hatice', 'Zeynep', 'Elif', 'Sema', 'Dilek', 'Sevil', 'GÃ¼lay', 'PÄ±nar', 'Sibel', 'TÃ¼lay', 'Filiz', 'Serpil', 'GÃ¼lsÃ¼n', 'Aylin', 'Nesrin', 'Åule', 'Ã–zlem'],
            surname: ['YÄ±lmaz', 'Kaya', 'Demir', 'Åahin', 'Ã‡elik', 'Åahin', 'Ã–ztÃ¼rk', 'KÄ±lÄ±Ã§', 'Arslan', 'TaÅŸ', 'Aksoy', 'BarÄ±ÅŸ', 'DalkÄ±ran', 'ErdoÄŸan', 'GÃ¼ngÃ¶r', 'Korkmaz', 'Ã–zkan', 'DoÄŸan', 'Aslan', 'Polat']
        };

        const cabinet = {
            economy: { name: '', efficiency: 0.5, corruption: 0.1, satisfactionRating: 70 }, 
            education: { name: '', efficiency: 0.5, corruption: 0.1, satisfactionRating: 70 },
            health: { name: '', efficiency: 0.5, corruption: 0.1, satisfactionRating: 70 }, 
            foreign: { name: '', efficiency: 0.5, corruption: 0.1, satisfactionRating: 70 },
            interior: { name: '', efficiency: 0.5, corruption: 0.1, satisfactionRating: 70 }, 
            justice: { name: '', efficiency: 0.5, corruption: 0.1, satisfactionRating: 70 },
            defense: { name: '', efficiency: 0.5, corruption: 0.1, satisfactionRating: 70 } 
        };

        const countries = { 
            'Yunanistan': { relation: 40, tradeDeal: false, summitInvited: false, summitAccepted: false, militaryPower: 45 },
            'Bulgaristan': { relation: 55, tradeDeal: false, summitInvited: false, summitAccepted: false, militaryPower: 35 },
            'GÃ¼rcistan': { relation: 60, tradeDeal: true, summitInvited: false, summitAccepted: false, militaryPower: 30 },
            'Ermenistan': { relation: 20, tradeDeal: false, summitInvited: false, summitAccepted: false, militaryPower: 25 },
            'Azerbaycan': { relation: 75, tradeDeal: true, summitInvited: false, summitAccepted: false, militaryPower: 50 },
            'Ä°ran': { relation: 30, tradeDeal: false, summitInvited: false, summitAccepted: false, militaryPower: 65 },
            'Irak': { relation: 25, tradeDeal: false, summitInvited: false, summitAccepted: false, militaryPower: 40 },
            'Suriye': { relation: 15, tradeDeal: false, summitInvited: false, summitAccepted: false, militaryPower: 20 }, 
            'Rusya': { relation: 45, tradeDeal: false, summitInvited: false, summitAccepted: false, militaryPower: 90 },
            'Ukrayna': { relation: 50, tradeDeal: false, summitInvited: false, summitAccepted: false, militaryPower: 60 }
        };

        const parliamentAgenda = []; 
        let summitPlanned = false;
        let summitInvitationsSent = false;
        let pendingDiplomaticInvitations = []; // Gelen diplomatik davetler

        // DOM Elementleri
        const nameModal = document.getElementById('nameModal');
        const leaderNameInput = document.getElementById('leaderNameInput');
        const startGameBtn = document.getElementById('startGameBtn');
        const gameTitle = document.getElementById('gameTitle');
        const leaderNameDisplay = document.getElementById('leader-name');
        const themeToggleBtn = document.getElementById('theme-toggle');
        const tabButtons = document.querySelectorAll('.tab-btn');
        const gameScreens = document.querySelectorAll('.game-screen');
        const gameLogEl = document.getElementById('game-log');
        const gameCanvas = document.getElementById('gameCanvas');
        const ctx = gameCanvas ? gameCanvas.getContext('2d') : null;

        function generateRandomName() {
            const gender = Math.random() > 0.5 ? 'male' : 'female';
            const firstName = turkishNames[gender][Math.floor(Math.random() * turkishNames[gender].length)];
            const lastName = turkishNames.surname[Math.floor(Math.random() * turkishNames.surname.length)];
            return `${firstName} ${lastName}`;
        }

        function initTheme() {
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.documentElement.classList.add('dark');
                if(themeToggleBtn) themeToggleBtn.textContent = 'â˜€ï¸';
            } else {
                document.documentElement.classList.remove('dark');
                if(themeToggleBtn) themeToggleBtn.textContent = 'ğŸŒ™';
            }
            
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
                if (event.matches) {
                    document.documentElement.classList.add('dark');
                    if(themeToggleBtn) themeToggleBtn.textContent = 'â˜€ï¸';
                } else {
                    document.documentElement.classList.remove('dark');
                    if(themeToggleBtn) themeToggleBtn.textContent = 'ğŸŒ™';
                }
                drawCanvasStats();
            });
        }

        function showNameModal() {
            nameModal.style.display = 'block';
            leaderNameInput.focus();
        }

        function startGame() {
            const name = leaderNameInput.value.trim();
            if (name.length < 2) {
                alert('LÃ¼tfen en az 2 karakterlik bir isim girin!');
                return;
            }
            
            leaderName = name;
            nameModal.style.display = 'none';
            gameTitle.textContent = `ğŸ›ï¸ ${leaderName}'in Ãœlkesi`;
            if(leaderNameDisplay) leaderNameDisplay.textContent = leaderName;
            
            addLog(`ğŸ‰ ${leaderName}, Ã¼lkenizin yÃ¶netimini devraldÄ±nÄ±z! Tarih sizi nasÄ±l hatÄ±rlayacak?`, 'event');
            addLog('ğŸ“‹ Kabine Ã¼yeleriniz atanÄ±yor...', 'info');
            
            // Rastgele bakan isimleri ata
            for (const type in cabinet) {
                cabinet[type].name = generateRandomName();
                cabinet[type].efficiency = 0.4 + Math.random() * 0.4;
                cabinet[type].corruption = 0.05 + Math.random() * 0.25;
                cabinet[type].satisfactionRating = 60 + Math.random() * 30;
            }
            
            updateCabinetDisplay();
            updateGameStats();
        }
        
        function showScreen(screenId) {
            if (!gameScreens) return;
            
            gameScreens.forEach(screen => { 
                if(screen) screen.style.display = 'none'; 
            });
            
            const targetScreen = document.getElementById(screenId);
            if (targetScreen) {
                targetScreen.style.display = screenId === 'main-screen' ? 'grid' : 'block';
                targetScreen.classList.add('active');
            }

            if(tabButtons) {
                tabButtons.forEach(btn => {
                    if(btn) btn.classList.toggle('active', btn.dataset.tab === screenId);
                });
            }

            // Ekran geÃ§iÅŸlerinde gÃ¼ncelleme
            if (screenId === 'cabinet-screen') {
                updateCabinetDisplay();
                updateMinisterAdvice();
                checkProtests();
            } else if (screenId === 'foreign-affairs-screen') {
                updateForeignRelationsDisplay();
                updateSummitInvitationList();
                updateDiplomaticInvitations();
            } else if (screenId === 'parliament-screen') {
                updateParliamentDisplay();
            } else if (screenId === 'reports-screen') {
                updateReports();
            }
        }
        
        function addLog(message, type = 'info', isDaily = false) {
            if (!gameLogEl) return;
            
            const li = document.createElement('li');
            li.textContent = `[Hafta ${week}, GÃ¼n ${dayOfWeek}] ${message}`;
            
            if (isDaily) li.classList.add('daily');
            
            switch(type) {
                case 'warning': li.style.color = 'var(--warning-color)'; break;
                case 'danger': li.style.color = 'var(--danger-color)'; break;
                case 'success': li.style.color = 'var(--success-color)'; break;
                case 'event': li.style.color = 'var(--accent-color)'; li.style.fontWeight = 'bold'; break;
                default: li.style.color = 'var(--text-color)'; break;
            }
            
            // Kritik durumlar iÃ§in Ã¶zel stil
            if (message.includes('KRÄ°TÄ°K') || message.includes('UYARI') || message.includes('TEHLÄ°KE') || message.includes('PROTESTO') || message.includes('SUÃ‡') || message.includes('SKANDAL')) {
                li.classList.add('critical-alert');
            }
            
            gameLogEl.insertBefore(li, gameLogEl.firstChild);
            
            // En fazla 50 log tutma
            if (gameLogEl.children.length > 50) {
                gameLogEl.removeChild(gameLogEl.lastChild);
            }
        }

        function updateGameStats() {
            const currentWeekEl = document.getElementById('current-week');
            const currentDayOfWeekEl = document.getElementById('current-day-of-week');
            const populationEl = document.getElementById('population');
            const gdpEl = document.getElementById('gdp');
            const inflationEl = document.getElementById('inflation');
            const satisfactionEl = document.getElementById('satisfaction');
            const budgetEl = document.getElementById('budget');
            const taxRateEl = document.getElementById('tax-rate');
            const governmentTypeDisplayEl = document.getElementById('government-type-display');
            const mediaFreedomDisplayEl = document.getElementById('media-freedom-display');
            const politicalStabilityEl = document.getElementById('political-stability');
            const infrastructureLevelDisplayEl = document.getElementById('infrastructure-level-display');
            const foreignRelationsScoreEl = document.getElementById('foreign-relations-score');
            const armySizeDisplayEl = document.getElementById('army-size-display');
            const crimeRateMainEl = document.getElementById('crime-rate-main');
            
            if(currentWeekEl) currentWeekEl.textContent = week;
            if(currentDayOfWeekEl) currentDayOfWeekEl.textContent = dayOfWeek; 
            if(populationEl) populationEl.textContent = population.toLocaleString();
            if(gdpEl) gdpEl.textContent = gdp.toLocaleString();
            if(inflationEl) inflationEl.textContent = inflation.toFixed(1);
            if(satisfactionEl) satisfactionEl.textContent = satisfaction.toFixed(1);
            if(budgetEl) budgetEl.textContent = budget.toLocaleString();
            if(taxRateEl) taxRateEl.textContent = taxes.toFixed(1);
            if(governmentTypeDisplayEl) governmentTypeDisplayEl.textContent = governmentType; 
            if(mediaFreedomDisplayEl) mediaFreedomDisplayEl.textContent = `${mediaFreedom.toFixed(1)}/10`; 
            if(politicalStabilityEl) politicalStabilityEl.textContent = politicalStability.toFixed(1) + '%';
            if(infrastructureLevelDisplayEl) infrastructureLevelDisplayEl.textContent = `${infrastructureLevel.toFixed(0)}/100`; 
            if(foreignRelationsScoreEl) foreignRelationsScoreEl.textContent = foreignRelationsScore.toFixed(0);
            if(armySizeDisplayEl) armySizeDisplayEl.textContent = armySize.toLocaleString(); 
            if(crimeRateMainEl) crimeRateMainEl.textContent = crimeRate.toFixed(1);
            
            // GÃ¼venlik ekranÄ± gÃ¼ncellemeleri
            const crimeRateEl = document.getElementById('crime-rate');
            const securityPerceptionEl = document.getElementById('security-perception');
            const armySizeSecurityEl = document.getElementById('army-size-security');
            const militaryStrengthIndexEl = document.getElementById('military-strength-index');
            const armyLoyaltyDisplayEl = document.getElementById('army-loyalty-display');
            
            if(crimeRateEl) crimeRateEl.textContent = crimeRate.toFixed(1);
            if(securityPerceptionEl) securityPerceptionEl.textContent = securityPerception.toFixed(1);
            if(armySizeSecurityEl) armySizeSecurityEl.textContent = armySize.toLocaleString(); 
            if(militaryStrengthIndexEl) militaryStrengthIndexEl.textContent = militaryStrengthIndex.toFixed(0);
            if(armyLoyaltyDisplayEl) armyLoyaltyDisplayEl.textContent = getArmyLoyaltyStatus();
            
            drawCanvasStats();
        }

        function getArmyLoyaltyStatus() {
            return armyLoyalty >= 80 ? "Ã‡ok YÃ¼ksek" : 
                   armyLoyalty >= 60 ? "YÃ¼ksek" : 
                   armyLoyalty >= 40 ? "Orta" : "DÃ¼ÅŸÃ¼k";
        }

        function drawCanvasStats() {
            if (!gameCanvas || !ctx) return;
            
            ctx.clearRect(0, 0, gameCanvas.width, gameCanvas.height);
            
            const barHeight = 15; 
            const barWidth = Math.max(50, gameCanvas.width - 120); 
            const startX = 100; 
            let currentY = 15;
            const verticalSpacing = barHeight + 8;
            const textColor = getComputedStyle(document.documentElement).getPropertyValue('--text-color');
            const borderColor = getComputedStyle(document.documentElement).getPropertyValue('--border-color');
            
            ctx.font = '12px Arial';

            function drawBar(label, value, maxValue, colorFunc, showTrend = false) {
                ctx.fillStyle = textColor;
                ctx.fillText(label, 5, currentY + barHeight / 2 + 4);
                
                const fillWidth = Math.max(0, (value / maxValue) * barWidth);
                const baseColor = colorFunc(value, maxValue);
                ctx.fillStyle = baseColor;
                ctx.fillRect(startX, currentY, fillWidth, barHeight);
                
                // Trend gÃ¶stergesi
                if (showTrend && lastDecisionImpact.type === label) {
                    const trendColor = lastDecisionImpact.value > 0 ? '#2ecc71' : '#e74c3c';
                    ctx.fillStyle = trendColor;
                    ctx.fillRect(startX + fillWidth, currentY, 3, barHeight);
                }
                
                ctx.strokeStyle = borderColor;
                ctx.strokeRect(startX, currentY, barWidth, barHeight);
                
                ctx.fillStyle = textColor;
                const valueText = `${value.toFixed(0)}${maxValue === 100 || label.includes('%') ? '%' : ''}`;
                ctx.fillText(valueText, startX + barWidth + 3, currentY + barHeight / 2 + 4);
                
                currentY += verticalSpacing; 
            }

            drawBar('ğŸ˜Š Memnun.:', satisfaction, 100, (val) => val > 70 ? '#2ecc71' : val > 40 ? '#f39c12' : '#e74c3c', true);
            drawBar('ğŸ“ˆ Enflas.:', Math.min(inflation, 25), 25, (val, max) => val < 5 ? '#2ecc71' : val < 10 ? '#f39c12' : '#e74c3c', true);
            drawBar('ğŸŒ DÄ±ÅŸ Ä°lÅŸ.:', foreignRelationsScore, 100, (val) => val > 60 ? '#2ecc71' : val > 30 ? '#f39c12' : '#e74c3c', true);
            drawBar('ğŸš¨ SuÃ§ Orn.:', Math.min(crimeRate, 25), 25, (val, max) => val < 3 ? '#2ecc71' : val < 8 ? '#f39c12' : '#e74c3c', true);
            drawBar('âš–ï¸ Ä°stikrar:', politicalStability, 100, (val) => val > 60 ? '#2ecc71' : val > 30 ? '#f39c12' : '#e74c3c', true);
            drawBar('ğŸ—ï¸ AltyapÄ±:', infrastructureLevel, 100, (val) => val > 70 ? '#2ecc71' : val > 40 ? '#f39c12' : '#e74c3c', true);
        }

        function makeInvestment(name, amount, gdpFactorEffect, inflationEffect, satisfactionEffect, minister) {
            addLog(`ğŸ”„ ${name} yatÄ±rÄ±m planÄ± hazÄ±rlanÄ±yor...`, 'info');
            
            const cost = amount * 1000000;
            if (budget < cost) {
                addLog(`âŒ ${name} iÃ§in yeterli bÃ¼tÃ§e yok! Maliyet: $${cost.toLocaleString()}`, 'warning');
                return false;
            }
            
            budget -= cost; 
            let effectiveAmount = cost * (1 - minister.corruption * 0.7); 
            
            if(gdpFactorEffect) {
                weeklyGdpChangeFactor *= (1 + (effectiveAmount / (gdp||1) * gdpFactorEffect * minister.efficiency));
                lastDecisionImpact = { type: 'ğŸ’° GSYÄ°H', value: gdpFactorEffect * minister.efficiency };
            }
            if(inflationEffect) {
                weeklyInflationChange += (effectiveAmount / (gdp||1) * inflationEffect);
                lastDecisionImpact = { type: 'ğŸ“ˆ Enflas.:', value: -inflationEffect };
            }
            if(satisfactionEffect) {
                const satEffect = satisfactionEffect * (effectiveAmount / 10000000) * minister.efficiency;
                weeklySatisfactionChange += satEffect;
                lastDecisionImpact = { type: 'ğŸ˜Š Memnun.:', value: satEffect };
            }

            addLog(`âœ… ${name}'e $${amount}M yatÄ±rÄ±m yapÄ±ldÄ±. Bakan: ${minister.name} (Verimlilik:${(minister.efficiency*100).toFixed(0)}%, Yolsuzluk:${(minister.corruption*100).toFixed(0)}%)`, 'success');
            
            if (minister.corruption > 0.2 && Math.random() < minister.corruption*2) {
                let lostAmount = cost * minister.corruption * 0.5;
                budget -= lostAmount; 
                addLog(`ğŸš¨ YOLSUZLUK SKANDALI: Bakan ${minister.name}'in yolsuzluklarÄ± ortaya Ã§Ä±ktÄ±! $${(lostAmount/1000000).toFixed(1)}M kayboldu!`, 'danger');
                weeklySatisfactionChange -= 8; 
                weeklyPoliticalStabilityChange -= 10;
                weeklyInflationChange += 0.5; // Yolsuzluk enflasyonu artÄ±rÄ±r
                weeklyForeignRelationsChange -= 3; // UluslararasÄ± imaj zarar gÃ¶rÃ¼r
            }
            
            return true;
        }

        function triggerCrimeEvent() {
            const crimes = [
                {
                    title: "ğŸ¦ Banka Soygunu",
                    description: "Åehir merkezinde silahlÄ± banka soygunu!",
                    crimeIncrease: 0.3,
                    satisfactionLoss: 2,
                    budgetLoss: 1000000
                },
                {
                    title: "ğŸ’Š UyuÅŸturucu Operasyonu",
                    description: "BÃ¼yÃ¼k uyuÅŸturucu Ã§etesi yakalandÄ±.",
                    crimeIncrease: -0.5,
                    satisfactionGain: 3,
                    budgetLoss: 2000000
                },
                {
                    title: "ğŸš— Organize SuÃ§",
                    description: "Organize suÃ§ Ã¶rgÃ¼tÃ¼ faaliyetleri arttÄ±.",
                    crimeIncrease: 0.8,
                    satisfactionLoss: 4,
                    securityLoss: 2
                },
                {
                    title: "ğŸª DÃ¼kkan HÄ±rsÄ±zlÄ±ÄŸÄ±",
                    description: "KÃ¼Ã§Ã¼k iÅŸletmelerde hÄ±rsÄ±zlÄ±k olaylarÄ± arttÄ±.",
                    crimeIncrease: 0.2,
                    satisfactionLoss: 1
                },
                {
                    title: "âš–ï¸ YargÄ± BaÅŸarÄ±sÄ±",
                    description: "Ã–nemli suÃ§ lideri tutuklandÄ±!",
                    crimeIncrease: -0.7,
                    satisfactionGain: 4,
                    stabilityGain: 2
                }
            ];
            
            const crime = crimes[Math.floor(Math.random() * crimes.length)];
            
            addLog(`ğŸš¨ SUÃ‡ OLAYLARI: ${crime.title} - ${crime.description}`, 'danger');
            
            if (crime.crimeIncrease) {
                weeklyCrimeRateChange += crime.crimeIncrease;
                lastDecisionImpact = { type: 'ğŸš¨ SuÃ§ Orn.:', value: -crime.crimeIncrease };
            }
            if (crime.satisfactionLoss) weeklySatisfactionChange -= crime.satisfactionLoss;
            if (crime.satisfactionGain) weeklySatisfactionChange += crime.satisfactionGain;
            if (crime.budgetLoss) weeklyBudgetChange -= crime.budgetLoss;
            if (crime.securityLoss) weeklySecurityPerceptionChange -= crime.securityLoss;
            if (crime.stabilityGain) weeklyPoliticalStabilityChange += crime.stabilityGain;
        }

        function updateCabinetDisplay() {
            const cabinetListEl = document.getElementById('cabinet-list');
            if (!cabinetListEl) return;
            
            cabinetListEl.innerHTML = '';
            
            for (const [type, minister] of Object.entries(cabinet)) {
                const li = document.createElement('li');
                const efficiency = (minister.efficiency * 100).toFixed(0);
                const corruption = (minister.corruption * 100).toFixed(0);
                const satisfaction = (minister.satisfactionRating || 70).toFixed(0);
                const emoji = {
                    economy: 'ğŸ’¼', education: 'ğŸ“', health: 'ğŸ¥', 
                    foreign: 'ğŸŒ', interior: 'ğŸ›ï¸', justice: 'âš–ï¸', defense: 'âš”ï¸'
                }[type];
                
                li.innerHTML = `
                    <span>${emoji} ${type.charAt(0).toUpperCase() + type.slice(1)} BakanÄ±: ${minister.name}</span>
                    <span>Verimlilik: ${efficiency}% | Yolsuzluk: ${corruption}% | Halk DesteÄŸi: ${satisfaction}%</span>
                `;
                cabinetListEl.appendChild(li);
            }
        }

        function checkProtests() {
            // Halk memnuniyetsizliklerini kontrol et
            for (const [type, minister] of Object.entries(cabinet)) {
                if (minister.satisfactionRating < 30 && Math.random() < 0.3) {
                    triggerProtest(type, minister);
                }
            }
        }

        function triggerProtest(ministerType, minister) {
            const protestTypes = {
                economy: "ğŸ’° Ekonomi politikalarÄ±na karÅŸÄ± protesto",
                education: "ğŸ“ EÄŸitim sistemine karÅŸÄ± protesto",
                health: "ğŸ¥ SaÄŸlÄ±k hizmetlerine karÅŸÄ± protesto",
                foreign: "ğŸŒ DÄ±ÅŸ politikaya karÅŸÄ± protesto",
                interior: "ğŸ›ï¸ Ä°Ã§ gÃ¼venlik politikalarÄ±na karÅŸÄ± protesto",
                justice: "âš–ï¸ Adalet sistemine karÅŸÄ± protesto",
                defense: "âš”ï¸ Askeri politikalara karÅŸÄ± protesto"
            };

            const protest = {
                type: ministerType,
                minister: minister.name,
                intensity: Math.floor(Math.random() * 5) + 1,
                title: protestTypes[ministerType],
                duration: 3
            };

            currentProtests.push(protest);
            updateProtestDisplay();
            
            addLog(`ğŸš¨ PROTESTO: ${protest.title}! Bakan ${minister.name} istifa etmeli diyor halk!`, 'danger');
            addLog(`ğŸ“¢ Protesto yoÄŸunluÄŸu: ${protest.intensity}/5. MÃ¼dahale seÃ§eneklerinizi deÄŸerlendirin.`, 'warning');
            
            // Protesto etkilerini uygula
            weeklySatisfactionChange -= protest.intensity * 2;
            weeklyPoliticalStabilityChange -= protest.intensity;
            weeklyCrimeRateChange += protest.intensity * 0.1; // Protestolar suÃ§ oranÄ±nÄ± artÄ±rÄ±r
        }

        function updateProtestDisplay() {
            const protestManagement = document.getElementById('protest-management');
            const currentProtestsEl = document.getElementById('current-protests');
            
            if (currentProtests.length > 0) {
                protestManagement.style.display = 'block';
                currentProtestsEl.innerHTML = '';
                
                currentProtests.forEach((protest, index) => {
                    const div = document.createElement('div');
                    div.className = 'protest-alert';
                    div.innerHTML = `
                        <h4>${protest.title}</h4>
                        <p>Hedef: Bakan ${protest.minister} | YoÄŸunluk: ${protest.intensity}/5 | SÃ¼re: ${protest.duration} gÃ¼n</p>
                    `;
                    currentProtestsEl.appendChild(div);
                });
            } else {
                protestManagement.style.display = 'none';
            }
        }

        function handleProtestAction(action) {
            if (currentProtests.length === 0) return;
            
            const protest = currentProtests[0]; // Ä°lk protesto ile mÃ¼dahale
            
            switch(action) {
                case 'negotiate':
                    addLog(`ğŸ¤ ${protest.title} ile mÃ¼zakere baÅŸlatÄ±ldÄ±nÄ±z.`, 'info');
                    weeklySatisfactionChange += 3;
                    weeklyPoliticalStabilityChange += 2;
                    budget -= 1000000; // MÃ¼zakere maliyeti
                    currentProtests.shift();
                    lastDecisionImpact = { type: 'ğŸ˜Š Memnun.:', value: 3 };
                    break;
                    
                case 'ignore':
                    addLog(`ğŸ™„ ${protest.title} gÃ¶rmezden gelindi.`, 'warning');
                    weeklySatisfactionChange -= protest.intensity * 3;
                    weeklyPoliticalStabilityChange -= protest.intensity * 2;
                    weeklyCrimeRateChange += protest.intensity * 0.2; // GÃ¶rmezden gelinen protestolar suÃ§u artÄ±rÄ±r
                    protest.intensity += 1;
                    lastDecisionImpact = { type: 'ğŸ˜Š Memnun.:', value: -protest.intensity * 3 };
                    break;
                    
                case 'peaceful':
                    addLog(`ğŸ‘® ${protest.title} barÄ±ÅŸÃ§Ä±l ÅŸekilde daÄŸÄ±tÄ±ldÄ±.`, 'info');
                    weeklySatisfactionChange -= protest.intensity;
                    weeklyPoliticalStabilityChange += 1;
                    budget -= 500000; // Polis maliyeti
                    currentProtests.shift();
                    lastDecisionImpact = { type: 'âš–ï¸ Ä°stikrar:', value: 1 };
                    break;
                    
                case 'force':
                    addLog(`âš¡ ${protest.title} gÃ¼Ã§ kullanÄ±larak daÄŸÄ±tÄ±ldÄ±!`, 'danger');
                    weeklySatisfactionChange -= protest.intensity * 5;
                    weeklyPoliticalStabilityChange -= protest.intensity * 3;
                    weeklyForeignRelationsChange -= 2;
                    weeklyCrimeRateChange += protest.intensity * 0.3; // Åiddet daha fazla suÃ§a yol aÃ§ar
                    currentProtests.shift();
                    lastDecisionImpact = { type: 'ğŸ˜Š Memnun.:', value: -protest.intensity * 5 };
                    break;
            }
            
            updateProtestDisplay();
            updateGameStats();
        }

        function generateDiplomaticInvitation() {
            const invitationTypes = [
                {
                    title: "ğŸ¤ Ekonomik Ä°ÅŸbirliÄŸi Zirvesi",
                    host: "Almanya",
                    benefit: { gdp: 1.02, foreignRelations: 5, cost: 5000000 },
                    description: "AB Ã¼lkeleri ekonomik iÅŸbirliÄŸi toplantÄ±sÄ±na davet ediyor."
                },
                {
                    title: "ğŸŒ Ä°klim DeÄŸiÅŸikliÄŸi KonferansÄ±",
                    host: "NorveÃ§",
                    benefit: { satisfaction: 3, foreignRelations: 8, cost: 3000000 },
                    description: "Ã‡evre dostu politikalar iÃ§in uluslararasÄ± konferansa katÄ±lÄ±m."
                },
                {
                    title: "âš”ï¸ GÃ¼venlik Ä°ÅŸbirliÄŸi ToplantÄ±sÄ±",
                    host: "ABD",
                    benefit: { militaryStrength: 10, foreignRelations: 6, cost: 8000000 },
                    description: "BÃ¶lgesel gÃ¼venlik konularÄ±nda iÅŸbirliÄŸi."
                },
                {
                    title: "ğŸ­ KÃ¼ltÃ¼r Festivali",
                    host: "Fransa",
                    benefit: { satisfaction: 5, foreignRelations: 4, cost: 2000000 },
                    description: "UluslararasÄ± kÃ¼ltÃ¼r ve sanat festivali."
                }
            ];
            
            const invitation = invitationTypes[Math.floor(Math.random() * invitationTypes.length)];
            invitation.id = Date.now();
            pendingDiplomaticInvitations.push(invitation);
            
            addLog(`ğŸ“¨ DÄ°PLOMATÄ°K DAVET: ${invitation.host}'dan "${invitation.title}" davetiyesi geldi!`, 'event');
            updateDiplomaticInvitations();
        }

        function updateDiplomaticInvitations() {
            const foreignEventsList = document.getElementById('foreign-events-list');
            if (!foreignEventsList) return;
            
            foreignEventsList.innerHTML = '';
            
            pendingDiplomaticInvitations.forEach(invitation => {
                const li = document.createElement('li');
                li.className = 'diplomatic-invitation';
                li.innerHTML = `
                    <div>
                        <h4>${invitation.title}</h4>
                        <p>Ev Sahibi: ${invitation.host}</p>
                        <p>${invitation.description}</p>
                        <p>Maliyet: $${(invitation.benefit.cost/1000000).toFixed(1)}M</p>
                    </div>
                    <div>
                        <button onclick="acceptInvitation(${invitation.id})">âœ… Kabul Et</button>
                        <button onclick="declineInvitation(${invitation.id})">âŒ Reddet</button>
                    </div>
                `;
                foreignEventsList.appendChild(li);
            });
        }

        window.acceptInvitation = function(invitationId) {
            const invitation = pendingDiplomaticInvitations.find(inv => inv.id === invitationId);
            if (!invitation) return;
            
            if (budget < invitation.benefit.cost) {
                addLog(`âŒ ${invitation.title} iÃ§in yeterli bÃ¼tÃ§e yok!`, 'warning');
                return;
            }
            
            budget -= invitation.benefit.cost;
            
            if (invitation.benefit.gdp) weeklyGdpChangeFactor *= invitation.benefit.gdp;
            if (invitation.benefit.satisfaction) weeklySatisfactionChange += invitation.benefit.satisfaction;
            if (invitation.benefit.foreignRelations) weeklyForeignRelationsChange += invitation.benefit.foreignRelations;
            if (invitation.benefit.militaryStrength) weeklyMilitaryStrengthChange += invitation.benefit.militaryStrength;
            
            addLog(`âœ… ${invitation.title} davetini kabul ettiniz! ${invitation.host} ile iliÅŸkiler gÃ¼Ã§lendi.`, 'success');
            
            pendingDiplomaticInvitations = pendingDiplomaticInvitations.filter(inv => inv.id !== invitationId);
            updateDiplomaticInvitations();
            updateGameStats();
        };

        window.declineInvitation = function(invitationId) {
            const invitation = pendingDiplomaticInvitations.find(inv => inv.id === invitationId);
            if (!invitation) return;
            
            weeklyForeignRelationsChange -= 2;
            addLog(`âŒ ${invitation.title} davetini reddettiniz. ${invitation.host} ile iliÅŸkiler etkilenebilir.`, 'warning');
            
            pendingDiplomaticInvitations = pendingDiplomaticInvitations.filter(inv => inv.id !== invitationId);
            updateDiplomaticInvitations();
            updateGameStats();
        };

        function updateMinisterAdvice() {
            // Bakan tavsiyeleri gÃ¼ncelleme
            const economyAdvice = document.getElementById('economy-advice-text');
            const educationAdvice = document.getElementById('education-advice-text');
            const healthAdvice = document.getElementById('health-advice-text');
            const foreignAdvice = document.getElementById('foreign-advice-text');
            const interiorAdvice = document.getElementById('interior-advice-text');
            const justiceAdvice = document.getElementById('justice-advice-text');
            const defenseAdvice = document.getElementById('defense-advice-text');
            
            if (economyAdvice) {
                if (inflation > 10) {
                    economyAdvice.textContent = "Enflasyon Ã§ok yÃ¼ksek! HarcamalarÄ± azaltmalÄ± ve para politikasÄ±nÄ± sÄ±kÄ±laÅŸtÄ±rmalÄ±yÄ±z.";
                } else if (gdp < population * 80) {
                    economyAdvice.textContent = "GSYÄ°H dÃ¼ÅŸÃ¼k. Daha fazla ekonomik yatÄ±rÄ±m gerekli.";
                } else {
                    economyAdvice.textContent = "Ekonomi durumu kontrol altÄ±nda gÃ¶rÃ¼nÃ¼yor.";
                }
            }
            
            if (educationAdvice) {
                if (educationSpending < population * 0.01) {
                    educationAdvice.textContent = "EÄŸitim yatÄ±rÄ±mlarÄ± yetersiz. Uzun vadede bÃ¼yÃ¼me iÃ§in artÄ±rÄ±lmalÄ±.";
                } else {
                    educationAdvice.textContent = "EÄŸitim sektÃ¶rÃ¼ geliÅŸiyor.";
                }
            }
            
            if (healthAdvice) {
                if (healthSpending < population * 0.008) {
                    healthAdvice.textContent = "SaÄŸlÄ±k harcamalarÄ± artÄ±rÄ±lmalÄ±.";
                } else {
                    healthAdvice.textContent = "SaÄŸlÄ±k sistemi yeterli seviyede.";
                }
            }
            
            if (foreignAdvice) {
                if (foreignRelationsScore < 30) {
                    foreignAdvice.textContent = "DÄ±ÅŸ iliÅŸkilerimiz kÃ¶tÃ¼ durumda. Diplomatik Ã§aba artÄ±rÄ±lmalÄ±.";
                } else if (foreignRelationsScore > 70) {
                    foreignAdvice.textContent = "DÄ±ÅŸ iliÅŸkilerimiz gÃ¼Ã§lÃ¼. Bu durumu korumalÄ±yÄ±z.";
                } else {
                    foreignAdvice.textContent = "DÄ±ÅŸ iliÅŸkiler orta seviyede.";
                }
            }
            
            if (interiorAdvice) {
                if (crimeRate > 8) {
                    interiorAdvice.textContent = "SuÃ§ oranlarÄ± yÃ¼ksek! Polis bÃ¼tÃ§esi artÄ±rÄ±lmalÄ± ve gÃ¼venlik Ã¶nlemleri alÄ±nmalÄ±.";
                } else if (securityPerception < 50) {
                    interiorAdvice.textContent = "HalkÄ±n gÃ¼venlik algÄ±sÄ± dÃ¼ÅŸÃ¼k. Ä°Ã§ gÃ¼venlik politikalarÄ±nÄ± gÃ¶zden geÃ§irmeliyiz.";
                } else {
                    interiorAdvice.textContent = "Ä°Ã§ gÃ¼venlik durumu kontrol altÄ±nda.";
                }
            }
            
            if (justiceAdvice) {
                if (crimeRate > 10) {
                    justiceAdvice.textContent = "Adalet sisteminde reform gerekli. SuÃ§lular cezasÄ±z kalÄ±yor.";
                } else if (politicalStability < 40) {
                    justiceAdvice.textContent = "Siyasi istikrarsÄ±zlÄ±k adalet sistemini etkiliyor.";
                } else {
                    justiceAdvice.textContent = "Adalet sistemi iÅŸliyor.";
                }
            }
            
            if (defenseAdvice) {
                if (armyLoyalty < 50) {
                    defenseAdvice.textContent = "UYARI: Ordu sadakati dÃ¼ÅŸÃ¼k! Askeri reformlar gerekli.";
                } else if (militaryStrengthIndex < 30) {
                    defenseAdvice.textContent = "Askeri gÃ¼Ã§mÃ¼z zayÄ±f. Savunma yatÄ±rÄ±mlarÄ± artÄ±rÄ±lmalÄ±.";
                } else {
                    defenseAdvice.textContent = "Savunma durumu tatmin edici.";
                }
            }
        }

        function updateParliamentDisplay() {
            const parliamentSupportEl = document.getElementById('parliament-support');
            const parliamentAgendaEl = document.getElementById('parliament-agenda');
            
            if (parliamentSupportEl) {
                parliamentSupportEl.textContent = parliamentSupport.toFixed(0);
            }
            
            if (parliamentAgendaEl) {
                parliamentAgendaEl.innerHTML = '';
                if (parliamentAgenda.length === 0) {
                    const li = document.createElement('li');
                    li.textContent = "Åu anda gÃ¼ndemde Ã¶nemli bir yasa yok.";
                    parliamentAgendaEl.appendChild(li);
                } else {
                    parliamentAgenda.forEach((item, index) => {
                        const li = document.createElement('li');
                        li.innerHTML = `
                            <span>${item.title}</span>
                            <div>
                                <button class="parliament-action-btn" data-action="approve" data-index="${index}">âœ… Onayla</button>
                                <button class="parliament-action-btn" data-action="reject" data-index="${index}">âŒ Reddet</button>
                            </div>
                        `;
                        parliamentAgendaEl.appendChild(li);
                    });
                }
            }
        }

        function updateForeignRelationsDisplay() {
            const countryRelationsList = document.getElementById('country-relations-list');
            const foreignRelationsDisplay = document.getElementById('foreign-relations-display');
            
            if (foreignRelationsDisplay) {
                foreignRelationsDisplay.textContent = foreignRelationsScore.toFixed(0);
            }
            
            if (countryRelationsList) {
                countryRelationsList.innerHTML = '';
                for (const [countryName, country] of Object.entries(countries)) {
                    const li = document.createElement('li');
                    const relationColor = country.relation > 60 ? 'green' : country.relation > 30 ? 'orange' : 'red';
                    li.innerHTML = `
                        <span style="color: ${relationColor}">${countryName}: ${country.relation}/100</span>
                        <div>
                            <button onclick="improveCountryRelations('${countryName}')">ğŸ¤ Ä°liÅŸkiyi GeliÅŸtir</button>
                            <button onclick="declareWarOnCountry('${countryName}')">âš”ï¸ SavaÅŸ Ä°lan Et</button>
                        </div>
                    `;
                    countryRelationsList.appendChild(li);
                }
            }
        }

        function updateSummitInvitationList() {
            const summitInvitationList = document.getElementById('summit-invitation-list');
            if (!summitInvitationList) return;
            
            summitInvitationList.innerHTML = '';
            for (const [countryName, country] of Object.entries(countries)) {
                const li = document.createElement('li');
                li.innerHTML = `
                    <span>${countryName}</span>
                    <input type="checkbox" ${country.summitInvited ? 'checked' : ''} 
                           onchange="toggleSummitInvitation('${countryName}')">
                `;
                summitInvitationList.appendChild(li);
            }
        }

        function updateReports() {
            const reportCurrentWeekEl = document.getElementById('report-current-week');
            const reportCurrentDayEl = document.getElementById('report-current-day');
            
            if (reportCurrentWeekEl) reportCurrentWeekEl.textContent = week;
            if (reportCurrentDayEl) reportCurrentDayEl.textContent = dayOfWeek;
            
            // Ekonomi raporu gÃ¼ncellemeleri
            const gdpChangeReportEl = document.getElementById('gdp-change-report-display');
            const inflationChangeReportEl = document.getElementById('inflation-change-report-display');
            
            if (gdpChangeReportEl) {
                const gdpChange = ((weeklyGdpChangeFactor - 1) * 100).toFixed(2);
                gdpChangeReportEl.textContent = `${gdpChange}%`;
            }
            
            if (inflationChangeReportEl) {
                inflationChangeReportEl.textContent = `${weeklyInflationChange.toFixed(2)}%`;
            }
        }

        function triggerRandomEvent() {
            const events = [
                {
                    title: "ğŸŒ¾ Rekor Hasat",
                    description: "Bu yÄ±lki hasat rekor seviyede! Ekonomi gÃ¼Ã§leniyor.",
                    effects: () => {
                        weeklyGdpChangeFactor *= 1.02;
                        weeklySatisfactionChange += 3;
                        weeklyInflationChange -= 0.1;
                        lastDecisionImpact = { type: 'ğŸ’° GSYÄ°H', value: 2 };
                    }
                },
                {
                    title: "ğŸ­ Fabrika PatlamasÄ±",
                    description: "BÃ¼yÃ¼k bir kimya fabrikasÄ±nda patlama! Ekonomik ve Ã§evresel hasar.",
                    effects: () => {
                        weeklyGdpChangeFactor *= 0.98;
                        weeklySatisfactionChange -= 8;
                        weeklyInflationChange += 0.3;
                        weeklyBudgetChange -= 20000000;
                        lastDecisionImpact = { type: 'ğŸ˜Š Memnun.:', value: -8 };
                    }
                },
                {
                    title: "ğŸ’° Vergi KaÃ§Ä±rma SkandalÄ±",
                    description: "BÃ¼yÃ¼k ÅŸirketlerin vergi kaÃ§Ä±rma skandalÄ± ortaya Ã§Ä±ktÄ±!",
                    effects: () => {
                        weeklyBudgetChange -= 50000000;
                        weeklySatisfactionChange -= 12;
                        weeklyPoliticalStabilityChange -= 8;
                        weeklyInflationChange += 0.4; // Ekonomik gÃ¼vensizlik
                        weeklyCrimeRateChange += 0.5; // Kanun tanÄ±mazlÄ±k artar
                        lastDecisionImpact = { type: 'ğŸ˜Š Memnun.:', value: -12 };
                    }
                },
                {
                    title: "ğŸ­ UluslararasÄ± KÃ¼ltÃ¼r Festivali",
                    description: "Åehrinizde dÃ¼zenlenen festival bÃ¼yÃ¼k ilgi gÃ¶rdÃ¼!",
                    effects: () => {
                        weeklySatisfactionChange += 5;
                        weeklyForeignRelationsChange += 4;
                        weeklyBudgetChange += 8000000;
                        lastDecisionImpact = { type: 'ğŸ˜Š Memnun.:', value: 5 };
                    }
                },
                {
                    title: "ğŸ¦  SalgÄ±n Tehdidi",
                    description: "Yeni bir salgÄ±n hastalÄ±k tehdidi ortaya Ã§Ä±ktÄ±.",
                    effects: () => {
                        weeklySatisfactionChange -= 5;
                        weeklyBudgetChange -= 20000000;
                        weeklyPopulationChangeFactor *= 0.99;
                        weeklyInflationChange += 0.2; // SaÄŸlÄ±k harcamalarÄ±
                        lastDecisionImpact = { type: 'ğŸ˜Š Memnun.:', value: -5 };
                    }
                },
                {
                    title: "ğŸ† Spor BaÅŸarÄ±sÄ±",
                    description: "Milli takÄ±mÄ±nÄ±z uluslararasÄ± turnuvada ÅŸampiyon oldu!",
                    effects: () => {
                        weeklySatisfactionChange += 8;
                        weeklyPoliticalStabilityChange += 3;
                        weeklyForeignRelationsChange += 6;
                        lastDecisionImpact = { type: 'ğŸ˜Š Memnun.:', value: 8 };
                    }
                },
                {
                    title: "ğŸ’» Siber SaldÄ±rÄ±",
                    description: "Devlet kurumlarÄ±na bÃ¼yÃ¼k siber saldÄ±rÄ± dÃ¼zenlendi!",
                    effects: () => {
                        weeklyBudgetChange -= 30000000;
                        weeklySatisfactionChange -= 10;
                        weeklyPoliticalStabilityChange -= 6;
                        weeklyInflationChange += 0.3;
                        weeklyCrimeRateChange += 0.3; // Dijital suÃ§lar artar
                        lastDecisionImpact = { type: 'ğŸš¨ SuÃ§ Orn.:', value: 0.3 };
                    }
                }
            ];
            
            const event = events[Math.floor(Math.random() * events.length)];
            addLog(`ğŸ² ${event.title}: ${event.description}`, 'event');
            event.effects();
        }

        function triggerNaturalDisaster() {
            const disasters = [
                {
                    name: "ğŸŒ‹ Deprem",
                    damage: 80000000,
                    satisfactionLoss: 20,
                    infrastructureDamage: 15,
                    inflationIncrease: 1.2
                },
                {
                    name: "ğŸŒŠ Sel",
                    damage: 25000000,
                    satisfactionLoss: 12,
                    infrastructureDamage: 8,
                    inflationIncrease: 0.4
                },
                {
                    name: "ğŸ”¥ Orman YangÄ±nÄ±",
                    damage: 10000000,
                    satisfactionLoss: 6,
                    infrastructureDamage: 3,
                    inflationIncrease: 0.2
                },
                {
                    name: "ğŸŒªï¸ KasÄ±rga",
                    damage: 60000000,
                    satisfactionLoss: 15,
                    infrastructureDamage: 12,
                    inflationIncrease: 0.8
                }
            ];
            
            const disaster = disasters[Math.floor(Math.random() * disasters.length)];
            
            // Afet hazÄ±rlÄ±ÄŸÄ± etkisi
            const preparednessReduction = naturalDisasterPreparedness / 100;
            const actualDamage = disaster.damage * (1 - preparednessReduction * 0.5);
            const actualSatisfactionLoss = disaster.satisfactionLoss * (1 - preparednessReduction * 0.3);
            const actualInfrastructureDamage = disaster.infrastructureDamage * (1 - preparednessReduction * 0.4);
            const actualInflationIncrease = disaster.inflationIncrease * (1 - preparednessReduction * 0.3);
            
            addLog(`ğŸš¨ DOÄAL AFET: ${disaster.name} meydana geldi!`, 'danger');
            addLog(`ğŸ’¸ Hasar: $${(actualDamage/1000000).toFixed(1)}M, AltyapÄ± hasarÄ±: ${actualInfrastructureDamage.toFixed(1)}`, 'warning');
            
            weeklyBudgetChange -= actualDamage;
            weeklySatisfactionChange -= actualSatisfactionLoss;
            weeklyInfrastructureChange -= actualInfrastructureDamage;
            weeklyInflationChange += actualInflationIncrease; // Afetler enflasyonu artÄ±rÄ±r
            weeklyCrimeRateChange += actualSatisfactionLoss * 0.1; // Afet sonrasÄ± asayish bozulabilir
            
            lastDecisionImpact = { type: 'ğŸ“ˆ Enflas.:', value: actualInflationIncrease };
            
            if (naturalDisasterPreparedness > 50) {
                addLog("ğŸ›¡ï¸ Ä°yi afet hazÄ±rlÄ±ÄŸÄ±mÄ±z sayesinde hasarlar azaltÄ±ldÄ±.", 'info');
            }
        }

        function resetGame() {
            // TÃ¼m deÄŸiÅŸkenleri sÄ±fÄ±rla
            week = 1; 
            dayOfWeek = 1; 
            isAtWar = false;
            governmentType = 'Demokrasi'; 
            mediaFreedom = 7; 
            mediaInfluence = 60; 
            propagandaEffectWeeks = 0;
            infrastructureLevel = 50; 
            transportationInvestmentWeeks = 0; 
            energyInvestmentWeeks = 0;
            naturalDisasterPreparedness = 30;
            currentProtests = [];
            protestIntensity = 0;
            pendingDiplomaticInvitations = [];
            lastDecisionImpact = { type: '', value: 0 };

            population = 10000000; 
            gdp = 1000000000; 
            inflation = 2; 
            satisfaction = 70;
            budget = 100000000; 
            taxes = 10; 
            educationSpending = 0; 
            healthSpending = 0; 
            cultureSpending = 0;
            socialSecuritySpending = 0;
            unemploymentSupport = 0;
            crimeRate = 5; 
            securityPerception = 75; 
            politicalStability = 70;
            parliamentSupport = 70; 
            foreignRelationsScore = 50; 
            nationalHolidays = 0;
            armySize = 50000; 
            militaryStrengthIndex = 50; 
            armyLoyalty = 80;
            summitPlanned = false; 
            summitInvitationsSent = false;
            
            socialPolicyLevel = 5; 
            economicPolicyLevel = 5; 
            diplomaticApproachLevel = 5; 
            securityLevel = 5;
            
            // HaftalÄ±k deÄŸiÅŸken sÄ±fÄ±rlamalarÄ±
            weeklyBudgetChange = 0; 
            weeklySatisfactionChange = 0; 
            weeklyGdpChangeFactor = 1;
            weeklyInflationChange = 0; 
            weeklyPopulationChangeFactor = 1; 
            weeklyForeignRelationsChange = 0;
            weeklyCrimeRateChange = 0; 
            weeklySecurityPerceptionChange = 0; 
            weeklyMilitaryStrengthChange = 0;
            weeklyPoliticalStabilityChange = 0; 
            weeklyArmyLoyaltyChange = 0;
            weeklyMediaFreedomChange = 0;
            weeklyInfrastructureChange = 0; 

            historicalData.weeks = []; 
            historicalData.gdp = []; 
            historicalData.satisfaction = [];
            historicalData.inflation = []; 
            historicalData.politicalStability = [];
            historicalData.crimeRate = [];

            // Ãœlke iliÅŸkilerini sÄ±fÄ±rla
            for (const country in countries) {
                countries[country].summitInvited = false;
                countries[country].summitAccepted = false;
            }
            
            parliamentAgenda.length = 0;
            
            if(gameLogEl) gameLogEl.innerHTML = ''; 
            
            const gameOverScreen = document.getElementById('game-over-screen');
            if(gameOverScreen) gameOverScreen.style.display = 'none';
            
            showNameModal();
            showScreen('main-screen'); 
        }

        function advanceOneDay() {
            if (isAtWar) { 
                addLog("âš”ï¸ SavaÅŸ devam ederken gÃ¼nÃ¼ bu ÅŸekilde ilerletemezsiniz!", "warning", true); 
                return; 
            }
            
            addLog("ğŸŒ… Yeni bir gÃ¼n baÅŸladÄ±...", "info", true);
            
            const dailyFactor = 1/7;

            // PASÄ°F DEÄÄ°ÅÄ°MLER - HiÃ§bir ÅŸey yapmazsak da olacaklar
            
            // DoÄŸal enflasyon artÄ±ÅŸÄ±
            weeklyInflationChange += (0.1 + Math.random() * 0.05) * dailyFactor; // Her gÃ¼n kÃ¼Ã§Ã¼k enflasyon artÄ±ÅŸÄ±
            
            // DoÄŸal suÃ§ artÄ±ÅŸÄ± (gÃ¼venlik yatÄ±rÄ±mÄ± olmadÄ±ÄŸÄ±nda)
            if (securityLevel < 6) {
                weeklyCrimeRateChange += (0.05 + Math.random() * 0.03) * dailyFactor;
            }
            
            // AltyapÄ± eskimesi
            weeklyInfrastructureChange -= (0.1 + Math.random() * 0.05) * dailyFactor;
            
            // Siyasi istikrarsÄ±zlÄ±k (pasif)
            if (satisfaction < 50) {
                weeklyPoliticalStabilityChange -= (satisfaction < 30 ? 0.3 : 0.1) * dailyFactor;
            }
            
            // Memnuniyet pasif kaybÄ± (ideal yÃ¶netim olmadÄ±ÄŸÄ±nda)
            weeklySatisfactionChange -= (0.2 + Math.random() * 0.1) * dailyFactor;

            // ProtestolarÄ± azalt
            currentProtests.forEach(protest => {
                protest.duration--;
                if (protest.duration <= 0) {
                    currentProtests.splice(currentProtests.indexOf(protest), 1);
                    addLog(`ğŸ“¢ ${protest.title} doÄŸal olarak sona erdi.`, 'info');
                }
            });

            // Rastgele suÃ§ olaylarÄ±
            if (Math.random() < 0.1) { // %10 ÅŸans
                triggerCrimeEvent();
            }

            // GÃ¼nlÃ¼k gelir hesaplamalarÄ±
            let currentDailyBudgetChange = 0;
            let dailyRevenue = (population * gdp * (taxes / 520000) * (1 - cabinet.economy.corruption*0.5)) * dailyFactor;
            currentDailyBudgetChange += dailyRevenue;
            
            // GÃ¼nlÃ¼k harcamalar
            let dailyTotalSpending = 0;
            dailyTotalSpending += (educationSpending * (1 + cabinet.education.corruption*0.8)) * dailyFactor;
            dailyTotalSpending += (healthSpending * (1 + cabinet.health.corruption*0.8)) * dailyFactor;
            dailyTotalSpending += (cultureSpending * (1 + (cabinet.economy.corruption || 0.1)*0.8)) * dailyFactor; 
            dailyTotalSpending += (socialPolicyLevel * 500000 * (1 + socialPolicyLevel/20)) * dailyFactor;
            dailyTotalSpending += (socialSecuritySpending * 1000000) * dailyFactor;
            dailyTotalSpending += (unemploymentSupport * 1000000) * dailyFactor;
            
            const dailyArmyMaintenance = armySize * armyUpkeepCostPerSoldier * (1 + (militaryStrengthIndex - 50) / 150) * (1 - cabinet.defense.efficiency*0.1 + cabinet.defense.corruption*0.3) * dailyFactor;
            dailyTotalSpending += dailyArmyMaintenance;
            
            currentDailyBudgetChange -= dailyTotalSpending;
            weeklyBudgetChange += currentDailyBudgetChange;

            // GSYÄ°H bÃ¼yÃ¼mesi
            let dailyGdpGrowth = ( 
                (Math.random() - 0.5) * 0.002 * cabinet.economy.efficiency + // Daha volatil
                (economicPolicyLevel - 5) * 0.0015 - 
                inflation/500 + 
                infrastructureLevel/10000
            ) * dailyFactor; 
            weeklyGdpChangeFactor *= (1 + dailyGdpGrowth);

            // Memnuniyet deÄŸiÅŸimi (gÃ¼ncellemelere eklenen pasif kayÄ±p dahil)
            let dailySatDelta = 0;
            dailySatDelta -= (taxes / 60) * dailyFactor;
            dailySatDelta += ((educationSpending / 600000 * cabinet.education.efficiency) + 
                             (healthSpending / 600000 * cabinet.health.efficiency) + 
                             (cultureSpending / 400000)) * dailyFactor;
            dailySatDelta += (socialPolicyLevel - 5) * 0.6 * dailyFactor;
            dailySatDelta += (infrastructureLevel - 50) * 0.005 * dailyFactor; 
            dailySatDelta += (socialSecuritySpending / 5000000) * dailyFactor;
            dailySatDelta += (unemploymentSupport / 3000000) * dailyFactor;
            
            if (inflation > 6) dailySatDelta -= (inflation - 6) * 0.25 * dailyFactor;
            if (crimeRate > 6) dailySatDelta -= crimeRate * 0.6 * dailyFactor;
            if (securityLevel > 7 && governmentType === 'Demokrasi') dailySatDelta -= (securityLevel - 7) * 0.4 * dailyFactor;
            if (governmentType === 'DiktatÃ¶rlÃ¼k') dailySatDelta -= 0.8 * dailyFactor;
            if (propagandaEffectWeeks > 0) dailySatDelta += (2 + mediaInfluence/30) * dailyFactor; 
            if (mediaFreedom < 3 && governmentType === 'Demokrasi') dailySatDelta -= (3 - mediaFreedom) * 0.2 * dailyFactor; 
            
            // Protesto etkisi
            dailySatDelta -= currentProtests.length * 2 * dailyFactor;
            
            weeklySatisfactionChange += dailySatDelta;

            addLog("ğŸŒ† GÃ¼n sona erdi, geliÅŸmeler yaÅŸandÄ±.", "info", true);
            dayOfWeek++;

            if (dayOfWeek > 7) {
                endWeek(); 
            }
            
            updateGameStats(); 
            updateProtestDisplay();
        }

        function endWeek() {
            if (isAtWar) { 
                addLog("âš”ï¸ SavaÅŸ devam ediyor! HaftayÄ± bitiremezsiniz.", "danger"); 
                return; 
            }
            
            addLog("ğŸ“… Hafta sonu deÄŸerlendirmeleri yapÄ±lÄ±yor...", "event");
            
            // AltyapÄ± projelerini kontrol et
            if (transportationInvestmentWeeks > 0) {
                transportationInvestmentWeeks--;
                if (transportationInvestmentWeeks === 0) {
                    addLog("ğŸš— ULAÅIM AÄI GELÄ°ÅTÄ°RME PROJESÄ° TAMAMLANDI!", "success");
                    weeklyInfrastructureChange += 8 + Math.floor(Math.random() * 5); 
                    weeklyGdpChangeFactor *= 1.005; 
                    weeklySatisfactionChange += 3;
                } else { 
                    addLog(`ğŸš§ UlaÅŸÄ±m aÄŸÄ± projesinin tamamlanmasÄ±na ${transportationInvestmentWeeks} hafta kaldÄ±.`, "info"); 
                }
            }
            
            if (energyInvestmentWeeks > 0) {
                energyInvestmentWeeks--;
                if (energyInvestmentWeeks === 0) {
                    addLog("âš¡ ENERJÄ° ÅEBEKESÄ° GÃœÃ‡LENDÄ°RME PROJESÄ° TAMAMLANDI!", "success");
                    weeklyInfrastructureChange += 10 + Math.floor(Math.random() * 6); 
                    weeklyGdpChangeFactor *= 1.003; 
                    weeklyInflationChange -= 0.2; 
                } else { 
                    addLog(`ğŸ”Œ Enerji ÅŸebekesi projesinin tamamlanmasÄ±na ${energyInvestmentWeeks} hafta kaldÄ±.`, "info"); 
                }
            }
            
            // Medya Ã¶zgÃ¼rlÃ¼ÄŸÃ¼ deÄŸiÅŸimi
            const mediaFreedomSlider = document.getElementById('media-freedom-slider');
            const targetMediaFreedom = mediaFreedomSlider ? parseFloat(mediaFreedomSlider.value) : mediaFreedom;
            if (mediaFreedom !== targetMediaFreedom) { 
                weeklyMediaFreedomChange += (targetMediaFreedom - mediaFreedom) * 0.25; 
            }
            
            if (propagandaEffectWeeks > 0) { 
                propagandaEffectWeeks--; 
                if (propagandaEffectWeeks === 0) { 
                    addLog("ğŸ“¢ Devlet propaganda kampanyasÄ±nÄ±n yoÄŸun etkisi sona erdi.", "info"); 
                } 
            }

            // HaftalÄ±k deÄŸiÅŸiklikleri uygula
            applyAccumulatedWeeklyChanges(); 

            // Rastgele olaylar (artÄ±rÄ±ldÄ±)
            if (week > 1 && Math.random() < 0.4) { 
                triggerRandomEvent(); 
            }
            
            // DoÄŸal afet kontrolÃ¼
            if (Math.random() < 0.1) { // %10 ÅŸans
                triggerNaturalDisaster();
            }
            
            // Diplomatik davet ÅŸansÄ±
            if (Math.random() < 0.15 && foreignRelationsScore > 30) { // %15 ÅŸans
                generateDiplomaticInvitation();
            }

            historicalData.weeks.push(week); 
            historicalData.gdp.push(gdp); 
            historicalData.satisfaction.push(satisfaction);
            historicalData.inflation.push(inflation); 
            historicalData.politicalStability.push(politicalStability);
            historicalData.crimeRate.push(crimeRate);

            addLog(`ğŸ¯ ----- HAFTA ${week} BÄ°TTÄ° / HAFTA ${week+1} BAÅLIYOR -----`, 'event');
            week++; 
            dayOfWeek = 1; 
            
            // Son kararÄ±n etkisini sÄ±fÄ±rla
            lastDecisionImpact = { type: '', value: 0 };
            
            updateGameStats();
            updateMinisterAdvice();
        }

        function applyAccumulatedWeeklyChanges() {
            budget += weeklyBudgetChange;
            satisfaction += weeklySatisfactionChange;
            gdp *= weeklyGdpChangeFactor;
            inflation += weeklyInflationChange;
            population = Math.round(population * weeklyPopulationChangeFactor);
            foreignRelationsScore += weeklyForeignRelationsChange;
            crimeRate += weeklyCrimeRateChange;
            securityPerception += weeklySecurityPerceptionChange;
            militaryStrengthIndex += weeklyMilitaryStrengthChange;
            politicalStability += weeklyPoliticalStabilityChange;
            armyLoyalty += weeklyArmyLoyaltyChange;
            mediaFreedom += weeklyMediaFreedomChange;
            infrastructureLevel += weeklyInfrastructureChange;

            // SÄ±nÄ±rlamalarÄ± uygula
            satisfaction = Math.max(0, Math.min(100, satisfaction));
            inflation = Math.max(0.05, Math.min(50, inflation));
            population = Math.max(10000, population); 
            foreignRelationsScore = Math.max(0, Math.min(100, foreignRelationsScore));
            crimeRate = Math.max(0.1, Math.min(30, crimeRate));
            securityPerception = Math.max(0, Math.min(100, securityPerception));
            militaryStrengthIndex = Math.max(5, Math.min(100, militaryStrengthIndex));
            politicalStability = Math.max(0, Math.min(100, politicalStability));
            armyLoyalty = Math.max(0, Math.min(100, armyLoyalty));
            mediaFreedom = Math.max(0, Math.min(10, mediaFreedom));
            infrastructureLevel = Math.max(0, Math.min(100, infrastructureLevel)); 
            gdp = Math.max(population * 10, gdp); 

            // HaftalÄ±k deÄŸiÅŸkenleri sÄ±fÄ±rla
            weeklyBudgetChange = 0; 
            weeklySatisfactionChange = 0; 
            weeklyGdpChangeFactor = 1;
            weeklyInflationChange = 0; 
            weeklyPopulationChangeFactor = 1; 
            weeklyForeignRelationsChange = 0;
            weeklyCrimeRateChange = 0; 
            weeklySecurityPerceptionChange = 0; 
            weeklyMilitaryStrengthChange = 0;
            weeklyPoliticalStabilityChange = 0; 
            weeklyArmyLoyaltyChange = 0;
            weeklyMediaFreedomChange = 0;
            weeklyInfrastructureChange = 0; 
        }

        // Global fonksiyonlar (button onclick'ler iÃ§in)
        window.improveCountryRelations = function(countryName) {
            addLog(`ğŸ¤ ${countryName} ile iliÅŸkileri geliÅŸtirme giriÅŸimi...`, 'info');
            
            const cost = 2000000;
            if (budget < cost) {
                addLog("âŒ Yeterli bÃ¼tÃ§e yok!", 'warning');
                return;
            }
            
            budget -= cost;
            const improvement = 5 + Math.floor(Math.random() * 10);
            countries[countryName].relation = Math.min(100, countries[countryName].relation + improvement);
            weeklyForeignRelationsChange += 2;
            
            addLog(`âœ… ${countryName} ile iliÅŸkiler geliÅŸtirildi! Yeni seviye: ${countries[countryName].relation}`, 'success');
            lastDecisionImpact = { type: 'ğŸŒ DÄ±ÅŸ Ä°lÅŸ.:', value: 2 };
            updateForeignRelationsDisplay();
            updateGameStats();
        };

        window.declareWarOnCountry = function(countryName) {
            addLog(`âš”ï¸ ${countryName}'a savaÅŸ ilanÄ± dÃ¼ÅŸÃ¼nÃ¼lÃ¼yor...`, 'warning');
            
            if (confirm(`${countryName}'a gerÃ§ekten savaÅŸ ilan etmek istiyor musunuz? Bu Ã§ok riskli bir karar!`)) {
                addLog(`ğŸš¨ ${countryName}'a savaÅŸ ilan edildi!`, 'danger');
                isAtWar = true;
                countries[countryName].relation = 0;
                weeklyForeignRelationsChange -= 20;
                weeklyPoliticalStabilityChange -= 15;
                weeklySatisfactionChange -= 10;
                weeklyBudgetChange -= armySize * 200; // SavaÅŸ maliyeti
                weeklyInflationChange += 2; // SavaÅŸ enflasyonu
                weeklyCrimeRateChange += 0.5; // SavaÅŸ suÃ§ oranÄ±nÄ± artÄ±rÄ±r
                
                lastDecisionImpact = { type: 'ğŸ“ˆ Enflas.:', value: 2 };
                
                // Rastgele savaÅŸ sonucu
                setTimeout(() => {
                    const warOutcome = Math.random();
                    if (warOutcome > 0.6) {
                        addLog(`ğŸ–ï¸ ${countryName}'a karÅŸÄ± savaÅŸÄ± kazandÄ±nÄ±z!`, 'success');
                        weeklyForeignRelationsChange += 10;
                        weeklySatisfactionChange += 15;
                        weeklyGdpChangeFactor *= 1.05;
                        weeklyInflationChange -= 0.5; // Zafer enflasyonu azaltÄ±r
                    } else {
                        addLog(`ğŸ’€ ${countryName}'a karÅŸÄ± savaÅŸÄ± kaybettiniz! Ekonomik Ã§Ã¶kÃ¼ÅŸ yaÅŸanÄ±yor...`, 'danger');
                        weeklyBudgetChange -= 150000000;
                        weeklySatisfactionChange -= 25;
                        weeklyPoliticalStabilityChange -= 20;
                        weeklyInflationChange += 5; // BÃ¼yÃ¼k enflasyon artÄ±ÅŸÄ±
                        weeklyGdpChangeFactor *= 0.85; // Ekonomik Ã§Ã¶kÃ¼ÅŸ
                        weeklyCrimeRateChange += 2; // Kaybedilen savaÅŸ sonrasÄ± kaos
                        lastDecisionImpact = { type: 'ğŸ“ˆ Enflas.:', value: 5 };
                    }
                    isAtWar = false;
                    updateGameStats();
                }, 3000);
                
                updateGameStats();
            }
        };

        window.toggleSummitInvitation = function(countryName) {
            countries[countryName].summitInvited = !countries[countryName].summitInvited;
            addLog(`ğŸ“ ${countryName} zirve davet listesine ${countries[countryName].summitInvited ? 'eklendi' : 'Ã§Ä±karÄ±ldÄ±'}`, 'info');
        };

        function setupInvestmentButtons(inputId, decreaseBtnId, increaseBtnId, minVal, maxVal, step = 1) {
            const inputEl = document.getElementById(inputId);
            const decBtn = document.getElementById(decreaseBtnId);
            const incBtn = document.getElementById(increaseBtnId);
            
            if(inputEl && decBtn && incBtn) {
                decBtn.addEventListener('click', () => { 
                    inputEl.value = Math.max(minVal, parseInt(inputEl.value) - step); 
                });
                incBtn.addEventListener('click', () => { 
                    inputEl.value = Math.min(maxVal, parseInt(inputEl.value) + step); 
                });
            }
        }

        function setupAllEventListeners() {
            // Ä°sim modal
            if(startGameBtn) {
                startGameBtn.addEventListener('click', startGame);
            }
            
            if(leaderNameInput) {
                leaderNameInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') startGame();
                });
            }

            // Tema deÄŸiÅŸtirme
            if(themeToggleBtn) {
                themeToggleBtn.addEventListener('click', () => {
                    document.documentElement.classList.toggle('dark');
                    if (document.documentElement.classList.contains('dark')) {
                        themeToggleBtn.textContent = 'â˜€ï¸';
                    } else {
                        themeToggleBtn.textContent = 'ğŸŒ™';
                    }
                    drawCanvasStats();
                });
            }

            // Sekme navigasyonu
            if(tabButtons) {
                tabButtons.forEach(button => {
                    if(button) {
                        button.addEventListener('click', () => {
                            showScreen(button.dataset.tab);
                        });
                    }
                });
            }
            
            // Vergi slider
            const taxSlider = document.getElementById('tax-slider');
            const taxSliderValue = document.getElementById('tax-slider-value');
            
            if(taxSlider && taxSliderValue) {
                taxSlider.addEventListener('input', () => {
                    taxSliderValue.textContent = taxSlider.value;
                });
            }
            
            // Vergi uygulama
            const applyTaxBtn = document.getElementById('apply-tax');
            if(applyTaxBtn) {
                applyTaxBtn.addEventListener('click', () => {
                    addLog('ğŸ¦ Vergi politikasÄ± deÄŸerlendiriliyor...', 'info');
                    
                    const newTaxRate = taxSlider ? parseFloat(taxSlider.value) : taxes; 
                    const oldTaxes = taxes; 
                    taxes = newTaxRate;
                    const change = newTaxRate - oldTaxes; 
                    
                    const taxRateEl = document.getElementById('tax-rate');
                    if(taxRateEl) taxRateEl.textContent = taxes.toFixed(1);
                    
                    if (change > 0) { 
                        addLog(`ğŸ“ˆ Vergileri %${taxes.toFixed(1)} oranÄ±na yÃ¼kselttiniz.`, 'warning');
                        weeklySatisfactionChange -= change * 2.8; 
                        weeklyPoliticalStabilityChange -= change * 0.5; 
                        weeklyInflationChange += change * 0.1; // Vergi artÄ±ÅŸÄ± enflasyonu hafifÃ§e artÄ±rÄ±r
                        lastDecisionImpact = { type: 'ğŸ˜Š Memnun.:', value: -change * 2.8 };
                        if (taxes > 20) addLog("ğŸš¨ Halk arasÄ±nda bÃ¼yÃ¼k bir hoÅŸnutsuzluk var!", 'danger');
                    } else if (change < 0) { 
                        addLog(`ğŸ“‰ Vergileri %${taxes.toFixed(1)} oranÄ±na dÃ¼ÅŸÃ¼rdÃ¼nÃ¼z.`, 'info');
                        weeklySatisfactionChange -= change * 2.0; 
                        weeklyPoliticalStabilityChange -= change * 0.2; 
                        weeklyInflationChange -= change * 0.05; // Vergi azalÄ±ÅŸÄ± enflasyonu azaltÄ±r
                        lastDecisionImpact = { type: 'ğŸ˜Š Memnun.:', value: -change * 2.0 };
                        if (taxes < 8) addLog("âš ï¸ BÃ¼tÃ§e gelirlerinde ciddi dÃ¼ÅŸÃ¼ÅŸ bekleniyor.", 'warning');
                    } else {
                        addLog("ğŸ“Š Vergi oranÄ± deÄŸiÅŸmedi.", 'info');
                    }
                    
                    updateGameStats();
                });
            }

            // YatÄ±rÄ±m butonlarÄ±
            setupInvestmentButtons('economy-investment', 'decrease-economy-investment', 'increase-economy-investment', 1, 100);
            setupInvestmentButtons('education-investment', 'decrease-education-investment', 'increase-education-investment', 1, 50);
            setupInvestmentButtons('health-investment', 'decrease-health-investment', 'increase-health-investment', 1, 50);
            setupInvestmentButtons('culture-investment', 'decrease-culture-investment', 'increase-culture-investment', 1, 30);

            // TÃ¼m yatÄ±rÄ±m butonlarÄ±
            const investEconomyBtn = document.getElementById('invest-economy');
            if(investEconomyBtn) {
                investEconomyBtn.addEventListener('click', () => {
                    const economyInvestmentInput = document.getElementById('economy-investment');
                    const amount = economyInvestmentInput ? parseInt(economyInvestmentInput.value) : 10;
                    if(makeInvestment('Ekonomi', amount, 0.12, 0.06, 0.15, cabinet.economy)) {
                        addLog(`ğŸ’¼ Ekonomiye $${amount}M yatÄ±rÄ±m onaylandÄ±.`, 'success');
                    }
                    updateGameStats();
                });
            }
             
            const investEducationBtn = document.getElementById('invest-education');
            if(investEducationBtn) {
                investEducationBtn.addEventListener('click', () => {
                    const educationInvestmentInput = document.getElementById('education-investment');
                    const amount = educationInvestmentInput ? parseInt(educationInvestmentInput.value) : 5; 
                    if(makeInvestment('EÄŸitim', amount, 0.01, 0.005, 0.6, cabinet.education)) {
                        educationSpending += amount * 1000000 * cabinet.education.efficiency;
                        addLog(`ğŸ“ EÄŸitime $${amount}M yatÄ±rÄ±m onaylandÄ±.`, 'success');
                    }
                    updateGameStats();
                });
            }
            
            const investHealthBtn = document.getElementById('invest-health');
            if(investHealthBtn) {
                investHealthBtn.addEventListener('click', () => {
                    const healthInvestmentInput = document.getElementById('health-investment');
                    const amount = healthInvestmentInput ? parseInt(healthInvestmentInput.value) : 7; 
                    if(makeInvestment('SaÄŸlÄ±k', amount, 0.015, 0.007, 0.75, cabinet.health)) {
                        healthSpending += amount * 1000000 * cabinet.health.efficiency;
                        addLog(`ğŸ¥ SaÄŸlÄ±ÄŸa $${amount}M yatÄ±rÄ±m onaylandÄ±.`, 'success');
                    }
                    updateGameStats();
                });
            }
            
            const promoteCultureBtn = document.getElementById('promote-culture');
            if(promoteCultureBtn) {
                promoteCultureBtn.addEventListener('click', () => {
                    const cultureInvestmentInput = document.getElementById('culture-investment');
                    const amount = cultureInvestmentInput ? parseInt(cultureInvestmentInput.value) : 3; 
                    if(makeInvestment('KÃ¼ltÃ¼r', amount, 0.005, 0.002, 0.35, cabinet.economy)) {
                        cultureSpending += amount * 1000000;
                        addLog(`ğŸ­ KÃ¼ltÃ¼re $${amount}M yatÄ±rÄ±m onaylandÄ±.`, 'success');
                    }
                    updateGameStats();
                });
            }

            // Tatil ilan etme
            const declareHolidayBtn = document.getElementById('declare-holiday');
            if(declareHolidayBtn) {
                declareHolidayBtn.addEventListener('click', () => {
                    addLog('ğŸ‰ Yeni ulusal tatil planlanÄ±yor...', 'info');
                    
                    const cost = 2000000;
                    if (budget < cost) {
                        addLog("âŒ Tatil ilan etmek iÃ§in yeterli bÃ¼tÃ§e yok!", 'warning');
                        return;
                    }
                    
                    budget -= cost;
                    nationalHolidays++;
                    weeklySatisfactionChange += 4;
                    weeklyPoliticalStabilityChange += 1;
                    weeklyInflationChange += 0.05; // Tatil harcamalarÄ± enflasyonu artÄ±rÄ±r
                    
                    lastDecisionImpact = { type: 'ğŸ˜Š Memnun.:', value: 4 };
                    
                    addLog(`ğŸŠ Yeni ulusal tatil ilan edildi! Toplam tatil sayÄ±sÄ±: ${nationalHolidays}`, 'success');
                    updateGameStats();
                });
            }

            // Protesto mÃ¼dahale butonlarÄ±
            const negotiateProtestersBtn = document.getElementById('negotiate-protesters');
            if(negotiateProtestersBtn) {
                negotiateProtestersBtn.addEventListener('click', () => {
                    handleProtestAction('negotiate');
                });
            }

            const ignoreProtestsBtn = document.getElementById('ignore-protests');
            if(ignoreProtestsBtn) {
                ignoreProtestsBtn.addEventListener('click', () => {
                    handleProtestAction('ignore');
                });
            }

            const disperseProtestsPeacefulBtn = document.getElementById('disperse-protests-peaceful');
            if(disperseProtestsPeacefulBtn) {
                disperseProtestsPeacefulBtn.addEventListener('click', () => {
                    handleProtestAction('peaceful');
                });
            }

            const disperseProtestsForceBtn = document.getElementById('disperse-protests-force');
            if(disperseProtestsForceBtn) {
                disperseProtestsForceBtn.addEventListener('click', () => {
                    handleProtestAction('force');
                });
            }
            
            // Zaman yÃ¶netimi butonlarÄ±
            const advanceDayBtn = document.getElementById('advance-day-btn');
            const completeWeekReportsBtn = document.getElementById('complete-week-reports-btn');
            
            if(advanceDayBtn) {
                advanceDayBtn.addEventListener('click', () => {
                    if (dayOfWeek <= 7 && !isAtWar) { 
                        advanceOneDay(); 
                    } else if (isAtWar) { 
                        addLog("âš”ï¸ SavaÅŸ devam ederken gÃ¼nÃ¼ ilerletemezsiniz!", "warning", true); 
                    } else { 
                        addLog("ğŸ“… Hafta tamamlandÄ±. Ana ekrandan 'HaftayÄ± Bitir' ile ilerleyebilirsiniz.", "warning", true); 
                    }
                });
            }
            
            if(completeWeekReportsBtn) {
                completeWeekReportsBtn.addEventListener('click', () => {
                    if (isAtWar) { 
                        addLog("âš”ï¸ SavaÅŸ devam ederken haftayÄ± tamamlayamazsÄ±nÄ±z!", "warning", true); 
                        return; 
                    }
                    
                    addLog("â© HaftanÄ±n geri kalanÄ± hÄ±zla tamamlanÄ±yor...", "event", true);
                    
                    let safetyCounter = 0; 
                    while(dayOfWeek <= 7 && safetyCounter < 10) { 
                        advanceOneDay(); 
                        safetyCounter++;
                    }
                });
            }
            
            // Hafta bitirme
            const endWeekBtn = document.getElementById('end-week-btn');
            if(endWeekBtn) {
                endWeekBtn.addEventListener('click', () => { 
                    if (!isAtWar) {
                        endWeek();
                    } else {
                        addLog("âš”ï¸ SavaÅŸ devam ederken haftayÄ± bitiremezsiniz!", "warning");
                    }
                });
            }
            
            // Oyunu yeniden baÅŸlatma
            const restartGameBtn = document.getElementById('restart-game-btn');
            if(restartGameBtn) {
                restartGameBtn.addEventListener('click', () => { 
                    if(confirm("Oyunu yeniden baÅŸlatmak istediÄŸinizden emin misiniz?")) {
                        resetGame(); 
                    }
                });
            }
        } 
        
        // Sayfa yÃ¼klendiÄŸinde baÅŸlat
        document.addEventListener('DOMContentLoaded', () => {
            setupAllEventListeners(); 
            initTheme();
            resetGame(); 
        });

    </script>
</body>
</html>
