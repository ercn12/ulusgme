[replace_code]
<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ulus SimÃ¼latÃ¶rÃ¼</title>
    <style>
        :root {
            --bg-color: #ecf0f1;
            --container-bg: #fff;
            --text-color: #2c3e50;
            --primary-color: #3498db;
            --secondary-color: #1abc9c;
            --danger-color: #e74c3c;
            --warning-color: #f39c12;
            --success-color: #2ecc71;
            --panel-bg: #f5f7fa;
            --border-color: #dfe4ea;
            --accent-color: #5D5CDE;
            --header-color: #1abc9c;
            --input-bg: #ecf0f1;
            --tab-active-color: #5D5CDE;
        }

        .dark {
            --bg-color: #181818;
            --container-bg: #2c3e50;
            --text-color: #ecf0f1;
            --primary-color: #5D5CDE;
            --secondary-color: #1abc9c;
            --danger-color: #e74c3c;
            --warning-color: #f39c12;
            --success-color: #2ecc71;
            --panel-bg: #34495e;
            --border-color: #4e6a83;
            --header-color: #1abc9c;
            --input-bg: #4e6a83;
            --tab-active-color: #5D5CDE;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            box-sizing: border-box;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .game-container {
            background-color: var(--container-bg);
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            padding: 20px;
            width: 95%;
            max-width: 1200px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            transition: background-color 0.3s ease;
        }

        h1 {
            text-align: center;
            color: var(--header-color);
            margin-bottom: 20px;
        }

        /* Sekme Navigasyonu */
        .tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 10px;
            gap: 10px; /* Sekmeler arasÄ± boÅŸluk */
            flex-wrap: wrap; /* KÃ¼Ã§Ã¼k ekranlarda sarmalama */
        }

        .tab-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 5px 5px 0 0; /* Ãœst kÃ¶ÅŸeleri yuvarlak */
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.2s ease, transform 0.1s ease;
            flex-grow: 1; /* Esnek bÃ¼yÃ¼me */
            min-width: 120px; /* Minimum geniÅŸlik */
        }

        @media (max-width: 768px) {
            .tab-btn {
                min-width: 90px;
                padding: 10px 12px;
                font-size: 0.9em;
            }
        }

        .tab-btn:hover {
            background-color: var(--primary-color);
            opacity: 0.9;
            transform: translateY(-2px); /* Hafif yukarÄ± kalkma efekti */
        }

        .tab-btn.active {
            background-color: var(--tab-active-color); /* Aktif sekme rengi */
            font-weight: bold;
            border-bottom: 2px solid var(--tab-active-color); /* Aktif sekmede alt Ã§izgi */
            transform: translateY(0); /* Sabit konum */
        }

        /* TÃ¼m ekranlarÄ± gizle */
        .game-screen {
            display: none;
            background-color: var(--container-bg); /* TÃ¼m ekranlar iÃ§in ortak arka plan */
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            min-height: 500px; /* Ekranlar arasÄ± boÅŸluÄŸu korumak iÃ§in */
            overflow-y: auto; /* Ä°Ã§erik taÅŸarsa kaydÄ±rma */
        }

        /* Ana oyun ekranÄ±nÄ±n dÃ¼zenini korumak iÃ§in */
        #main-screen {
            display: grid; /* Flexbox ile ana konteyneri yÃ¶nettik, iÃ§ini grid ile */
            grid-template-columns: 1fr 1.5fr;
            grid-template-rows: auto 1fr; /* Ä°statistikler ve eylemler Ã¼stte, log ve canvas altta */
            gap: 20px;
            grid-template-areas:
                "stats actions"
                "log canvas";
        }

        @media (max-width: 768px) {
            #main-screen {
                grid-template-columns: 1fr;
                grid-template-areas:
                    "stats"
                    "actions"
                    "log"
                    "canvas";
            }

            .game-container {
                padding: 15px;
                width: 98%;
            }
        }

        #main-screen.active {
            display: grid;
        }

        .stats-panel {
            grid-area: stats;
            background-color: var(--panel-bg);
            padding: 20px;
            border-radius: 6px;
            border-left: 5px solid var(--secondary-color);
        }

        .stats-panel p {
            margin: 10px 0;
            font-size: 1.1em;
        }

        .stats-panel span {
            font-weight: bold;
            color: var(--text-color);
        }

        .actions-panel {
            grid-area: actions;
            background-color: var(--panel-bg);
            padding: 20px;
            border-radius: 6px;
            border-left: 5px solid var(--warning-color);
        }

        .actions-panel h2 {
            color: var(--warning-color);
            margin-top: 0;
            margin-bottom: 15px;
        }

        .action-category {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px dashed var(--border-color);
        }

        .action-category:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .action-category h3 {
            color: var(--warning-color);
            margin-top: 0;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 15px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.95em;
            transition: background-color 0.2s ease;
        }

        button:hover {
            background-color: var(--primary-color);
            opacity: 0.9;
        }

        button:disabled {
            background-color: #7f8c8d;
            cursor: not-allowed;
            opacity: 0.7;
        }

        .log-panel {
            grid-area: log;
            background-color: var(--panel-bg);
            padding: 20px;
            border-radius: 6px;
            border-left: 5px solid #9b59b6;
            overflow-y: auto;
            max-height: 300px; /* Log paneli iÃ§in maksimum yÃ¼kseklik */
        }

        .log-panel h2 {
            color: #9b59b6;
            margin-top: 0;
            margin-bottom: 15px;
        }

        #game-log {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        #game-log li {
            background-color: var(--container-bg);
            padding: 8px 12px;
            margin-bottom: 5px;
            border-radius: 4px;
            font-size: 0.9em;
        }
         #game-log li.daily { /* GÃ¼nlÃ¼k loglar iÃ§in farklÄ± stil */
            font-style: italic;
            color: var(--accent-color);
            opacity: 0.8;
            font-size: 0.85em;
            border-left: 3px solid var(--accent-color);
            padding-left: 10px;
        }


        #gameCanvas {
            grid-area: canvas;
            background-color: var(--panel-bg);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            width: 100%;
            height: 300px; /* Canvas boyutu */
        }

        /* Yeni EkranlarÄ±n Genel Stili */
        .game-screen h2 {
            color: var(--warning-color); /* SarÄ±msÄ± baÅŸlÄ±k rengi */
            margin-bottom: 20px;
            text-align: center;
        }
        .game-screen h3 {
            color: var(--secondary-color);
            margin-top: 20px;
            margin-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 5px;
        }


        .game-screen ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .game-screen li {
            background-color: var(--panel-bg);
            padding: 10px 15px;
            margin-bottom: 8px;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1.05em;
        }
         .game-screen li div { /* ButonlarÄ± saÄŸa yaslamak iÃ§in */
            display: flex;
            gap: 5px;
            flex-wrap: wrap; /* Butonlar sÄ±ÄŸmazsa alt satÄ±ra geÃ§sin */
        }


        .game-screen .cabinet-actions,
        .game-screen .parliament-propose,
        .game-screen .security-actions,
        .game-screen .foreign-actions,
        .game-screen .opposition-actions,
        .game-screen .reports-actions { /* Rapor ekranÄ± iÃ§in eylem alanÄ± */
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
            justify-content: center; /* ButonlarÄ± ortala */
            margin-bottom: 15px;
        }


        .game-screen input[type="text"],
        .game-screen input[type="number"],
        .game-screen select {
            padding: 10px;
            border-radius: 5px;
            border: 1px solid var(--border-color);
            background-color: var(--input-bg);
            color: var(--text-color);
            font-size: 1em;
            flex-grow: 1;
            min-width: 150px;
        }

        .game-screen .parliament-note,
        .game-screen .security-note {
            font-style: italic;
            font-size: 0.9em;
            color: #bdc3c7;
            margin-top: 10px;
            text-align: center;
        }

        /* Oyun Sonu EkranÄ± */
        #game-over-screen {
            display: flex; /* Flexbox ile ortalama */
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            min-height: 500px;
        }

        #game-over-screen h1 {
            color: var(--danger-color);
            margin-bottom: 20px;
        }

        #game-over-screen p {
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        #game-over-screen button {
            background-color: var(--danger-color);
            padding: 15px 30px;
            font-size: 1.2em;
            margin-top: 30px;
        }

        #game-over-screen button:hover {
            background-color: var(--danger-color);
            opacity: 0.9;
        }

        /* Meclis Action butonlarÄ± */
        .parliament-action-btn {
            padding: 8px 12px;
            margin-left: 5px;
            font-size: 0.85em;
        }

        .parliament-action-btn[data-action="approve"] {
            background-color: var(--success-color);
        }
        .parliament-action-btn[data-action="approve"]:hover {
            background-color: var(--success-color);
            opacity: 0.9;
        }
        .parliament-action-btn[data-action="reject"] {
            background-color: var(--danger-color);
        }
        .parliament-action-btn[data-action="reject"]:hover {
            background-color: var(--danger-color);
            opacity: 0.9;
        }

        /* DÄ±ÅŸ Ä°liÅŸkiler listesi */
        #country-relations-list button, #summit-invitation-list button {
            padding: 6px 10px;
            font-size: 0.8em;
            margin-left: 5px;
        }

        #country-relations-list li, #summit-invitation-list li {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap; /* KÃ¼Ã§Ã¼k ekranlarda sarmalama */
        }


        /* Dark Mode Toggle */
        .theme-toggle {
            position: absolute;
            top: 15px;
            right: 15px;
            background-color: transparent;
            border: none;
            cursor: pointer;
            font-size: 1.5rem;
            color: var(--text-color);
            z-index: 100;
        }

        /* Chart styles */
        #reportChartCanvas {
            background-color: var(--panel-bg);
            border-radius: 6px;
            max-width: 100%;
            height: auto;
            margin-top: 20px;
        }

        /* Yeni Ã¶zellikler iÃ§in stiller */
        .slider-container {
            margin: 15px 0;
        }

        .slider-container label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .slider-container input[type="range"] {
            width: 100%;
            height: 10px;
            border-radius: 5px;
            background: var(--panel-bg);
            outline: none;
            -webkit-appearance: none;
        }

        .slider-container input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--accent-color);
            cursor: pointer;
        }

        .flex-row {
            display: flex;
            gap: 10px;
            align-items: center;
            margin: 10px 0;
            flex-wrap: wrap;
        }

        .input-with-buttons {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .input-with-buttons input {
            width: 100px;
            text-align: center;
        }

        .input-with-buttons button {
            padding: 8px 12px;
            font-size: 1em;
        }

        .minister-advice {
            background-color: var(--panel-bg);
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            border-left: 5px solid var(--accent-color);
        }

        .minister-advice h3 {
            margin-top: 0;
            color: var(--accent-color);
        }

        .policy-slider {
            margin: 15px 0;
        }

        .policy-slider-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px;
        }

        .policy-value {
            font-weight: bold;
        }

        /* Tooltip styles */
        .tooltip {
            position: relative;
            display: inline-block;
            margin-left: 5px;
            cursor: help;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: rgba(0, 0, 0, 0.8);
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.9em;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        @media (max-width: 480px) {
            button {
                padding: 8px 12px;
                font-size: 0.85em;
                margin: 3px;
            }
            
            .stats-panel p, .actions-panel h3 {
                font-size: 0.95em;
            }
             .game-screen li div {
                justify-content: flex-start; /* Mobil iÃ§in butonlarÄ± sola yasla */
            }
        }
    </style>
</head>
<body>
    <button id="theme-toggle" class="theme-toggle" aria-label="Toggle dark/light mode">ğŸŒ“</button>
    <div class="game-container">
        <h1>Ulus SimÃ¼latÃ¶rÃ¼</h1>

        <div class="tabs">
            <button class="tab-btn active" data-tab="main-screen">Ana Ekran</button>
            <button class="tab-btn" data-tab="cabinet-screen">Kabine</button>
            <button class="tab-btn" data-tab="parliament-screen">Meclis & Siyaset</button>
            <button class="tab-btn" data-tab="foreign-affairs-screen">DÄ±ÅŸ Ä°liÅŸkiler & Zirveler</button>
            <button class="tab-btn" data-tab="security-screen">GÃ¼venlik & Ordu</button>
            <button class="tab-btn" data-tab="reports-screen">Raporlar & Zaman</button>
        </div>

        <div id="main-screen" class="game-screen active">
            <div class="stats-panel">
                <p>Hafta: <span id="current-week">1</span> (GÃ¼n: <span id="current-day-of-week">1</span>)</p>
                <p>NÃ¼fus: <span id="population">10,000,000</span></p>
                <p>GSYÄ°H: $<span id="gdp">1,000,000,000</span></p>
                <p>Enflasyon: <span id="inflation">2</span>%</p>
                <p>Halk Memnuniyeti: <span id="satisfaction">70</span>%</p>
                <p>BÃ¼tÃ§e: $<span id="budget">100,000,000</span></p>
                <p>Vergi OranÄ±: <span id="tax-rate">10</span>%</p>
                <p>HÃ¼kÃ¼met Tipi: <span id="government-type-display">Demokrasi</span></p>
                <p>Siyasi Sistem: <span id="political-system">Demokrasi</span></p>
                <p>Siyasi Ä°stikrar: <span id="political-stability">70</span>%</p>
                <p>DÄ±ÅŸ Ä°liÅŸkiler Skoru: <span id="foreign-relations-score">50</span></p>
                <p>Ordu BÃ¼yÃ¼klÃ¼ÄŸÃ¼: <span id="army-size-display">50000</span></p>
                 <p>Medya Ã–zgÃ¼rlÃ¼ÄŸÃ¼: <span id="media-freedom-display">7</span>/10</p>
            </div>

            <div class="actions-panel">
                <h2>Kararlar</h2>
                <div class="action-category">
                    <h3>Vergi AyarlarÄ±</h3>
                    <div class="slider-container">
                        <label for="tax-slider">Vergi OranÄ±: <span id="tax-slider-value">10</span>%</label>
                        <input type="range" id="tax-slider" min="5" max="30" step="0.1" value="10">
                    </div>
                    <button id="apply-tax">Vergi OranÄ±nÄ± Uygula</button>
                </div>
                
                <div class="action-category">
                    <h3>Ekonomi</h3>
                    <div class="flex-row">
                        <label for="economy-investment">Ekonomiye YatÄ±rÄ±m ($M):</label>
                        <div class="input-with-buttons">
                            <button id="decrease-economy-investment">-</button>
                            <input type="number" id="economy-investment" value="10" min="1" max="100">
                            <button id="increase-economy-investment">+</button>
                        </div>
                        <button id="invest-economy">YatÄ±rÄ±m Yap</button>
                    </div>
                </div>
                
                <div class="action-category">
                    <h3>Sosyal Politikalar</h3>
                    <div class="flex-row">
                        <label for="education-investment">EÄŸitime YatÄ±rÄ±m ($M):</label>
                        <div class="input-with-buttons">
                            <button id="decrease-education-investment">-</button>
                            <input type="number" id="education-investment" value="5" min="1" max="50">
                            <button id="increase-education-investment">+</button>
                        </div>
                        <button id="invest-education">YatÄ±rÄ±m Yap</button>
                    </div>
                    
                    <div class="flex-row">
                        <label for="health-investment">SaÄŸlÄ±ÄŸa YatÄ±rÄ±m ($M):</label>
                        <div class="input-with-buttons">
                            <button id="decrease-health-investment">-</button>
                            <input type="number" id="health-investment" value="7" min="1" max="50">
                            <button id="increase-health-investment">+</button>
                        </div>
                        <button id="invest-health">YatÄ±rÄ±m Yap</button>
                    </div>
                    
                    <div class="flex-row">
                        <label for="culture-investment">KÃ¼ltÃ¼re YatÄ±rÄ±m ($M):</label>
                        <div class="input-with-buttons">
                            <button id="decrease-culture-investment">-</button>
                            <input type="number" id="culture-investment" value="3" min="1" max="30">
                            <button id="increase-culture-investment">+</button>
                        </div>
                        <button id="promote-culture">YatÄ±rÄ±m Yap</button>
                    </div>
                    
                    <button id="declare-holiday">Yeni Tatil Ä°lan Et ($2M)</button>
                </div>
                 <div class="action-category">
                    <h3>Yeni Politikalar</h3>
                    <button id="invest-green-energy">YeÅŸil Enerjiye YatÄ±rÄ±m Yap ($20M)</button>
                    <button id="develop-defense-industry">Savunma Sanayii GeliÅŸtir ($50M)</button>
                </div>
                <button id="end-week-btn">HaftayÄ± Bitir</button>
            </div>

            <div class="log-panel">
                <h2>Olay GÃ¼nlÃ¼ÄŸÃ¼</h2>
                <ul id="game-log"></ul>
            </div>

            <canvas id="gameCanvas"></canvas>
        </div>

        <div id="cabinet-screen" class="game-screen">
            <h2>Kabine YÃ¶netimi</h2>
            <p>Mevcut Kabine Ãœyeleri:</p>
            <ul id="cabinet-list">
            </ul>
            
            <div class="minister-advice" id="cabinet-advice">
                <h3>Bakan RaporlarÄ±</h3>
                <div id="economy-minister-advice">
                    <p><strong>Ekonomi BakanÄ±:</strong> <span id="economy-advice-text">HenÃ¼z rapor verilmedi.</span></p>
                </div>
                <div id="education-minister-advice">
                    <p><strong>EÄŸitim BakanÄ±:</strong> <span id="education-advice-text">HenÃ¼z rapor verilmedi.</span></p>
                </div>
                <div id="health-minister-advice">
                    <p><strong>SaÄŸlÄ±k BakanÄ±:</strong> <span id="health-advice-text">HenÃ¼z rapor verilmedi.</span></p>
                </div>
                <div id="foreign-minister-advice">
                    <p><strong>DÄ±ÅŸiÅŸleri BakanÄ±:</strong> <span id="foreign-advice-text">HenÃ¼z rapor verilmedi.</span></p>
                </div>
                <div id="interior-minister-advice">
                    <p><strong>Ä°Ã§iÅŸleri BakanÄ±:</strong> <span id="interior-advice-text">HenÃ¼z rapor verilmedi.</span></p>
                </div>
                <div id="justice-minister-advice">
                    <p><strong>Adalet BakanÄ±:</strong> <span id="justice-advice-text">HenÃ¼z rapor verilmedi.</span></p>
                </div>
                 <div id="defense-minister-advice">
                    <p><strong>Savunma BakanÄ±:</strong> <span id="defense-advice-text">HenÃ¼z rapor verilmedi.</span></p>
                </div>
            </div>
            
            <h3>Bakan AtamalarÄ± / DeÄŸiÅŸiklikleri</h3>
            <div class="cabinet-actions">
                <select id="minister-type-select">
                    <option value="economy">Ekonomi BakanÄ±</option>
                    <option value="education">EÄŸitim BakanÄ±</option>
                    <option value="health">SaÄŸlÄ±k BakanÄ±</option>
                    <option value="foreign">DÄ±ÅŸiÅŸleri BakanÄ±</option>
                    <option value="interior">Ä°Ã§iÅŸleri BakanÄ±</option>
                    <option value="justice">Adalet BakanÄ±</option>
                    <option value="defense">Savunma BakanÄ±</option>
                </select>
                <input type="text" id="minister-name-input" placeholder="Yeni Bakan AdÄ± (isteÄŸe baÄŸlÄ±)">
                <button id="appoint-minister-btn">Bakan Ata / DeÄŸiÅŸtir ($500K)</button>
            </div>
            <p>Kabine kararlarÄ± haftalÄ±k sÃ¼reÃ§leri etkiler.</p>
        </div>

        <div id="parliament-screen" class="game-screen">
            <h2>Meclis & Siyaset</h2>
            <p>HÃ¼kÃ¼met Tipi: <span id="government-type-parliament">Demokrasi</span></p>
            <p>Meclis DesteÄŸi: <span id="parliament-support"></span></p>
            <p>Muhalefet GÃ¼cÃ¼: <span id="opposition-strength-display"></span></p>
             <h3>Medya & Ä°fade Ã–zgÃ¼rlÃ¼ÄŸÃ¼</h3>
            <div class="policy-slider">
                <div class="policy-slider-header">
                    <label for="media-freedom-slider">Medya Ã–zgÃ¼rlÃ¼ÄŸÃ¼ PolitikasÄ± (Hedef: <span id="media-freedom-target-value">7</span>/10)</label>
                    <span class="policy-value" id="media-freedom-value-display">7</span>
                </div>
                <input type="range" id="media-freedom-slider" min="0" max="10" value="7">
                <button id="apply-media-policy">Medya PolitikasÄ±nÄ± GÃ¼ncelle</button>
            </div>
            <div class="opposition-actions">
                 <button id="start-propaganda-btn">Devlet PropagandasÄ± BaÅŸlat ($5M)</button>
                 <button id="apply-censorship-btn">SansÃ¼r Uygula</button>
            </div>

            <h3>Yasama PolitikalarÄ±</h3>
            <div class="policy-slider">
                <div class="policy-slider-header">
                    <h3>Sosyal Politikalar</h3>
                    <span class="policy-value" id="social-policy-value">5</span>
                </div>
                <input type="range" id="social-policy-slider" min="1" max="10" value="5">
                <div class="tooltip">â„¹ï¸
                    <span class="tooltiptext">Sosyal politikalarÄ± artÄ±rmak halk memnuniyetini artÄ±rÄ±r ancak bÃ¼tÃ§eye yÃ¼k getirir.</span>
                </div>
                <button id="apply-social-policy">Uygula</button>
            </div>
            
            <div class="policy-slider">
                <div class="policy-slider-header">
                    <h3>Ekonomi PolitikalarÄ±</h3>
                    <span class="policy-value" id="economic-policy-value">5</span>
                </div>
                <input type="range" id="economic-policy-slider" min="1" max="10" value="5">
                <div class="tooltip">â„¹ï¸
                    <span class="tooltiptext">Ekonomi politikalarÄ±nÄ± deÄŸiÅŸtirmek GSYÄ°H ve enflasyonu etkiler.</span>
                </div>
                <button id="apply-economic-policy">Uygula</button>
            </div>
            
            <h3>GÃ¼ndemdeki Yasalar / Talepler</h3>
            <ul id="parliament-agenda">
            </ul>
            <h3>Sizin Teklifleriniz</h3>
            <div class="parliament-propose">
                <input type="text" id="proposal-input" placeholder="Yeni yasa teklifi">
                <button id="propose-law-btn">Yasa Teklif Et</button>
            </div>
            <h3>Muhalefet Ä°liÅŸkileri</h3>
            <div class="opposition-actions">
                <button id="meet-opposition-closed-btn">Muhalefetle KapalÄ± GÃ¶rÃ¼ÅŸ ($500K)</button>
                <button id="meet-opposition-open-btn">Muhalefetle AÃ§Ä±k GÃ¶rÃ¼ÅŸ ($200K)</button>
            </div>
            <h3>Radikal Kararlar</h3>
            <div class="parliament-propose">
                 <button id="call-elections">Erken SeÃ§im Ã‡aÄŸrÄ±sÄ± Yap ($10M)</button>
                 <button id="declare-dictatorship">DiktatÃ¶rlÃ¼k Ä°lan Et</button>
                 <button id="dissolve-parliament-btn">Meclisi Feshet</button>
            </div>
            <p class="parliament-note">Meclisi feshetmek veya diktatÃ¶rlÃ¼k ilan etmek ciddi sonuÃ§lar doÄŸurabilir.</p>
        </div>

        <div id="foreign-affairs-screen" class="game-screen">
            <h2>DÄ±ÅŸ Ä°liÅŸkiler & Zirveler</h2>
            <p>Genel DÄ±ÅŸ Ä°liÅŸkiler PuanÄ±: <span id="foreign-relations-display"></span></p>
            
            <div class="policy-slider">
                <div class="policy-slider-header">
                    <h3>Diplomatik YaklaÅŸÄ±m</h3>
                    <span class="policy-value" id="diplomatic-approach-value">5</span>
                </div>
                <input type="range" id="diplomatic-approach-slider" min="1" max="10" value="5">
                <div class="tooltip">â„¹ï¸
                    <span class="tooltiptext">1: Agresif, 10: UzlaÅŸmacÄ±. Diplomatik yaklaÅŸÄ±mÄ±nÄ±z dÄ±ÅŸ iliÅŸkileri ve ticari fÄ±rsatlarÄ± etkiler.</span>
                </div>
                <button id="apply-diplomatic-approach">Uygula</button>
            </div>
            
            <h3>Ãœlkelerle Ä°liÅŸkiler</h3>
            <ul id="country-relations-list">
            </ul>

            <h3>Zirve YÃ¶netimi</h3>
            <div class="foreign-actions">
                 <button id="create-summit-btn">Zirve DÃ¼zenle ($15M)</button>
            </div>
            <p>Zirveye davet edilecek Ã¼lkeler (En fazla 5):</p>
            <ul id="summit-invitation-list"></ul>
            <div class="foreign-actions">
                <button id="send-summit-invitations-btn" disabled>Davetleri GÃ¶nder</button>
            </div>


            <h3>Gelen Davetler / Olaylar</h3>
            <ul id="foreign-events-list">
            </ul>
            <h3>Genel Diplomatik Eylemler</h3>
            <div class="foreign-actions">
                <button id="global-summit-btn">UluslararasÄ± Zirveye KatÄ±l ($10M)</button>
                <button id="sign-trade-deal">Ticaret AnlaÅŸmasÄ± Ä°mzala (Uygun Ãœlkeyle - $3M)</button>
                <button id="improve-relations">DÄ±ÅŸ Ä°liÅŸkileri GeliÅŸtir (Genel - $2M)</button>
                <button id="declare-war">SavaÅŸ Ä°lan Et (En KÃ¶tÃ¼ Ä°liÅŸkili Ãœlkeye)</button>
            </div>
        </div>

        <div id="security-screen" class="game-screen">
            <h2>GÃ¼venlik & Ordu</h2>
            <p>SuÃ§ OranÄ±: <span id="crime-rate">5</span>%</p>
            <p>HalkÄ±n GÃ¼venlik AlgÄ±sÄ±: <span id="security-perception">75</span>%</p>
            <p>Ordu BÃ¼yÃ¼klÃ¼ÄŸÃ¼: <span id="army-size-security">50000</span></p>
            <p>Askeri GÃ¼Ã§ Endeksi: <span id="military-strength-index">50</span></p>
            <p>Ordu Sadakati: <span id="army-loyalty-display">YÃ¼ksek</span></p>
            
            <div class="policy-slider">
                <div class="policy-slider-header">
                    <h3>GÃ¼venlik Seviyesi (Ä°Ã§ Polisaj)</h3>
                    <span class="policy-value" id="security-level-value">5</span>
                </div>
                <input type="range" id="security-level-slider" min="1" max="10" value="5">
                <div class="tooltip">â„¹ï¸
                    <span class="tooltiptext">GÃ¼venlik seviyesini artÄ±rmak suÃ§larÄ± azaltabilir ancak Ã¶zgÃ¼rlÃ¼kleri kÄ±sÄ±tlayabilir.</span>
                </div>
                <button id="apply-security-level">Uygula</button>
            </div>
            
            <h3>Emniyet / Adalet KararlarÄ±</h3>
            <div class="flex-row">
                <label for="police-budget">Polis BÃ¼tÃ§esi ($M):</label>
                <div class="input-with-buttons">
                    <button id="decrease-police-budget">-</button>
                    <input type="number" id="police-budget" value="3" min="1" max="20">
                    <button id="increase-police-budget">+</button>
                </div>
                <button id="increase-police-budget-btn">Uygula</button>
            </div>
            <div class="security-actions">
                <button id="reform-justice">Adalet Sistemini Reforme Et ($5M)</button>
                <button id="surveillance-program">GÃ¶zetim ProgramÄ± BaÅŸlat ($4M)</button>
                <button id="crackdown-dissent" title="Sadece DiktatÃ¶rlÃ¼kte etkili">Muhalefeti BastÄ±r ($2M+)</button>
            </div>
            <p class="security-note">GÃ¶zetim programlarÄ± ve muhalefeti bastÄ±rma, suÃ§ oranÄ±nÄ± dÃ¼ÅŸÃ¼rebilir ancak halk memnuniyetini ve siyasi istikrarÄ± ciddi ÅŸekilde etkileyebilir.</p>

            <h3>Askeri Kararlar</h3>
             <div class="flex-row">
                <label for="recruit-soldiers">Asker AlÄ±mÄ± (x1000 kiÅŸi):</label>
                <div class="input-with-buttons">
                    <button id="decrease-recruits">-</button>
                    <input type="number" id="recruit-soldiers-input" value="5" min="1" max="50">
                    <button id="increase-recruits">+</button>
                </div>
                <button id="recruit-soldiers-btn">Asker Al ($1M/1000 asker)</button>
            </div>
            <div class="security-actions">
                <button id="plan-war-btn">SavaÅŸ PlanlamasÄ± Yap ($5M)</button>
                <button id="military-exercise-btn">Askeri Tatbikat DÃ¼zenle ($10M+)</button>
                <button id="military-council-meeting-btn">Askeri Åura ile ToplantÄ± ($1M)</button>
            </div>
        </div>

        <div id="reports-screen" class="game-screen">
            <h2>Raporlar & Zaman YÃ¶netimi</h2>
            <p>Mevcut Tarih: Hafta <span id="report-current-week">1</span>, GÃ¼n <span id="report-current-day">1</span></p>
            <div class="reports-actions">
                <button id="advance-day-btn">GÃ¼nÃ¼ Ä°lerlet (1 GÃ¼n)</button>
                <button id="complete-week-reports-btn" disabled>HaftayÄ± Tamamla</button>
            </div>
            <hr>
            
            <div class="minister-advice">
                <h3>Ekonomi BakanlÄ±ÄŸÄ± Raporu</h3>
                <p>GSYÄ°H DeÄŸiÅŸimi (HaftalÄ±k): <span id="gdp-change-report-display">-</span></p>
                <p>Enflasyon DeÄŸiÅŸimi (HaftalÄ±k): <span id="inflation-change-report-display">-</span></p>
                <p id="economy-report-inflation">Enflasyon Analizi: <span id="inflation-analysis">HenÃ¼z analiz yapÄ±lmadÄ±.</span></p>
                <p id="economy-report-gdp">GSYÄ°H Durumu: <span id="gdp-analysis">HenÃ¼z analiz yapÄ±lmadÄ±.</span></p>
                <p id="economy-report-advice">Ã–neriler: <span id="economy-recommendations">HenÃ¼z Ã¶neri bulunmuyor.</span></p>
            </div>
            
            <div class="minister-advice">
                <h3>Sosyal Politikalar Raporu</h3>
                <p>EÄŸitim Kalitesi: <span id="education-quality-report">Yetersiz</span></p>
                <p>SaÄŸlÄ±k Hizmetleri Kalitesi: <span id="health-quality-report">Yetersiz</span></p>
                <p>Ulusal Bayram SayÄ±sÄ±: <span id="holiday-count-report">0</span></p>
                <p>Ã–neriler: <span id="social-recommendations">HenÃ¼z Ã¶neri bulunmuyor.</span></p>
            </div>
            
            <div class="minister-advice">
                <h3>Siyasi Rapor</h3>
                <p>HÃ¼kÃ¼met DesteÄŸi (Memnuniyet): <span id="government-support-report">70%</span></p>
                <p>Meclis DesteÄŸi: <span id="parliament-support-report">70%</span></p>
                <p>Siyasi Ä°stikrar: <span id="political-stability-report">70%</span></p>
                 <p>Medya Ã–zgÃ¼rlÃ¼ÄŸÃ¼ Endeksi: <span id="media-freedom-report">7</span>/10</p>
                <p>Ã–neriler: <span id="political-recommendations">HenÃ¼z Ã¶neri bulunmuyor.</span></p>
            </div>
             <div class="minister-advice">
                <h3>Askeri Durum Raporu</h3>
                <p>Ordu HazÄ±rlÄ±k Seviyesi: <span id="army-readiness-report">Orta</span></p>
                <p>Ordu Sadakati: <span id="army-loyalty-report">YÃ¼ksek</span></p>
                <p>Genelkurmay DeÄŸerlendirmesi: <span id="military-assessment-report">Durum stabil.</span></p>
            </div>
            
            <h3>Ekonomi Verileri (Son 10 Hafta)</h3>
            <canvas id="reportChartCanvas" width="600" height="300"></canvas>
        </div>

        <div id="game-over-screen" class="game-screen">
            <h1>Oyun Bitti!</h1>
            <p id="game-over-reason"></p>
            <p>Son Hafta: <span id="final-week"></span></p>
            <p>Son NÃ¼fus: <span id="final-population"></span></p>
            <p>Son GSYÄ°H: <span id="final-gdp"></span></p>
            <button id="restart-game-btn">Tekrar Oyna</button>
        </div>

    </div>

    <script>
        // --- Oyun DeÄŸiÅŸkenleri ---
        let week = 1;
        let dayOfWeek = 1; // HaftanÄ±n gÃ¼nÃ¼ (1-7)
        let isAtWar = false;
        let governmentType = 'Demokrasi'; // Yeni: Demokrasi, Otoriter Demokrasi, DiktatÃ¶rlÃ¼k
        let mediaFreedom = 7; // Yeni: 0 (Tam Kontrol) - 10 (Tam Ã–zgÃ¼rlÃ¼k)
        let mediaInfluence = 60; // Yeni: MedyanÄ±n halkÄ± etkileme gÃ¼cÃ¼ (0-100)
        let propagandaEffectWeeks = 0; // Aktif propaganda kampanyasÄ±nÄ±n kalan hafta sayÄ±sÄ±

        let population = 10000000;
        let gdp = 1000000000;
        let inflation = 2; 
        let satisfaction = 70; 
        let budget = 100000000; 
        let taxes = 10; 
        let educationSpending = 0; 
        let healthSpending = 0; 
        let cultureSpending = 0; 
        let crimeRate = 5; 
        let securityPerception = 75; 
        let politicalSystem = 'Demokrasi'; // Bu deÄŸiÅŸken governmentType ile birleÅŸtirilebilir veya senkronize edilebilir. Åimdilik ayrÄ±.
        let politicalStability = 70; 
        let parliamentSupport = 70; 
        let foreignRelationsScore = 50; 
        let nationalHolidays = 0; 
        let armySize = 50000; 
        let militaryStrengthIndex = 50; 
        let armyUpkeepCostPerSoldier = 50; 
        let armyLoyalty = 80; 

        let socialPolicyLevel = 5; 
        let economicPolicyLevel = 5; 
        let diplomaticApproachLevel = 5; 
        let securityLevel = 5; 

        const historicalData = {
            weeks: [], gdp: [], satisfaction: [], inflation: [], politicalStability: []
        };
        
        // HaftalÄ±k etki biriktiricileri (endWeek'te sÄ±fÄ±rlanacak)
        let weeklyBudgetChange = 0; let weeklySatisfactionChange = 0; let weeklyGdpChangeFactor = 1;
        let weeklyInflationChange = 0; let weeklyPopulationChangeFactor = 1; let weeklyForeignRelationsChange = 0;
        let weeklyCrimeRateChange = 0; let weeklySecurityPerceptionChange = 0; let weeklyMilitaryStrengthChange = 0;
        let weeklyPoliticalStabilityChange = 0; let weeklyArmyLoyaltyChange = 0;
        let weeklyMediaFreedomChange = 0;


        const cabinet = {
            economy: { name: 'BoÅŸ', efficiency: 0.5, corruption: 0.1 }, education: { name: 'BoÅŸ', efficiency: 0.5, corruption: 0.1 },
            health: { name: 'BoÅŸ', efficiency: 0.5, corruption: 0.1 }, foreign: { name: 'BoÅŸ', efficiency: 0.5, corruption: 0.1 },
            interior: { name: 'BoÅŸ', efficiency: 0.5, corruption: 0.1 }, justice: { name: 'BoÅŸ', efficiency: 0.5, corruption: 0.1 },
            defense: { name: 'BoÅŸ', efficiency: 0.5, corruption: 0.1 } 
        };
        const countries = { // Askeri gÃ¼Ã§ eklendi
            'Yunanistan': { relation: 40, tradeDeal: false, summitInvited: false, summitAccepted: false, militaryPower: 45 },
            'Bulgaristan': { relation: 55, tradeDeal: false, summitInvited: false, summitAccepted: false, militaryPower: 35 },
            'GÃ¼rcistan': { relation: 60, tradeDeal: true, summitInvited: false, summitAccepted: false, militaryPower: 30 },
            'Ermenistan': { relation: 20, tradeDeal: false, summitInvited: false, summitAccepted: false, militaryPower: 25 },
            'Azerbaycan': { relation: 75, tradeDeal: true, summitInvited: false, summitAccepted: false, militaryPower: 50 },
            'Ä°ran': { relation: 30, tradeDeal: false, summitInvited: false, summitAccepted: false, militaryPower: 65 },
            'Irak': { relation: 25, tradeDeal: false, summitInvited: false, summitAccepted: false, militaryPower: 40 },
            'Suriye': { relation: 15, tradeDeal: false, summitInvited: false, summitAccepted: false, militaryPower: 20 }, 
            'Rusya': { relation: 45, tradeDeal: false, summitInvited: false, summitAccepted: false, militaryPower: 90 },
            'Ukrayna': { relation: 50, tradeDeal: false, summitInvited: false, summitAccepted: false, militaryPower: 60 }
        };
        const parliamentAgenda = []; 
        let summitPlanned = false;
        let summitInvitationsSent = false;

        // --- DOM Elementleri ---
        // (Ã–nceki kodda tanÄ±mlanan tÃ¼m DOM elementleri burada da geÃ§erli kabul ediliyor, tekrar yazÄ±lmadÄ±)
        // Yeni eklenenler:
        const governmentTypeDisplayEl = document.getElementById('government-type-display');
        const governmentTypeParliamentEl = document.getElementById('government-type-parliament');
        const mediaFreedomDisplayEl = document.getElementById('media-freedom-display');
        const mediaFreedomSlider = document.getElementById('media-freedom-slider');
        const mediaFreedomTargetValueEl = document.getElementById('media-freedom-target-value');
        const mediaFreedomValueDisplayEl = document.getElementById('media-freedom-value-display');
        const applyMediaPolicyBtn = document.getElementById('apply-media-policy');
        const startPropagandaBtn = document.getElementById('start-propaganda-btn');
        const applyCensorshipBtn = document.getElementById('apply-censorship-btn');
        const mediaFreedomReportEl = document.getElementById('media-freedom-report');

        // Rapor EkranÄ± DOM Elementleri (Ã¶ncekilere ek olarak)
        const advanceDayBtn = document.getElementById('advance-day-btn');
        const completeWeekReportsBtn = document.getElementById('complete-week-reports-btn');
        const reportCurrentWeekEl = document.getElementById('report-current-week');
        const reportCurrentDayEl = document.getElementById('report-current-day');
        
        // DiÄŸer tÃ¼m DOM elementleri Ã¶nceki kodda olduÄŸu gibi burada da var sayÄ±lÄ±yor.

        function initTheme() { /* ... Ã–ncekiyle aynÄ± ... */ 
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.documentElement.classList.add('dark');
                themeToggleBtn.textContent = 'â˜€ï¸';
            } else {
                 document.documentElement.classList.remove('dark');
                themeToggleBtn.textContent = 'ğŸŒ™';
            }
        }
        themeToggleBtn.addEventListener('click', () => { /* ... Ã–ncekiyle aynÄ± ... */
            if (document.documentElement.classList.contains('dark')) {
                document.documentElement.classList.remove('dark');
                themeToggleBtn.textContent = 'ğŸŒ™';
                localStorage.setItem('theme', 'light');
            } else {
                document.documentElement.classList.add('dark');
                themeToggleBtn.textContent = 'â˜€ï¸';
                localStorage.setItem('theme', 'dark');
            }
            drawCanvasStats(); 
            drawReportChart();
         });

        function showScreen(screenId) { /* ... Rapor ekranÄ± butonlarÄ± iÃ§in gÃ¼ncellendi ... */
            gameScreens.forEach(screen => { screen.style.display = 'none'; });
            const targetScreen = document.getElementById(screenId);
            if (targetScreen) {
                 targetScreen.style.display = screenId === 'main-screen' ? 'grid' : 'block';
            }

            tabButtons.forEach(btn => {
                btn.classList.toggle('active', btn.dataset.tab === screenId);
            });

            if (screenId === 'reports-screen') {
                if(endWeekBtn) endWeekBtn.style.display = 'none'; 
                if(advanceDayBtn) advanceDayBtn.style.display = 'inline-block';
                if(completeWeekReportsBtn) completeWeekReportsBtn.style.display = 'inline-block';
                if(advanceDayBtn) advanceDayBtn.disabled = isAtWar || (dayOfWeek > 7); // SavaÅŸta veya hafta dolduysa pasif
                if(completeWeekReportsBtn) completeWeekReportsBtn.disabled = isAtWar || (dayOfWeek <= 7); // SavaÅŸta veya hafta dolmadÄ±ysa pasif
                updateReports(); 
            } else {
                if(endWeekBtn) endWeekBtn.style.display = 'inline-block'; 
                if(advanceDayBtn) advanceDayBtn.style.display = 'none';
                if(completeWeekReportsBtn) completeWeekReportsBtn.style.display = 'none';
                if(endWeekBtn) endWeekBtn.disabled = isAtWar; // SavaÅŸta ana haftayÄ± bitir butonu pasif
            }

            if (screenId === 'cabinet-screen') updateMinisterAdvice();
            else if (screenId === 'foreign-affairs-screen') { updateForeignRelationsDisplay(); updateSummitInvitationList(); }
            else if (screenId === 'security-screen') {
                if(armySizeSecurityEl) armySizeSecurityEl.textContent = armySize.toLocaleString();
                if(militaryStrengthIndexEl) militaryStrengthIndexEl.textContent = militaryStrengthIndex.toFixed(0);
                if(armyLoyaltyDisplayEl) armyLoyaltyDisplayEl.textContent = getArmyLoyaltyStatus();
            } else if (screenId === 'parliament-screen') {
                if(oppositionStrengthDisplayEl) oppositionStrengthDisplayEl.textContent = `${(governmentType === 'Demokrasi' ? (100 - parliamentSupport) : 'N/A').toFixed(0)}%`;
                if(governmentTypeParliamentEl) governmentTypeParliamentEl.textContent = governmentType;
                if(mediaFreedomValueDisplayEl) mediaFreedomValueDisplayEl.textContent = mediaFreedom.toFixed(1);
                if(mediaFreedomSlider) mediaFreedomSlider.value = mediaFreedom;
                if(mediaFreedomTargetValueEl) mediaFreedomTargetValueEl.textContent = mediaFreedom.toFixed(1);
                updateParliamentDisplay(); 
            }
        }
        
        function getArmyLoyaltyStatus() { /* ... Ã–ncekiyle aynÄ± ... */
            if (armyLoyalty >= 80) return "Ã‡ok YÃ¼ksek";
            if (armyLoyalty >= 60) return "YÃ¼ksek";
            if (armyLoyalty >= 40) return "Orta";
            if (armyLoyalty >= 20) return "DÃ¼ÅŸÃ¼k";
            return "Ã‡ok DÃ¼ÅŸÃ¼k (Ä°syan Riski!)";
        }
        
        function resizeCanvas() { /* ... Ã–ncekiyle aynÄ± ... */
            const mainCanvasContainer = gameCanvas.parentElement;
            if (mainCanvasContainer) { 
                 gameCanvas.width = mainCanvasContainer.offsetWidth;
                 gameCanvas.height = 300; 
                 drawCanvasStats();
            }
            const reportCanvasContainer = reportChartCanvas.parentElement;
            if (reportCanvasContainer && reportChartCanvas) { // reportChartCanvas null kontrolÃ¼
                reportChartCanvas.width = reportCanvasContainer.offsetWidth > 0 ? reportCanvasContainer.offsetWidth * 0.98 : 300; 
                reportChartCanvas.height = 300; 
                drawReportChart(); 
            }
         }
        window.addEventListener('resize', resizeCanvas);

        function resetGame() {
            week = 1; dayOfWeek = 1; isAtWar = false;
            governmentType = 'Demokrasi'; mediaFreedom = 7; mediaInfluence = 60; propagandaEffectWeeks = 0;
            population = 10000000; gdp = 1000000000; inflation = 2; satisfaction = 70;
            budget = 100000000; taxes = 10; educationSpending = 0; healthSpending = 0; cultureSpending = 0;
            crimeRate = 5; securityPerception = 75; politicalSystem = 'Demokrasi'; politicalStability = 70;
            parliamentSupport = 70; foreignRelationsScore = 50; nationalHolidays = 0;
            armySize = 50000; militaryStrengthIndex = 50; armyLoyalty = 80;
            summitPlanned = false; summitInvitationsSent = false;
            
            socialPolicyLevel = 5; economicPolicyLevel = 5; diplomaticApproachLevel = 5; securityLevel = 5;
            
            if(taxSlider) taxSlider.value = taxes; if(taxSliderValue) taxSliderValue.textContent = taxes;
            if(socialPolicySlider) socialPolicySlider.value = socialPolicyLevel; if(socialPolicyValue) socialPolicyValue.textContent = socialPolicyLevel;
            if(economicPolicySlider) economicPolicySlider.value = economicPolicyLevel; if(economicPolicyValue) economicPolicyValue.textContent = economicPolicyLevel;
            if(diplomaticApproachSlider) diplomaticApproachSlider.value = diplomaticApproachLevel; if(diplomaticApproachValue) diplomaticApproachValue.textContent = diplomaticApproachLevel;
            if(securityLevelSlider) securityLevelSlider.value = securityLevel; if(securityLevelValue) securityLevelValue.textContent = securityLevel;
            if(mediaFreedomSlider) mediaFreedomSlider.value = mediaFreedom; if(mediaFreedomTargetValueEl) mediaFreedomTargetValueEl.textContent = mediaFreedom.toFixed(1);


             ['weekly'].forEach(prefix => { // Sadece haftalÄ±klarÄ± sÄ±fÄ±rla, gÃ¼nlÃ¼kler advanceOneDay'de
                Object.keys(window).filter(k => k.startsWith(prefix) && typeof window[k] === 'number').forEach(key => {
                    if (key.includes('Factor')) window[key] = 1; else window[key] = 0;
                });
            });

            historicalData.weeks = []; historicalData.gdp = []; historicalData.satisfaction = [];
            historicalData.inflation = []; historicalData.politicalStability = [];

            for (const type in cabinet) {
                cabinet[type] = { name: 'BoÅŸ', efficiency: 0.4 + Math.random() * 0.3, corruption: 0.05 + Math.random() * 0.2 };
            }
            updateCabinetDisplay();
             const initialCountries = { /* ... Ã–ncekiyle aynÄ± ... */
                'Yunanistan': { relation: 30 + Math.floor(Math.random()*21)-10, tradeDeal: false, militaryPower: 40 + Math.floor(Math.random()*11)-5 },
                'Bulgaristan': { relation: 45 + Math.floor(Math.random()*21)-10, tradeDeal: false, militaryPower: 30 + Math.floor(Math.random()*11)-5 },
                'GÃ¼rcistan': { relation: 50 + Math.floor(Math.random()*21)-10, tradeDeal: Math.random() < 0.3, militaryPower: 25 + Math.floor(Math.random()*11)-5 },
                'Ermenistan': { relation: 15 + Math.floor(Math.random()*21)-10, tradeDeal: false, militaryPower: 20 + Math.floor(Math.random()*11)-5 },
                'Azerbaycan': { relation: 65 + Math.floor(Math.random()*21)-10, tradeDeal: Math.random() < 0.5, militaryPower: 45 + Math.floor(Math.random()*11)-5 },
                'Ä°ran': { relation: 25 + Math.floor(Math.random()*21)-10, tradeDeal: false, militaryPower: 60 + Math.floor(Math.random()*11)-5 },
                'Irak': { relation: 20 + Math.floor(Math.random()*21)-10, tradeDeal: false, militaryPower: 35 + Math.floor(Math.random()*11)-5 },
                'Suriye': { relation: 10 + Math.floor(Math.random()*21)-10, tradeDeal: false, militaryPower: 15 + Math.floor(Math.random()*11)-5 },
                'Rusya': { relation: 40 + Math.floor(Math.random()*21)-10, tradeDeal: false, militaryPower: 85 + Math.floor(Math.random()*11)-5 },
                'Ukrayna': { relation: 45 + Math.floor(Math.random()*21)-10, tradeDeal: false, militaryPower: 55 + Math.floor(Math.random()*11)-5 }
            };
             for (const countryName in countries) { 
                if (initialCountries[countryName]) {
                    countries[countryName].relation = Math.max(0, Math.min(100, initialCountries[countryName].relation));
                    countries[countryName].tradeDeal = initialCountries[countryName].tradeDeal;
                    countries[countryName].militaryPower = initialCountries[countryName].militaryPower;
                    countries[countryName].summitInvited = false;
                    countries[countryName].summitAccepted = false;
                }
            }
            updateForeignRelationsDisplay();
            updateSummitInvitationList();

            parliamentAgenda.length = 0; 
            updateParliamentDisplay();
            if(foreignEventsList) foreignEventsList.innerHTML = ''; 
            if(gameLogEl) gameLogEl.innerHTML = ''; 
            
            if(gameOverScreen) gameOverScreen.style.display = 'none';
            
            addLog('Ulus SimÃ¼latÃ¶rÃ¼ BaÅŸladÄ±! Yeni bir oyun...');
            updateGameStats(); 
            updateMinisterAdvice(); 
            updateReports();
            resizeCanvas(); 
            enableAllActionButtons(); 
            if(endWeekBtn) endWeekBtn.disabled = false; 
            showScreen('main-screen'); 
        }

        function updateGameStats() { /* ... governmentTypeDisplayEl ve mediaFreedomDisplayEl eklendi ... */
            if(currentWeekEl) currentWeekEl.textContent = week;
            if(currentDayOfWeekEl) currentDayOfWeekEl.textContent = dayOfWeek; 
            if(populationEl) populationEl.textContent = population.toLocaleString();
            if(gdpEl) gdpEl.textContent = gdp.toLocaleString();
            if(inflationEl) inflationEl.textContent = inflation.toFixed(1);
            if(satisfactionEl) satisfactionEl.textContent = satisfaction.toFixed(1);
            if(budgetEl) budgetEl.textContent = budget.toLocaleString();
            if(taxRateEl) taxRateEl.textContent = taxes.toFixed(1);
            if(politicalSystemEl) politicalSystemEl.textContent = politicalSystem; // Bu, governmentType ile birleÅŸtirilebilir
            if(governmentTypeDisplayEl) governmentTypeDisplayEl.textContent = governmentType; // Yeni eklendi
            if(mediaFreedomDisplayEl) mediaFreedomDisplayEl.textContent = `${mediaFreedom.toFixed(1)}/10`; // Yeni eklendi
            if(politicalStabilityEl) politicalStabilityEl.textContent = politicalStability.toFixed(1) + '%';
            if(foreignRelationsScoreEl) foreignRelationsScoreEl.textContent = foreignRelationsScore.toFixed(0);
            if(armySizeDisplayEl) armySizeDisplayEl.textContent = armySize.toLocaleString(); 
            if(armySizeSecurityEl) armySizeSecurityEl.textContent = armySize.toLocaleString(); 
            if(militaryStrengthIndexEl) militaryStrengthIndexEl.textContent = militaryStrengthIndex.toFixed(0);
            if(armyLoyaltyDisplayEl) armyLoyaltyDisplayEl.textContent = getArmyLoyaltyStatus();

            if(crimeRateEl) crimeRateEl.textContent = crimeRate.toFixed(1);
            if(securityPerceptionEl) securityPerceptionEl.textContent = securityPerception.toFixed(1);
            
            if(reportCurrentWeekEl) reportCurrentWeekEl.textContent = week; 
            if(reportCurrentDayEl) reportCurrentDayEl.textContent = dayOfWeek;

            drawCanvasStats(); 
            if(document.getElementById('reports-screen').style.display !== 'none') {
                 updateReports(); 
            }
        }

        function addLog(message, type = 'info', isDaily = false) { /* ... Ã–ncekiyle aynÄ± ... */
            const listItem = document.createElement('li');
            const timePrefix = isDaily ? `H${week}, G${dayOfWeek}: ` : `Hafta ${week}: `;
            listItem.textContent = timePrefix + message;

            if (type === 'warning') listItem.style.color = 'var(--warning-color)';
            else if (type === 'danger') listItem.style.color = 'var(--danger-color)';
            else if (type === 'success') listItem.style.color = 'var(--success-color)';
            else if (type === 'event') { listItem.style.color = 'var(--accent-color)'; listItem.style.fontWeight = 'bold';}
            
            if(isDaily) listItem.classList.add('daily');

            gameLogEl.prepend(listItem); 
            if (gameLogEl.children.length > 80) { 
                gameLogEl.removeChild(gameLogEl.lastChild);
            }
         }

        function drawCanvasStats() { /* ... Ã–ncekiyle aynÄ±, deÄŸiÅŸiklik yok ... */
            if (!gameCanvas || !ctx) return;
            ctx.clearRect(0, 0, gameCanvas.width, gameCanvas.height);
            const barHeight = 20;
            const barWidth = Math.max(50, gameCanvas.width - 130); 
            const startX = 110; 
            let currentY = 30;
            const textColor = getComputedStyle(document.documentElement).getPropertyValue('--text-color');
            const borderColor = getComputedStyle(document.documentElement).getPropertyValue('--border-color');
            ctx.font = '14px Arial'; 

            function drawBar(label, value, maxValue, colorFunc) {
                ctx.fillStyle = textColor;
                ctx.fillText(label, 10, currentY + barHeight / 2 + 5);
                const fillWidth = (value / maxValue) * barWidth;
                ctx.fillStyle = colorFunc(value, maxValue);
                ctx.fillRect(startX, currentY, fillWidth, barHeight);
                ctx.strokeStyle = borderColor;
                ctx.strokeRect(startX, currentY, barWidth, barHeight);
                ctx.fillStyle = textColor;
                ctx.fillText(`${value.toFixed(1)}%`, startX + barWidth + 5, currentY + barHeight / 2 + 5);
                currentY += barHeight + 15; 
            }

            drawBar('Memnuniyet:', satisfaction, 100, (val) => `rgb(${255 - (val * 2.55)}, ${val * 2.55}, 0)`);
            drawBar('Enflasyon:', Math.min(inflation, 25), 25, (val, max) => `rgb(${(val/max) * 255}, ${255 - ((val/max) * 255)}, 0)`); 
            drawBar('DÄ±ÅŸ Ä°liÅŸkiler:', foreignRelationsScore, 100, (val) => `rgb(0, ${val * 1.5}, ${255 - (val * 1.5)})`); 
            drawBar('SuÃ§ OranÄ±:', Math.min(crimeRate, 25), 25, (val, max) => `rgb(${(val/max) * 255}, ${150 - ((val/max) * 150)}, 0)`); 
            drawBar('Ä°stikrar:', politicalStability, 100, (val) => `rgb(${val*0.5}, ${val * 2}, ${255 - val * 2})`);
         }

        function drawReportChart() { /* ... Ã–ncekiyle aynÄ±, deÄŸiÅŸiklik yok ... */
            if (!reportChartCanvas || !reportChartCtx) return;
            reportChartCtx.clearRect(0, 0, reportChartCanvas.width, reportChartCanvas.height);
             const textColor = getComputedStyle(document.documentElement).getPropertyValue('--text-color');
            const borderColor = getComputedStyle(document.documentElement).getPropertyValue('--border-color');

            if (historicalData.weeks.length < 1) { 
                reportChartCtx.font = '16px Arial';
                reportChartCtx.fillStyle = textColor;
                reportChartCtx.textAlign = 'center';
                reportChartCtx.fillText('Grafik iÃ§in henÃ¼z yeterli veri yok.', reportChartCanvas.width / 2, reportChartCanvas.height / 2);
                return;
            }

            const padding = 40;
            const chartWidth = reportChartCanvas.width - (padding * 2);
            const chartHeight = reportChartCanvas.height - (padding * 2);
            
            if (chartWidth <= 0 || chartHeight <= 0) return; 

            reportChartCtx.beginPath();
            reportChartCtx.strokeStyle = borderColor;
            reportChartCtx.moveTo(padding, padding);
            reportChartCtx.lineTo(padding, reportChartCanvas.height - padding);
            reportChartCtx.lineTo(reportChartCanvas.width - padding, reportChartCanvas.height - padding);
            reportChartCtx.stroke();
            const dataPoints = Math.min(historicalData.weeks.length, 10);
            const startIndex = Math.max(0, historicalData.weeks.length - dataPoints);
            
            reportChartCtx.font = '12px Arial';
            reportChartCtx.fillStyle = textColor;
            reportChartCtx.textAlign = 'center';
            
            if (dataPoints > 1) { 
                for (let i = 0; i < dataPoints; i++) {
                    const x = padding + (i * (chartWidth / (dataPoints - 1)));
                    if(historicalData.weeks[startIndex+i] !== undefined) reportChartCtx.fillText(historicalData.weeks[startIndex + i].toString(), x, reportChartCanvas.height - padding + 20);
                }
            } else if (dataPoints === 1 && historicalData.weeks[startIndex] !== undefined) { 
                 const x = padding + chartWidth / 2;
                 reportChartCtx.fillText(historicalData.weeks[startIndex].toString(), x, reportChartCanvas.height - padding + 20);
            }

            function drawLine(dataArray, color, maxValue = 100, normalize = false) {
                if (dataPoints === 0 || !dataArray || dataArray.length === 0) return;
                reportChartCtx.beginPath();
                reportChartCtx.strokeStyle = color;
                reportChartCtx.lineWidth = 2;
                
                let valuesToProcess = dataArray.slice(startIndex, startIndex + dataPoints);
                if(valuesToProcess.length === 0 && dataArray.length > 0 && dataPoints === 1 && dataArray[dataArray.length-1] !== undefined) { 
                    valuesToProcess = [dataArray[dataArray.length-1]];
                }


                let minVal = 0, range = maxValue;

                if (normalize && valuesToProcess.length > 0) {
                    const numericValues = valuesToProcess.filter(v => typeof v === 'number' && !isNaN(v));
                    if (numericValues.length === 0) return; // Ã‡izilecek sayÄ±sal veri yoksa Ã§Ä±k
                    minVal = Math.min(...numericValues); 
                    let maxVal = Math.max(...numericValues);
                    range = maxVal - minVal;
                    if (range === 0) range = 1; 
                }


                for (let i = 0; i < valuesToProcess.length; i++) {
                    const x = padding + (valuesToProcess.length > 1 ? (i * (chartWidth / (valuesToProcess.length - 1))) : chartWidth / 2);
                    let value = valuesToProcess[i];
                     if(typeof value !== 'number' || isNaN(value)) continue; 

                    let normalizedValue;

                    if (normalize) {
                        normalizedValue = (value - minVal) / range;
                    } else {
                        normalizedValue = Math.min(value, maxValue) / maxValue;
                    }
                    
                    const y = reportChartCanvas.height - padding - (normalizedValue * chartHeight);

                    if (i === 0) reportChartCtx.moveTo(x, y);
                    else reportChartCtx.lineTo(x, y);
                }
                reportChartCtx.stroke();
            }
            
            drawLine(historicalData.satisfaction, 'rgb(46, 204, 113)'); 
            drawLine(historicalData.inflation, 'rgb(231, 76, 60)', 25); 
            drawLine(historicalData.gdp, 'rgb(52, 152, 219)', 0, true); 
            drawLine(historicalData.politicalStability, 'rgb(155, 89, 182)', 100); 


            reportChartCtx.font = '12px Arial'; 
            reportChartCtx.textAlign = 'left'; 
            reportChartCtx.fillStyle = 'rgb(46, 204, 113)';
            reportChartCtx.fillText('Mem.', padding + 5, padding - 5); 
            reportChartCtx.fillStyle = 'rgb(231, 76, 60)';
            reportChartCtx.fillText('Enf.', padding + 60, padding - 5); 
            reportChartCtx.fillStyle = 'rgb(52, 152, 219)';
            reportChartCtx.fillText('GSYÄ°H', padding + 110, padding - 5);
             reportChartCtx.fillStyle = 'rgb(155, 89, 182)';
            reportChartCtx.fillText('Ä°stik.', padding + 175, padding - 5); 
        }

        function updateMinisterAdvice() { /* ... Ã–ncekiyle aynÄ± ... */ 
            if(!economyAdviceText) return; // DOM hazÄ±r deÄŸilse Ã§Ä±k
            economyAdviceText.textContent = cabinet.economy.name === 'BoÅŸ' ? "AtanmadÄ±." : 
                (inflation > 15 ? "KRÄ°TÄ°K ENFLASYON! Acil sÄ±kÄ± para politikasÄ± ve mali disiplin!" : 
                (inflation > 8 ? "YÃ¼ksek enflasyon endiÅŸe verici. HarcamalarÄ± kontrol altÄ±na alÄ±n." : 
                (gdp < population * 80 ) ? "Ekonomik daralma var. TeÅŸvikleri dÃ¼ÅŸÃ¼nÃ¼n." : "Ekonomi stabil, mevcut politikalar sÃ¼rdÃ¼rÃ¼lebilir.")); // weeklyGdpChangeFactor kaldÄ±rÄ±ldÄ±

            educationAdviceText.textContent = cabinet.education.name === 'BoÅŸ' ? "AtanmadÄ±." :
                (educationSpending < population * 0.2 ? "EÄŸitim yatÄ±rÄ±mlarÄ± yetersiz. Kalite dÃ¼ÅŸÃ¼yor, halk tepkili." :
                (educationSpending < population * 0.5 ? "EÄŸitim bÃ¼tÃ§esi artÄ±rÄ±lmalÄ±. GeleceÄŸe yatÄ±rÄ±m Ã¶nemli." : "EÄŸitim yatÄ±rÄ±mlarÄ± iyi durumda."));

            healthAdviceText.textContent = cabinet.health.name === 'BoÅŸ' ? "AtanmadÄ±." :
                (healthSpending < population * 0.3 ? "SaÄŸlÄ±k sistemi Ã§Ã¶kme noktasÄ±nda! Acil kaynak aktarÄ±n." :
                (healthSpending < population * 0.7 ? "SaÄŸlÄ±k hizmetleri geliÅŸtirilmeli. Halk saÄŸlÄ±ÄŸÄ± Ã¶nceliÄŸimiz." : "SaÄŸlÄ±k altyapÄ±mÄ±z gÃ¼Ã§lÃ¼."));
            
            foreignAdviceText.textContent = cabinet.foreign.name === 'BoÅŸ' ? "AtanmadÄ±." :
                (foreignRelationsScore < 25 ? "UluslararasÄ± izolasyonla karÅŸÄ± karÅŸÄ±yayÄ±z! Acil diplomatik aÃ§Ä±lÄ±m ÅŸart." :
                (foreignRelationsScore < 50 ? "DÄ±ÅŸ iliÅŸkilerimiz zayÄ±f. KomÅŸularla ve mÃ¼ttefiklerle iliÅŸkileri gÃ¼Ã§lendirin." : "Diplomatik konumumuz iyi. Mevcut stratejiyi koruyun."));

            interiorAdviceText.textContent = cabinet.interior.name === 'BoÅŸ' ? "AtanmadÄ±." :
                (crimeRate > 12 ? "SuÃ§ oranlarÄ± kontrolden Ã§Ä±ktÄ±! Emniyet teÅŸkilatÄ±nÄ± gÃ¼Ã§lendirin." :
                (securityPerception < 40 ? "Halk kendini gÃ¼vende hissetmiyor. GÃ¼venlik algÄ±sÄ±nÄ± artÄ±racak adÄ±mlar atÄ±n." : "Ä°Ã§ gÃ¼venlik durumu stabil."));

            justiceAdviceText.textContent = cabinet.justice.name === 'BoÅŸ' ? "AtanmadÄ±." :
                (politicalStability < 40 && crimeRate > 8 ? "Adalet sistemi iÅŸlemiyor, kaos kapÄ±da! Acil reform ve caydÄ±rÄ±cÄ±lÄ±k." :
                (crimeRate > 8 ? "Hukukun Ã¼stÃ¼nlÃ¼ÄŸÃ¼ zayÄ±f. YargÄ± reformu ve polis desteÄŸi gerekli." : "Adalet sistemi gÃ¶revini yapÄ±yor."));
            
            defenseAdviceText.textContent = cabinet.defense.name === 'BoÅŸ' ? "AtanmadÄ±." :
                (militaryStrengthIndex < 35 ? "Ordumuz zayÄ±f! Modernizasyon ve personel takviyesi acil ihtiyaÃ§." :
                (armyLoyalty < 50 ? "Ordu iÃ§inde huzursuzluk var! Sadakati artÄ±racak Ã¶nlemler alÄ±nmalÄ±." :
                (foreignRelationsScore < 30 && Object.values(countries).some(c => c.relation < 15 && c.militaryPower > militaryStrengthIndex*0.8)) ? "SÄ±nÄ±rda gerginlik yÃ¼ksek, olasÄ± bir saldÄ±rÄ±ya karÅŸÄ± hazÄ±rlÄ±klÄ± olunmalÄ±!" :
                 "Savunma kapasitemiz yeterli. Ordunun moralini yÃ¼ksek tutun."));
        }

        function updateMinisterReports() { /* ... Ã–ncekiyle aynÄ±, mediaFreedomReportEl eklendi ... */ 
            if(!inflationAnalysisEl) return; // DOM hazÄ±r deÄŸilse Ã§Ä±k
             // Ekonomi Raporu
            inflationAnalysisEl.textContent = cabinet.economy.name === 'BoÅŸ' ? "AtanmadÄ±." : 
                (inflation > 15 ? "AÅŸÄ±rÄ± yÃ¼ksek enflasyon, hiperenflasyon riski! Acil mÃ¼dahale gerekli." : 
                 inflation > 8 ? "Ã‡ift haneli enflasyon, alÄ±m gÃ¼cÃ¼ dÃ¼ÅŸÃ¼yor, sosyal huzursuzluk artabilir." : 
                 inflation > 4 ? "Enflasyon hedefin Ã¼zerinde, dikkatli olunmalÄ±." : 
                 inflation < 1 ? "Deflasyon riski, ekonomik durgunluÄŸa yol aÃ§abilir." : "Enflasyon kontrol altÄ±nda.");
            gdpAnalysisEl.textContent = cabinet.economy.name === 'BoÅŸ' ? "AtanmadÄ±." :
                (gdp < population * 80 ? "Ciddi ekonomik kriz. GSYÄ°H Ã§ok dÃ¼ÅŸÃ¼k." :
                 (gdp < population * 120 && weeklyGdpChangeFactor < 1) ? "Ekonomik durgunluk veya hafif daralma." :
                 (weeklyGdpChangeFactor > 1.01) ? "GÃ¼Ã§lÃ¼ ekonomik bÃ¼yÃ¼me kaydediliyor." : "Ekonomi stabil veya yavaÅŸ bÃ¼yÃ¼yor.");
            economyRecommendationsEl.textContent = cabinet.economy.name === 'BoÅŸ' ? "AtanmadÄ±." : 
                (inflation > 10 && budget < 0 ? "Mali disiplin ÅŸart, vergileri artÄ±rÄ±p harcamalarÄ± kÄ±sÄ±n." : 
                 gdp < population*100 && inflation < 3 ? "Ekonomiyi canlandÄ±rmak iÃ§in teÅŸvikler ve yatÄ±rÄ±mlar dÃ¼ÅŸÃ¼nÃ¼lebilir." : "Dengeli politikalar sÃ¼rdÃ¼rÃ¼lmeli.");

            // Sosyal Politikalar
            educationQualityReportEl.textContent = educationSpending > population * 0.8 ? 'Ã‡ok Ä°yi' : educationSpending > population * 0.4 ? 'Ä°yi' : educationSpending > population * 0.1 ? 'Orta' : 'Yetersiz';
            healthQualityReportEl.textContent = healthSpending > population * 1 ? 'Ã‡ok Ä°yi' : healthSpending > population * 0.5 ? 'Ä°yi' : healthSpending > population * 0.2 ? 'Orta' : 'Yetersiz';
            holidayCountReportEl.textContent = nationalHolidays;
            socialRecommendationsEl.textContent = (educationQualityReportEl.textContent === 'Yetersiz' || healthQualityReportEl.textContent === 'Yetersiz') ? "Sosyal harcamalar artÄ±rÄ±lmalÄ±." : "Sosyal denge gÃ¶zetiliyor.";
            
            // Siyasi Rapor
            governmentSupportReportEl.textContent = `${satisfaction.toFixed(1)}%`;
            parliamentSupportReportEl.textContent = `${politicalSystem === 'Demokrasi' ? parliamentSupport.toFixed(1) : 'N/A'}%`;
            politicalStabilityReportEl.textContent = `${politicalStability.toFixed(1)}%`;
            if(mediaFreedomReportEl) mediaFreedomReportEl.textContent = `${mediaFreedom.toFixed(1)}/10`; // Yeni eklendi
            politicalRecommendationsEl.textContent = politicalStability < 40 ? "Siyasi istikrarsÄ±zlÄ±k had safhada, acil uzlaÅŸÄ± ve reform gerekli." : "Siyasi ortam gÃ¶receli sakin.";
            
            // Askeri Rapor
            armyReadinessReportEl.textContent = militaryStrengthIndex > 70 ? "Ã‡ok YÃ¼ksek" : militaryStrengthIndex > 50 ? "YÃ¼ksek" : militaryStrengthIndex > 30 ? "Orta" : "DÃ¼ÅŸÃ¼k";
            armyLoyaltyReportEl.textContent = getArmyLoyaltyStatus();
            militaryAssessmentReportEl.textContent = cabinet.defense.name === 'BoÅŸ' ? "AtanmadÄ±." : "Genelkurmay, durumu deÄŸerlendiriyor. Detaylar iÃ§in Askeri Åura toplantÄ±sÄ± talep edin.";

            if(gdpChangeReportDisplayEl) gdpChangeReportDisplayEl.textContent = `${((gdpGrowthFactorGlobalForReport || 1) -1 * 100).toFixed(2)}%`; 
            if(inflationChangeReportDisplayEl) inflationChangeReportDisplayEl.textContent = `${(inflationChangeGlobalForReport || 0).toFixed(2)}%`;
        }
         let gdpGrowthFactorGlobalForReport = 1; 
         let inflationChangeGlobalForReport = 0;


        function enableAllActionButtons(forceEnable = false) { /* ... isAtWar kontrolÃ¼ eklendi ... */
            const allButtons = document.querySelectorAll('button:not(.tab-btn):not(#restart-game-btn):not(#theme-toggle)');
            
            allButtons.forEach(button => {
                if (button.id === 'end-week-btn' || button.id === 'advance-day-btn' || button.id === 'complete-week-reports-btn') return; 
                button.disabled = forceEnable ? false : isAtWar; 
            });

            if (isAtWar && !forceEnable) { 
                if(endWeekBtn) endWeekBtn.disabled = true; 
                if(advanceDayBtn) advanceDayBtn.disabled = true; 
                if(completeWeekReportsBtn) completeWeekReportsBtn.disabled = true;
                // SavaÅŸla ilgili butonlar (barÄ±ÅŸ vs.) burada ayrÄ±ca ele alÄ±nabilir.
                // Åimdilik, savaÅŸta Ã§oÄŸu buton pasif.
                return; 
            }
            
            // SavaÅŸ yoksa veya forceEnable ise:
            if (!forceEnable) {
                 const isDemocracy = (governmentType === 'Demokrasi');
                 const isAuthoritarian = (governmentType === 'Otoriter Demokrasi' || governmentType === 'DiktatÃ¶rlÃ¼k');
                 const isDictatorship = (governmentType === 'DiktatÃ¶rlÃ¼k');

                if(declareDictatorshipBtn) declareDictatorshipBtn.disabled = !isDemocracy || satisfaction < 25 || armyLoyalty < 40 || politicalStability < 25;
                if(crackdownDissentBtn) crackdownDissentBtn.disabled = isDemocracy; 
                if(callElectionsBtn) callElectionsBtn.disabled = !isDemocracy && governmentType !== 'Otoriter Demokrasi'; // Otoriter de seÃ§im yapabilir (gÃ¶stermelik)
                if(dissolveParliamentBtn) dissolveParliamentBtn.disabled = isDictatorship || (isDemocracy && (parliamentSupport > 35 || politicalStability > 45));
                if(meetOppositionClosedBtn) meetOppositionClosedBtn.disabled = isDictatorship; 
                if(meetOppositionOpenBtn) meetOppositionOpenBtn.disabled = isDictatorship;
                if(proposeLawBtn) proposeLawBtn.disabled = isDictatorship;
                if(applyCensorshipBtn) applyCensorshipBtn.disabled = isDemocracy && mediaFreedom > 5; // Tam demokraside ve medya Ã¶zgÃ¼rse sansÃ¼r zor
                if(startPropagandaBtn) startPropagandaBtn.disabled = isDictatorship && mediaFreedom < 2; // Tam diktatÃ¶rlÃ¼kte ve medya kontrol altÄ±ndaysa propaganda anlamsÄ±z
            }

            if(sendSummitInvitationsBtn) sendSummitInvitationsBtn.disabled = !summitPlanned || summitInvitationsSent || getSelectedSummitInvitees().length === 0;
            if(createSummitBtn) createSummitBtn.disabled = summitPlanned; 

            if(endWeekBtn) endWeekBtn.disabled = isAtWar; // Ana kontrol
            if(advanceDayBtn) advanceDayBtn.disabled = isAtWar || (dayOfWeek > 7);
            if(completeWeekReportsBtn) completeWeekReportsBtn.disabled = isAtWar || (dayOfWeek <= 7);
        }

        function gameOver(reason, type = 'normal') { /* ... Ã–ncekiyle aynÄ± ... */
            addLog(`Oyun Bitti! ${reason}`, 'danger');
            isAtWar = false; 
            enableAllActionButtons(false); 
            if(endWeekBtn) endWeekBtn.disabled = true;
            if(advanceDayBtn) advanceDayBtn.disabled = true;
            if(completeWeekReportsBtn) completeWeekReportsBtn.disabled = true;

            gameOverReasonEl.textContent = reason;
            finalWeekEl.textContent = week;
            finalPopulationEl.textContent = population.toLocaleString();
            finalGdpEl.textContent = gdp.toLocaleString();

            if (type === 'coup') gameOverReasonEl.innerHTML += "<br>Ordu yÃ¶netime el koydu!";
            else if (type === 'civil_war') gameOverReasonEl.innerHTML += "<br>Ãœlke iÃ§ savaÅŸa sÃ¼rÃ¼klendi ve bÃ¶lÃ¼ndÃ¼!";
            else if (type === 'retirement') gameOverReasonEl.innerHTML += "<br>Huzurlu bir emeklilik sizi bekliyor.";
            else if (type === 'dictator_win') gameOverReasonEl.innerHTML += "<br>Mutlak gÃ¼cÃ¼nÃ¼zÃ¼ ilan ettiniz.";
            
            showScreen('game-over-screen');
         }
        
        function applyDailyChanges() {
            // GÃ¼nlÃ¼k biriktirilen deÄŸiÅŸimleri ana deÄŸiÅŸkenlere uygula
            budget += weeklyBudgetChange; // weeklyBudgetChange artÄ±k gÃ¼nlÃ¼k deÄŸiÅŸimlerin toplamÄ±
            satisfaction += weeklySatisfactionChange;
            gdp *= weeklyGdpChangeFactor;
            inflation += weeklyInflationChange;
            population = Math.round(population * weeklyPopulationChangeFactor);
            foreignRelationsScore += weeklyForeignRelationsChange;
            crimeRate += weeklyCrimeRateChange;
            securityPerception += weeklySecurityPerceptionChange;
            militaryStrengthIndex += weeklyMilitaryStrengthChange;
            politicalStability += weeklyPoliticalStabilityChange;
            armyLoyalty += weeklyArmyLoyaltyChange;
            mediaFreedom += weeklyMediaFreedomChange;


            // SÄ±nÄ±rlandÄ±rmalar
            satisfaction = Math.max(0, Math.min(100, satisfaction));
            inflation = Math.max(0.05, Math.min(50, inflation));
            population = Math.max(10000, population); 
            foreignRelationsScore = Math.max(0, Math.min(100, foreignRelationsScore));
            crimeRate = Math.max(0.1, Math.min(30, crimeRate));
            securityPerception = Math.max(0, Math.min(100, securityPerception));
            militaryStrengthIndex = Math.max(5, Math.min(100, militaryStrengthIndex));
            politicalStability = Math.max(0, Math.min(100, politicalStability));
            armyLoyalty = Math.max(0, Math.min(100, armyLoyalty));
            mediaFreedom = Math.max(0, Math.min(10, mediaFreedom));
            gdp = Math.max(population * 10, gdp); 

            // HaftalÄ±k (artÄ±k gÃ¼nlÃ¼k uygulandÄ±ÄŸÄ± iÃ§in) biriktiricileri sÄ±fÄ±rla
            weeklyBudgetChange = 0; weeklySatisfactionChange = 0; weeklyGdpChangeFactor = 1;
            weeklyInflationChange = 0; weeklyPopulationChangeFactor = 1; weeklyForeignRelationsChange = 0;
            weeklyCrimeRateChange = 0; weeklySecurityPerceptionChange = 0; weeklyMilitaryStrengthChange = 0;
            weeklyPoliticalStabilityChange = 0; weeklyArmyLoyaltyChange = 0; weeklyMediaFreedomChange = 0;
        }

        function advanceOneDay() {
            if (isAtWar) {
                addLog("SavaÅŸ devam ederken gÃ¼nÃ¼ bu ÅŸekilde ilerletemezsiniz!", "warning", true);
                return;
            }
             if (gameOverScreen.style.display !== 'none') {
                addLog("Oyun bitti, zamanÄ± ilerletemezsiniz.", "warning", true);
                return;
            }

            addLog("Yeni bir gÃ¼n baÅŸladÄ±...", "info", true);
            
            // GÃœNLÃœK DEÄÄ°ÅÄ°M HESAPLAMALARI (HaftalÄ±klarÄ±n 1/7'si)
            const dailyFactor = 1/7;

            // BÃ¼tÃ§e
            let currentDailyBudgetChange = 0;
            let dailyRevenue = (population * gdp * (taxes / 520000) * (1 - cabinet.economy.corruption*0.5)) * dailyFactor;
            currentDailyBudgetChange += dailyRevenue;
            let dailyTotalSpending = 0;
            dailyTotalSpending += (educationSpending * (1 + cabinet.education.corruption*0.8)) * dailyFactor;
            dailyTotalSpending += (healthSpending * (1 + cabinet.health.corruption*0.8)) * dailyFactor;
            dailyTotalSpending += (cultureSpending * (1 + (cabinet.economy.corruption || 0.1)*0.8)) * dailyFactor; // VarsayÄ±lan bakan
            dailyTotalSpending += (socialPolicyLevel * 500000 * (1 + socialPolicyLevel/20)) * dailyFactor;
            const dailyArmyMaintenance = armySize * armyUpkeepCostPerSoldier * (1 + (militaryStrengthIndex - 50) / 150) * (1 - cabinet.defense.efficiency*0.1 + cabinet.defense.corruption*0.3) * dailyFactor;
            dailyTotalSpending += dailyArmyMaintenance;
            currentDailyBudgetChange -= dailyTotalSpending;
            weeklyBudgetChange += currentDailyBudgetChange; // HaftalÄ±k biriktiriciye ekle

            // Ekonomi
            let dailyGdpGrowth = ( (Math.random() - 0.45) * 0.004 * cabinet.economy.efficiency + (economicPolicyLevel - 5) * 0.0015 - inflation/500 ) * dailyFactor;
            weeklyGdpChangeFactor *= (1 + dailyGdpGrowth);

            let dailyInfChange = ( (currentDailyBudgetChange / (gdp +1) * 100) * 0.0003 + (Math.random() - 0.5) * 0.08 ) * dailyFactor;
            if (economicPolicyLevel > 6) dailyInfChange += (economicPolicyLevel - 6) * 0.15 * dailyFactor;
            else if (economicPolicyLevel < 4) dailyInfChange -= (4 - economicPolicyLevel) * 0.08 * dailyFactor;
            weeklyInflationChange += dailyInfChange;

            // NÃ¼fus
            let dailyPopGrowth = ( (satisfaction / 150000) - (inflation / 70000) + (healthSpending / (gdp+1) * 0.0002) ) * dailyFactor;
            weeklyPopulationChangeFactor *= (1 + dailyPopGrowth);
            
            // Sosyal
            let dailySatDelta = 0;
            dailySatDelta -= (taxes / 60) * dailyFactor;
            dailySatDelta += ((educationSpending / 600000 * cabinet.education.efficiency) + (healthSpending / 600000 * cabinet.health.efficiency) + (cultureSpending / 400000)) * dailyFactor;
            dailySatDelta += (socialPolicyLevel - 5) * 0.6 * dailyFactor;
            if (inflation > 6) dailySatDelta -= (inflation - 6) * 0.25 * dailyFactor;
            if (crimeRate > 6) dailySatDelta -= crimeRate * 0.6 * dailyFactor;
            if (securityLevel > 7 && governmentType === 'Demokrasi') dailySatDelta -= (securityLevel - 7) * 0.4 * dailyFactor;
            if (governmentType === 'DiktatÃ¶rlÃ¼k') dailySatDelta -= 0.8 * dailyFactor;
            if (propagandaEffectWeeks > 0) dailySatDelta += (2 + mediaInfluence/30) * dailyFactor; // Propaganda etkisi
            if (mediaFreedom < 3 && governmentType === 'Demokrasi') dailySatDelta -= (3 - mediaFreedom) * 0.2 * dailyFactor; // Demokraside dÃ¼ÅŸÃ¼k medya Ã¶zgÃ¼rlÃ¼ÄŸÃ¼
            weeklySatisfactionChange += dailySatDelta;

            // Siyasi Ä°stikrar
            let dailyStabDelta = 0;
            dailyStabDelta += (satisfaction - 60) / 20 * dailyFactor;
            if (governmentType === 'Demokrasi') dailyStabDelta -= Math.abs(parliamentSupport - 50) / 25 * dailyFactor;
            if (governmentType === 'Demokrasi' && parliamentSupport < 30) dailyStabDelta -= 2 * dailyFactor;
            if (governmentType === 'DiktatÃ¶rlÃ¼k') dailyStabDelta += (armyLoyalty - 60) / 15 * dailyFactor;
            else if (governmentType === 'Demokrasi') dailyStabDelta += (armyLoyalty - 70) / 25 * dailyFactor;
            if (crimeRate > 10) dailyStabDelta -= (crimeRate - 10) * 0.3 * dailyFactor;
            if (mediaFreedom < 4) dailyStabDelta -= (4 - mediaFreedom) * 0.15 * dailyFactor; // DÃ¼ÅŸÃ¼k medya Ã¶zgÃ¼rlÃ¼ÄŸÃ¼ istikrarÄ± bozar
            weeklyPoliticalStabilityChange += dailyStabDelta;
            
            // GÃ¼venlik & Askeri
            weeklyCrimeRateChange += ( (-(securityLevel - 4) * 0.12 - (militaryStrengthIndex / 1200) + (100 - politicalStability) / 300) * dailyFactor );
            weeklySecurityPerceptionChange += ( ((securityLevel - 5) * 0.6 + (militaryStrengthIndex / 600) - crimeRate / 3) * dailyFactor);
            // Ordu sadakati ve medya Ã¶zgÃ¼rlÃ¼ÄŸÃ¼ haftalÄ±k deÄŸiÅŸir.

            applyDailyChanges(); // GÃ¼nlÃ¼k birikenleri uygula

            addLog("GÃ¼n sona erdi, geliÅŸmeler yaÅŸandÄ±.", "info", true);
            dayOfWeek++;

            if (dayOfWeek > 7) {
                addLog("Bir hafta tamamlandÄ±! Ana ekrandan 'HaftayÄ± Bitir' ile resmi haftalÄ±k geliÅŸmeleri iÅŸleyebilirsiniz veya buradan 'HaftayÄ± Tamamla' butonunu kullanabilirsiniz.", "event", true);
                dayOfWeek = 1; // Sonraki gÃ¼n iÃ§in sÄ±fÄ±rla ama hafta bitirme iÅŸlemi kullanÄ±cÄ±ya kalsÄ±n
                week++; // HaftayÄ± ilerlet
                // HaftalÄ±k olaylar ve kontroller endWeek() iÃ§inde
                if(completeWeekReportsBtn) completeWeekReportsBtn.disabled = false;
                if(advanceDayBtn) advanceDayBtn.disabled = true; 
                endWeek(); // Otomatik olarak haftayÄ± bitir
            } else {
                 if(completeWeekReportsBtn) completeWeekReportsBtn.disabled = true;
                 if(advanceDayBtn) advanceDayBtn.disabled = isAtWar;
            }
            updateGameStats(); 
            enableAllActionButtons();
        }


        function endWeek() {
            if (isAtWar) {
                addLog("SavaÅŸ devam ediyor! HaftayÄ± bitiremezsiniz.", "danger");
                endWeekBtn.disabled = true; // SavaÅŸta butonu tekrar pasif yap
                return;
            }
             if (gameOverScreen.style.display !== 'none') return; // Oyun bittiyse iÅŸlem yapma


            // GÃ¼nlÃ¼k ilerlemede zaten anlÄ±k uygulandÄ±ÄŸÄ± iÃ§in burada tekrar applyDailyChanges() Ã§aÄŸÄ±rmaya gerek yok.
            // Sadece haftalÄ±k Ã¶zel olaylarÄ± ve kontrolleri yap.
            // HaftalÄ±k biriktiriciler zaten her gÃ¼n sonunda applyDailyChanges ile uygulanÄ±p sÄ±fÄ±rlandÄ±.

            // HaftalÄ±k Medya Ã–zgÃ¼rlÃ¼ÄŸÃ¼ DeÄŸiÅŸimi (EÄŸer bir hedef varsa ona doÄŸru yavaÅŸÃ§a ilerler)
            if (mediaFreedom !== parseFloat(mediaFreedomSlider.value)) {
                let targetFreedom = parseFloat(mediaFreedomSlider.value);
                weeklyMediaFreedomChange += (targetFreedom - mediaFreedom) * 0.2; // YavaÅŸ deÄŸiÅŸim
            }
            mediaFreedom += weeklyMediaFreedomChange;
            mediaFreedom = Math.max(0, Math.min(10, mediaFreedom));
            weeklyMediaFreedomChange = 0; // HaftalÄ±k etkiyi sÄ±fÄ±rla

            // Propaganda etkisi
            if (propagandaEffectWeeks > 0) {
                propagandaEffectWeeks--;
                // GÃ¼nlÃ¼k etki zaten `advanceOneDay` iÃ§inde `weeklySatisfactionChange`'e eklendi.
                if (propagandaEffectWeeks === 0) {
                    addLog("Devlet propaganda kampanyasÄ±nÄ±n yoÄŸun etkisi sona erdi.", "info");
                }
            }


            // Tarih verilerini kaydet (HaftalÄ±k)
            historicalData.weeks.push(week);
            historicalData.gdp.push(gdp);
            historicalData.satisfaction.push(satisfaction);
            historicalData.inflation.push(inflation);
            historicalData.politicalStability.push(politicalStability);
            gdpGrowthFactorGlobalForReport = weeklyGdpChangeFactor; // Bu deÄŸiÅŸken artÄ±k pek anlamlÄ± deÄŸil, gÃ¼nlÃ¼kten geliyor.
            inflationChangeGlobalForReport = weeklyInflationChange; // Bu da.


            // HAFTALIK OLAYLAR
            if (week > 1 && Math.random() < 0.30) { // HaftalÄ±k bÃ¼yÃ¼k olay ihtimali arttÄ±
                triggerRandomEvent(); 
            }
            // ... (DiÄŸer haftalÄ±k olaylar, seÃ§im vs. Ã¶nceki kodda olduÄŸu gibi) ...
            if (governmentType === 'Demokrasi' && week > 10 && week % (48 + Math.floor(Math.random()*9)) === 0 ) { 
                addLog('SEÃ‡Ä°M ZAMANI!', 'event');
                conductElections();
            }
             if (summitPlanned && summitInvitationsSent && !isAtWar) {
                let participatingCount = 0; let totalRelationBoostFromSummit = 0;
                getSelectedSummitInvitees().forEach(cN => {
                     if (countries[cN].summitAccepted) {
                        participatingCount++; countries[cN].relation = Math.min(100, countries[cN].relation + 5 + Math.floor(diplomaticApproachLevel/2));
                        totalRelationBoostFromSummit += (2 + Math.floor(diplomaticApproachLevel/3));
                    } else { countries[cN].relation = Math.max(0, countries[cN].relation - 2); }
                });
                if (participatingCount >= Math.max(1, getSelectedSummitInvitees().length / 2)) { 
                    addLog(`DÃ¼zenlediÄŸiniz zirve ${participatingCount} Ã¼lkenin katÄ±lÄ±mÄ±yla baÅŸarÄ±lÄ± oldu!`, "success");
                    foreignRelationsScore = Math.min(100, foreignRelationsScore + 5 + totalRelationBoostFromSummit);
                    satisfaction += 3; politicalStability += 2;
                } else if (participatingCount > 0) {
                    addLog(`Zirveye sadece ${participatingCount} Ã¼lke katÄ±ldÄ±. SÄ±nÄ±rlÄ± etki.`, "info");
                    foreignRelationsScore = Math.min(100, foreignRelationsScore + 2 + totalRelationBoostFromSummit/2); satisfaction += 1;
                } else {
                    addLog("Zirveye katÄ±lÄ±m olmadÄ±! Diplomatik fiyasko.", "danger");
                    foreignRelationsScore = Math.max(0, foreignRelationsScore - 5 - getSelectedSummitInvitees().length); 
                    satisfaction -= 2; politicalStability -=3;
                }
                summitPlanned = false; summitInvitationsSent = false;
                for (const cN in countries) { countries[cN].summitInvited = false; countries[cN].summitAccepted = false; }
                updateSummitInvitationList(); if(createSummitBtn) createSummitBtn.disabled = false; if(sendSummitInvitationsBtn) sendSummitInvitationsBtn.disabled = true;
            }


            // OYUN SONU KONTROLLERÄ° (HaftalÄ±k)
            // ... (Ã–nceki koddan oyun sonu koÅŸullarÄ± buraya eklenecek, gerekirse gÃ¼ncellenecek) ...
            if (satisfaction < 5 && politicalStability < 10 && week > 15) { gameOver('Halk isyan etti ve hÃ¼kÃ¼met devrildi! Ãœlkede kaos hakim.', 'normal'); return; }
            if (budget < -2000000000 && week > 25) { gameOver('Ãœlke iflas etti! UluslararasÄ± kuruluÅŸlar yÃ¶netime el koydu.', 'normal'); return; } 
            if (population < 100000 && week > 20) { gameOver('NÃ¼fus kritik seviyenin altÄ±na dÃ¼ÅŸtÃ¼. Ãœlke hayalet bir diyara dÃ¶ndÃ¼!', 'normal'); return; }
            if (governmentType === 'DiktatÃ¶rlÃ¼k' && armyLoyalty < 15 && politicalStability < 25 && week > 20) {
                 if (Math.random() < 0.7) { gameOver('Ordu yÃ¶netime el koydu! DiktatÃ¶rlÃ¼ÄŸÃ¼nÃ¼z sona erdi.', 'coup'); return; }
                 else { addLog("Ordu iÃ§inde bÃ¼yÃ¼k bir huzursuzluk var, darbe aÃ§Ä±kÃ§a konuÅŸuluyor!", "danger"); armyLoyalty = Math.max(0, armyLoyalty -15); }
            }
            if (politicalStability < 5 && satisfaction < 10 && week > 20) { 
                if (Math.random() < 0.5) { gameOver('Ãœlke iÃ§ savaÅŸa sÃ¼rÃ¼klendi! FarklÄ± gruplar kontrolÃ¼ ele geÃ§irmeye Ã§alÄ±ÅŸÄ±yor.', 'civil_war'); return; }
                else { addLog("Ãœlkede bÃ¼yÃ¼k Ã§aplÄ± protestolar ve Ã§atÄ±ÅŸmalar yaÅŸanÄ±yor. Ä°Ã§ savaÅŸ an meselesi!", "danger"); population -= Math.floor(population * 0.015); gdp *= 0.93; }
            }


            addLog(`----- HAFTA ${week} BÄ°TTÄ° / HAFTA ${week+1} BAÅLIYOR -----`, 'event');
            // week++; // week artÄ±ÅŸÄ± advanceOneDay iÃ§inde 7 gÃ¼n dolunca yapÄ±lÄ±yor.
            dayOfWeek = 1; // Yeni haftanÄ±n ilk gÃ¼nÃ¼ olarak ayarla
            
            updateGameStats();
            updateMinisterAdvice();
            updateReports(); 
            enableAllActionButtons(); 
            if(endWeekBtn) endWeekBtn.disabled = isAtWar; // SavaÅŸ yoksa aktif
        }
        
        // triggerRandomEvent, conductElections, vs. fonksiyonlarÄ± Ã¶nceki kodda olduÄŸu gibi kalacak
        // Sadece etkiledikleri deÄŸiÅŸkenler haftalÄ±k biriktiricilere deÄŸil, doÄŸrudan ana deÄŸiÅŸkenlere veya
        // advanceOneDay iÃ§inde kullanÄ±lacak gÃ¼nlÃ¼k biriktiricilere etki edecek ÅŸekilde dÃ¼zenlenebilir.
        // Åimdilik bu fonksiyonlarÄ±n haftalÄ±k etkileri olduÄŸu varsayÄ±lÄ±yor.

        // --- Medya YÃ¶netimi FonksiyonlarÄ± ---
        if(mediaFreedomSlider) mediaFreedomSlider.addEventListener('input', () => {
            if(mediaFreedomTargetValueEl) mediaFreedomTargetValueEl.textContent = mediaFreedomSlider.value;
        });

        if(applyMediaPolicyBtn) applyMediaPolicyBtn.addEventListener('click', () => {
            const targetFreedom = parseFloat(mediaFreedomSlider.value);
            let changeDirection = (targetFreedom > mediaFreedom) ? "artÄ±rma" : "azaltma";
            addLog(`Medya Ã¶zgÃ¼rlÃ¼ÄŸÃ¼ politikasÄ±nÄ± ${targetFreedom}/10 seviyesine ${changeDirection} yÃ¶nÃ¼nde deÄŸiÅŸtirdiniz. Etkisi zamanla gÃ¶rÃ¼lecektir.`, 'info');
            // HaftalÄ±k deÄŸiÅŸim endWeek iÃ§inde ayarlanacak (weeklyMediaFreedomChange ile)
            // AnlÄ±k kÃ¼Ã§Ã¼k bir etki de eklenebilir:
            weeklyPoliticalStabilityChange += (targetFreedom - mediaFreedom) * 0.1; // Daha Ã¶zgÃ¼r medya kÄ±sa vadede hafif istikrarsÄ±zlÄ±k yaratabilir veya tam tersi
            if(governmentType === 'DiktatÃ¶rlÃ¼k' && targetFreedom > 3) {
                addLog("DiktatÃ¶rlÃ¼kte medya Ã¶zgÃ¼rlÃ¼ÄŸÃ¼nÃ¼ bu kadar artÄ±rmak rejim iÃ§in riskli olabilir!", "warning");
                weeklyPoliticalStabilityChange -=2;
            }
            // mediaFreedom deÄŸiÅŸkeni endWeek iÃ§inde hedefe doÄŸru yavaÅŸÃ§a kayacak.
        });

        if(startPropagandaBtn) startPropagandaBtn.addEventListener('click', () => {
            const cost = 5000000;
            if (budget < cost) { addLog("Propaganda kampanyasÄ± iÃ§in bÃ¼tÃ§e yetersiz.", "warning"); return; }
            if (propagandaEffectWeeks > 0) { addLog("Zaten aktif bir propaganda kampanyasÄ± yÃ¼rÃ¼tÃ¼lÃ¼yor.", "warning"); return; }

            budget -= cost; weeklyBudgetChange -= cost; // Bu artÄ±k advanceOneDay'de haftalÄ±k biriktiriciye eklenecek
            propagandaEffectWeeks = 4; // 4 hafta sÃ¼recek
            mediaInfluence = Math.min(100, mediaInfluence + 5); // Propaganda medyanÄ±n etkisini (kÄ±sa sÃ¼reli) artÄ±rabilir
            addLog("GeniÅŸ Ã§aplÄ± bir devlet propaganda kampanyasÄ± baÅŸlatÄ±ldÄ±. (4 Hafta Etkili)", "success");
            if (mediaFreedom > 6 && governmentType === 'Demokrasi'){
                addLog("Ancak Ã¶zgÃ¼r basÄ±n bu kampanyayÄ± eleÅŸtiriyor, halkÄ±n bir kÄ±smÄ± ÅŸÃ¼pheci.", "warning");
                weeklySatisfactionChange -=1; // Hafif negatif etki
            }
        });

        if(applyCensorshipBtn) applyCensorshipBtn.addEventListener('click', () => {
            if (governmentType === 'Demokrasi' && mediaFreedom > 4) {
                addLog("Demokratik bir Ã¼lkede bu kadar aÄŸÄ±r sansÃ¼r uygulamak anayasal krize yol aÃ§abilir!", "danger");
                weeklyPoliticalStabilityChange -= 5;
                weeklySatisfactionChange -= 3;
                if(Math.random() < 0.2) {
                    mediaFreedom = Math.max(0, mediaFreedom - 0.5); // Ã‡ok yavaÅŸ dÃ¼ÅŸer
                    addLog("SansÃ¼r giriÅŸimi bÃ¼yÃ¼k tepki topladÄ± ve kÄ±smen engellendi.", "warning");
                } else {
                     mediaFreedom = Math.max(0, mediaFreedom - 1 - Math.random());
                }
            } else {
                mediaFreedom = Math.max(0, mediaFreedom - 1.5 - Math.random()*1.5);
            }
            addLog(`Medya Ã¼zerinde sansÃ¼r artÄ±rÄ±ldÄ±. Mevcut Medya Ã–zgÃ¼rlÃ¼ÄŸÃ¼: ${mediaFreedom.toFixed(1)}/10`, "danger");
            weeklySatisfactionChange -= 2;
            weeklyForeignRelationsChange -= 1;
            weeklyPoliticalStabilityChange += (governmentType === 'DiktatÃ¶rlÃ¼k' ? 2 : 0.5); // DiktatÃ¶rlÃ¼kte istikrarÄ± daha Ã§ok artÄ±rÄ±r
            mediaInfluence = Math.max(30, mediaInfluence - 5); // SansÃ¼r medyanÄ±n genel etkisini (gÃ¼venilirliÄŸini) dÃ¼ÅŸÃ¼rebilir
            if(mediaFreedomSlider) mediaFreedomSlider.value = mediaFreedom;
            if(mediaFreedomTargetValueEl) mediaFreedomTargetValueEl.textContent = mediaFreedom.toFixed(1);
            if(mediaFreedomValueDisplayEl) mediaFreedomValueDisplayEl.textContent = mediaFreedom.toFixed(1);
        });


        // DiÄŸer butonlarÄ±n event listener'larÄ± (yatÄ±rÄ±mlar, politikalar vs.)
        // Bu fonksiyonlar artÄ±k anlÄ±k deÄŸiÅŸiklik yapmak yerine `weekly...` deÄŸiÅŸkenlerini ayarlamalÄ±.
        // Ã–rnek: investEconomyBtn yukarÄ±da gÃ¼ncellendi. DiÄŸerleri de benzer mantÄ±kla gÃ¼ncellenmeli.
        // (KÄ±salÄ±k iÃ§in tÃ¼m butonlarÄ±n gÃ¼ncellenmiÅŸ hallerini buraya eklemiyorum)


        // Rapor EkranÄ± Zaman ButonlarÄ±
        if(advanceDayBtn) advanceDayBtn.addEventListener('click', () => {
            if (dayOfWeek <= 7 && !isAtWar && gameOverScreen.style.display === 'none') {
                advanceOneDay();
            } else if (isAtWar) {
                addLog("SavaÅŸ devam ederken gÃ¼nÃ¼ bu ÅŸekilde ilerletemezsiniz!", "warning", true);
            } else if (gameOverScreen.style.display !== 'none') {
                 addLog("Oyun bitti, zamanÄ± ilerletemezsiniz.", "warning", true);
            }
            else {
                addLog("Hafta zaten tamamlandÄ±. Ana ekrandan 'HaftayÄ± Bitir' ile ilerleyebilirsiniz.", "warning", true);
            }
        });

        if(completeWeekReportsBtn) completeWeekReportsBtn.addEventListener('click', () => {
            if (isAtWar) {
                 addLog("SavaÅŸ devam ederken haftayÄ± buradan tamamlayamazsÄ±nÄ±z!", "warning", true);
                return;
            }
            if (gameOverScreen.style.display !== 'none') {
                 addLog("Oyun bitti, zamanÄ± ilerletemezsiniz.", "warning", true);
                return;
            }
            addLog("HaftanÄ±n geri kalanÄ± hÄ±zla tamamlanÄ±yor...", "event", true);
            while(dayOfWeek <= 7) {
                advanceOneDay(); 
            }
            // endWeek() zaten advanceOneDay'in 7. gÃ¼nÃ¼nden sonra Ã§aÄŸrÄ±lÄ±yor.
        });
        
        // Ã–nceki kodda bulunan tÃ¼m diÄŸer buton event listener atamalarÄ± (setupInvestmentButtons, buton clickleri vb.)
        // buraya eklenmeli ve etkileri `weekly...` deÄŸiÅŸkenlerini deÄŸiÅŸtirecek ÅŸekilde gÃ¼ncellenmeli.
        // AnlÄ±k maliyet dÃ¼ÅŸÃ¼ÅŸleri (budget -= cost) kalabilir, ancak ana etkiler haftalÄ±k biriktiricilere gitmeli.
        // Ã–rnekler:
        if(document.getElementById('decrease-economy-investment')) document.getElementById('decrease-economy-investment').addEventListener('click', () => { economyInvestmentInput.value = Math.max(1, parseInt(economyInvestmentInput.value) - 1); });
        if(document.getElementById('increase-economy-investment')) document.getElementById('increase-economy-investment').addEventListener('click', () => { economyInvestmentInput.value = Math.min(100, parseInt(economyInvestmentInput.value) + 1); });
        // ... diÄŸer yatÄ±rÄ±m input butonlarÄ± ...

        if(investEducationBtn) investEducationBtn.addEventListener('click', () => {
            const amount = parseInt(educationInvestmentInput.value); const cost = amount * 1000000;
            if (budget < cost) { addLog(`EÄŸitim yatÄ±rÄ±mÄ± iÃ§in bÃ¼tÃ§e yok!`, 'warning'); return; }
            budget -= cost; 
            let effectiveAmount = cost * (1 - cabinet.education.corruption * 0.6);
            educationSpending += effectiveAmount; // Birikimli harcama
            weeklySatisfactionChange += 0.6 * (effectiveAmount / 5000000) * cabinet.education.efficiency;
            addLog(`${amount}M$ eÄŸitim yatÄ±rÄ±mÄ± planlandÄ±. HaftalÄ±k etkileri olacak.`, 'info');
            updateGameStats();
        });
         if(investHealthBtn) investHealthBtn.addEventListener('click', () => {
            const amount = parseInt(healthInvestmentInput.value); const cost = amount * 1000000;
            if (budget < cost) { addLog(`SaÄŸlÄ±k yatÄ±rÄ±mÄ± iÃ§in bÃ¼tÃ§e yok!`, 'warning'); return; }
            budget -= cost;
            let effectiveAmount = cost * (1 - cabinet.health.corruption * 0.6);
            healthSpending += effectiveAmount;
            weeklySatisfactionChange += 0.75 * (effectiveAmount / 7000000) * cabinet.health.efficiency;
             addLog(`${amount}M$ saÄŸlÄ±k yatÄ±rÄ±mÄ± planlandÄ±. HaftalÄ±k etkileri olacak.`, 'info');
            updateGameStats();
        });
        if(promoteCultureBtn) promoteCultureBtn.addEventListener('click', () => {
            const amount = parseInt(cultureInvestmentInput.value); const cost = amount * 1000000;
            if (budget < cost) { addLog(`KÃ¼ltÃ¼r yatÄ±rÄ±mÄ± iÃ§in bÃ¼tÃ§e yok!`, 'warning'); return; }
            budget -= cost;
            let effectiveAmount = cost * (1 - (cabinet.economy.corruption || 0.1) * 0.5); // VarsayÄ±lan bakan
            cultureSpending += effectiveAmount;
            weeklySatisfactionChange += 0.35 * (effectiveAmount / 3000000);
            addLog(`${amount}M$ kÃ¼ltÃ¼r yatÄ±rÄ±mÄ± planlandÄ±. HaftalÄ±k etkileri olacak.`, 'info');
            updateGameStats();
        });
        // DiÄŸer butonlar (declareHoliday, Meclis butonlarÄ±, DÄ±ÅŸ Politika, GÃ¼venlik vs.) iÃ§in de
        // anlÄ±k maliyetler ve haftalÄ±k etki biriktirme mantÄ±ÄŸÄ± uygulanmalÄ±.
        // SavaÅŸ ilanÄ± ve meclis feshi gibi bÃ¼yÃ¼k kararlarÄ±n senaryolarÄ± zenginleÅŸtirildi.

        // KODUN SONUNDA Ã‡ALIÅACAK Ä°LK YÃœKLEME FONKSÄ°YONLARI
        initTheme();
        resetGame(); 
        // showScreen('main-screen'); // resetGame iÃ§inde Ã§aÄŸrÄ±lÄ±yor zaten.

    </script>
</body>
</html>
